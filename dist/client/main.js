(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"],{

/***/ "../../node_modules/moment/locale sync recursive ^\\.\\/.*$":
/*!**************************************************************************************************************!*\
  !*** C:/Users/hataguchi/Desktop/workspace/smarttheater/transaction/node_modules/moment/locale sync ^\.\/.*$ ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "../../node_modules/moment/locale/af.js",
	"./af.js": "../../node_modules/moment/locale/af.js",
	"./ar": "../../node_modules/moment/locale/ar.js",
	"./ar-dz": "../../node_modules/moment/locale/ar-dz.js",
	"./ar-dz.js": "../../node_modules/moment/locale/ar-dz.js",
	"./ar-kw": "../../node_modules/moment/locale/ar-kw.js",
	"./ar-kw.js": "../../node_modules/moment/locale/ar-kw.js",
	"./ar-ly": "../../node_modules/moment/locale/ar-ly.js",
	"./ar-ly.js": "../../node_modules/moment/locale/ar-ly.js",
	"./ar-ma": "../../node_modules/moment/locale/ar-ma.js",
	"./ar-ma.js": "../../node_modules/moment/locale/ar-ma.js",
	"./ar-sa": "../../node_modules/moment/locale/ar-sa.js",
	"./ar-sa.js": "../../node_modules/moment/locale/ar-sa.js",
	"./ar-tn": "../../node_modules/moment/locale/ar-tn.js",
	"./ar-tn.js": "../../node_modules/moment/locale/ar-tn.js",
	"./ar.js": "../../node_modules/moment/locale/ar.js",
	"./az": "../../node_modules/moment/locale/az.js",
	"./az.js": "../../node_modules/moment/locale/az.js",
	"./be": "../../node_modules/moment/locale/be.js",
	"./be.js": "../../node_modules/moment/locale/be.js",
	"./bg": "../../node_modules/moment/locale/bg.js",
	"./bg.js": "../../node_modules/moment/locale/bg.js",
	"./bm": "../../node_modules/moment/locale/bm.js",
	"./bm.js": "../../node_modules/moment/locale/bm.js",
	"./bn": "../../node_modules/moment/locale/bn.js",
	"./bn.js": "../../node_modules/moment/locale/bn.js",
	"./bo": "../../node_modules/moment/locale/bo.js",
	"./bo.js": "../../node_modules/moment/locale/bo.js",
	"./br": "../../node_modules/moment/locale/br.js",
	"./br.js": "../../node_modules/moment/locale/br.js",
	"./bs": "../../node_modules/moment/locale/bs.js",
	"./bs.js": "../../node_modules/moment/locale/bs.js",
	"./ca": "../../node_modules/moment/locale/ca.js",
	"./ca.js": "../../node_modules/moment/locale/ca.js",
	"./cs": "../../node_modules/moment/locale/cs.js",
	"./cs.js": "../../node_modules/moment/locale/cs.js",
	"./cv": "../../node_modules/moment/locale/cv.js",
	"./cv.js": "../../node_modules/moment/locale/cv.js",
	"./cy": "../../node_modules/moment/locale/cy.js",
	"./cy.js": "../../node_modules/moment/locale/cy.js",
	"./da": "../../node_modules/moment/locale/da.js",
	"./da.js": "../../node_modules/moment/locale/da.js",
	"./de": "../../node_modules/moment/locale/de.js",
	"./de-at": "../../node_modules/moment/locale/de-at.js",
	"./de-at.js": "../../node_modules/moment/locale/de-at.js",
	"./de-ch": "../../node_modules/moment/locale/de-ch.js",
	"./de-ch.js": "../../node_modules/moment/locale/de-ch.js",
	"./de.js": "../../node_modules/moment/locale/de.js",
	"./dv": "../../node_modules/moment/locale/dv.js",
	"./dv.js": "../../node_modules/moment/locale/dv.js",
	"./el": "../../node_modules/moment/locale/el.js",
	"./el.js": "../../node_modules/moment/locale/el.js",
	"./en-SG": "../../node_modules/moment/locale/en-SG.js",
	"./en-SG.js": "../../node_modules/moment/locale/en-SG.js",
	"./en-au": "../../node_modules/moment/locale/en-au.js",
	"./en-au.js": "../../node_modules/moment/locale/en-au.js",
	"./en-ca": "../../node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "../../node_modules/moment/locale/en-ca.js",
	"./en-gb": "../../node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "../../node_modules/moment/locale/en-gb.js",
	"./en-ie": "../../node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "../../node_modules/moment/locale/en-ie.js",
	"./en-il": "../../node_modules/moment/locale/en-il.js",
	"./en-il.js": "../../node_modules/moment/locale/en-il.js",
	"./en-nz": "../../node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "../../node_modules/moment/locale/en-nz.js",
	"./eo": "../../node_modules/moment/locale/eo.js",
	"./eo.js": "../../node_modules/moment/locale/eo.js",
	"./es": "../../node_modules/moment/locale/es.js",
	"./es-do": "../../node_modules/moment/locale/es-do.js",
	"./es-do.js": "../../node_modules/moment/locale/es-do.js",
	"./es-us": "../../node_modules/moment/locale/es-us.js",
	"./es-us.js": "../../node_modules/moment/locale/es-us.js",
	"./es.js": "../../node_modules/moment/locale/es.js",
	"./et": "../../node_modules/moment/locale/et.js",
	"./et.js": "../../node_modules/moment/locale/et.js",
	"./eu": "../../node_modules/moment/locale/eu.js",
	"./eu.js": "../../node_modules/moment/locale/eu.js",
	"./fa": "../../node_modules/moment/locale/fa.js",
	"./fa.js": "../../node_modules/moment/locale/fa.js",
	"./fi": "../../node_modules/moment/locale/fi.js",
	"./fi.js": "../../node_modules/moment/locale/fi.js",
	"./fo": "../../node_modules/moment/locale/fo.js",
	"./fo.js": "../../node_modules/moment/locale/fo.js",
	"./fr": "../../node_modules/moment/locale/fr.js",
	"./fr-ca": "../../node_modules/moment/locale/fr-ca.js",
	"./fr-ca.js": "../../node_modules/moment/locale/fr-ca.js",
	"./fr-ch": "../../node_modules/moment/locale/fr-ch.js",
	"./fr-ch.js": "../../node_modules/moment/locale/fr-ch.js",
	"./fr.js": "../../node_modules/moment/locale/fr.js",
	"./fy": "../../node_modules/moment/locale/fy.js",
	"./fy.js": "../../node_modules/moment/locale/fy.js",
	"./ga": "../../node_modules/moment/locale/ga.js",
	"./ga.js": "../../node_modules/moment/locale/ga.js",
	"./gd": "../../node_modules/moment/locale/gd.js",
	"./gd.js": "../../node_modules/moment/locale/gd.js",
	"./gl": "../../node_modules/moment/locale/gl.js",
	"./gl.js": "../../node_modules/moment/locale/gl.js",
	"./gom-latn": "../../node_modules/moment/locale/gom-latn.js",
	"./gom-latn.js": "../../node_modules/moment/locale/gom-latn.js",
	"./gu": "../../node_modules/moment/locale/gu.js",
	"./gu.js": "../../node_modules/moment/locale/gu.js",
	"./he": "../../node_modules/moment/locale/he.js",
	"./he.js": "../../node_modules/moment/locale/he.js",
	"./hi": "../../node_modules/moment/locale/hi.js",
	"./hi.js": "../../node_modules/moment/locale/hi.js",
	"./hr": "../../node_modules/moment/locale/hr.js",
	"./hr.js": "../../node_modules/moment/locale/hr.js",
	"./hu": "../../node_modules/moment/locale/hu.js",
	"./hu.js": "../../node_modules/moment/locale/hu.js",
	"./hy-am": "../../node_modules/moment/locale/hy-am.js",
	"./hy-am.js": "../../node_modules/moment/locale/hy-am.js",
	"./id": "../../node_modules/moment/locale/id.js",
	"./id.js": "../../node_modules/moment/locale/id.js",
	"./is": "../../node_modules/moment/locale/is.js",
	"./is.js": "../../node_modules/moment/locale/is.js",
	"./it": "../../node_modules/moment/locale/it.js",
	"./it-ch": "../../node_modules/moment/locale/it-ch.js",
	"./it-ch.js": "../../node_modules/moment/locale/it-ch.js",
	"./it.js": "../../node_modules/moment/locale/it.js",
	"./ja": "../../node_modules/moment/locale/ja.js",
	"./ja.js": "../../node_modules/moment/locale/ja.js",
	"./jv": "../../node_modules/moment/locale/jv.js",
	"./jv.js": "../../node_modules/moment/locale/jv.js",
	"./ka": "../../node_modules/moment/locale/ka.js",
	"./ka.js": "../../node_modules/moment/locale/ka.js",
	"./kk": "../../node_modules/moment/locale/kk.js",
	"./kk.js": "../../node_modules/moment/locale/kk.js",
	"./km": "../../node_modules/moment/locale/km.js",
	"./km.js": "../../node_modules/moment/locale/km.js",
	"./kn": "../../node_modules/moment/locale/kn.js",
	"./kn.js": "../../node_modules/moment/locale/kn.js",
	"./ko": "../../node_modules/moment/locale/ko.js",
	"./ko.js": "../../node_modules/moment/locale/ko.js",
	"./ku": "../../node_modules/moment/locale/ku.js",
	"./ku.js": "../../node_modules/moment/locale/ku.js",
	"./ky": "../../node_modules/moment/locale/ky.js",
	"./ky.js": "../../node_modules/moment/locale/ky.js",
	"./lb": "../../node_modules/moment/locale/lb.js",
	"./lb.js": "../../node_modules/moment/locale/lb.js",
	"./lo": "../../node_modules/moment/locale/lo.js",
	"./lo.js": "../../node_modules/moment/locale/lo.js",
	"./lt": "../../node_modules/moment/locale/lt.js",
	"./lt.js": "../../node_modules/moment/locale/lt.js",
	"./lv": "../../node_modules/moment/locale/lv.js",
	"./lv.js": "../../node_modules/moment/locale/lv.js",
	"./me": "../../node_modules/moment/locale/me.js",
	"./me.js": "../../node_modules/moment/locale/me.js",
	"./mi": "../../node_modules/moment/locale/mi.js",
	"./mi.js": "../../node_modules/moment/locale/mi.js",
	"./mk": "../../node_modules/moment/locale/mk.js",
	"./mk.js": "../../node_modules/moment/locale/mk.js",
	"./ml": "../../node_modules/moment/locale/ml.js",
	"./ml.js": "../../node_modules/moment/locale/ml.js",
	"./mn": "../../node_modules/moment/locale/mn.js",
	"./mn.js": "../../node_modules/moment/locale/mn.js",
	"./mr": "../../node_modules/moment/locale/mr.js",
	"./mr.js": "../../node_modules/moment/locale/mr.js",
	"./ms": "../../node_modules/moment/locale/ms.js",
	"./ms-my": "../../node_modules/moment/locale/ms-my.js",
	"./ms-my.js": "../../node_modules/moment/locale/ms-my.js",
	"./ms.js": "../../node_modules/moment/locale/ms.js",
	"./mt": "../../node_modules/moment/locale/mt.js",
	"./mt.js": "../../node_modules/moment/locale/mt.js",
	"./my": "../../node_modules/moment/locale/my.js",
	"./my.js": "../../node_modules/moment/locale/my.js",
	"./nb": "../../node_modules/moment/locale/nb.js",
	"./nb.js": "../../node_modules/moment/locale/nb.js",
	"./ne": "../../node_modules/moment/locale/ne.js",
	"./ne.js": "../../node_modules/moment/locale/ne.js",
	"./nl": "../../node_modules/moment/locale/nl.js",
	"./nl-be": "../../node_modules/moment/locale/nl-be.js",
	"./nl-be.js": "../../node_modules/moment/locale/nl-be.js",
	"./nl.js": "../../node_modules/moment/locale/nl.js",
	"./nn": "../../node_modules/moment/locale/nn.js",
	"./nn.js": "../../node_modules/moment/locale/nn.js",
	"./pa-in": "../../node_modules/moment/locale/pa-in.js",
	"./pa-in.js": "../../node_modules/moment/locale/pa-in.js",
	"./pl": "../../node_modules/moment/locale/pl.js",
	"./pl.js": "../../node_modules/moment/locale/pl.js",
	"./pt": "../../node_modules/moment/locale/pt.js",
	"./pt-br": "../../node_modules/moment/locale/pt-br.js",
	"./pt-br.js": "../../node_modules/moment/locale/pt-br.js",
	"./pt.js": "../../node_modules/moment/locale/pt.js",
	"./ro": "../../node_modules/moment/locale/ro.js",
	"./ro.js": "../../node_modules/moment/locale/ro.js",
	"./ru": "../../node_modules/moment/locale/ru.js",
	"./ru.js": "../../node_modules/moment/locale/ru.js",
	"./sd": "../../node_modules/moment/locale/sd.js",
	"./sd.js": "../../node_modules/moment/locale/sd.js",
	"./se": "../../node_modules/moment/locale/se.js",
	"./se.js": "../../node_modules/moment/locale/se.js",
	"./si": "../../node_modules/moment/locale/si.js",
	"./si.js": "../../node_modules/moment/locale/si.js",
	"./sk": "../../node_modules/moment/locale/sk.js",
	"./sk.js": "../../node_modules/moment/locale/sk.js",
	"./sl": "../../node_modules/moment/locale/sl.js",
	"./sl.js": "../../node_modules/moment/locale/sl.js",
	"./sq": "../../node_modules/moment/locale/sq.js",
	"./sq.js": "../../node_modules/moment/locale/sq.js",
	"./sr": "../../node_modules/moment/locale/sr.js",
	"./sr-cyrl": "../../node_modules/moment/locale/sr-cyrl.js",
	"./sr-cyrl.js": "../../node_modules/moment/locale/sr-cyrl.js",
	"./sr.js": "../../node_modules/moment/locale/sr.js",
	"./ss": "../../node_modules/moment/locale/ss.js",
	"./ss.js": "../../node_modules/moment/locale/ss.js",
	"./sv": "../../node_modules/moment/locale/sv.js",
	"./sv.js": "../../node_modules/moment/locale/sv.js",
	"./sw": "../../node_modules/moment/locale/sw.js",
	"./sw.js": "../../node_modules/moment/locale/sw.js",
	"./ta": "../../node_modules/moment/locale/ta.js",
	"./ta.js": "../../node_modules/moment/locale/ta.js",
	"./te": "../../node_modules/moment/locale/te.js",
	"./te.js": "../../node_modules/moment/locale/te.js",
	"./tet": "../../node_modules/moment/locale/tet.js",
	"./tet.js": "../../node_modules/moment/locale/tet.js",
	"./tg": "../../node_modules/moment/locale/tg.js",
	"./tg.js": "../../node_modules/moment/locale/tg.js",
	"./th": "../../node_modules/moment/locale/th.js",
	"./th.js": "../../node_modules/moment/locale/th.js",
	"./tl-ph": "../../node_modules/moment/locale/tl-ph.js",
	"./tl-ph.js": "../../node_modules/moment/locale/tl-ph.js",
	"./tlh": "../../node_modules/moment/locale/tlh.js",
	"./tlh.js": "../../node_modules/moment/locale/tlh.js",
	"./tr": "../../node_modules/moment/locale/tr.js",
	"./tr.js": "../../node_modules/moment/locale/tr.js",
	"./tzl": "../../node_modules/moment/locale/tzl.js",
	"./tzl.js": "../../node_modules/moment/locale/tzl.js",
	"./tzm": "../../node_modules/moment/locale/tzm.js",
	"./tzm-latn": "../../node_modules/moment/locale/tzm-latn.js",
	"./tzm-latn.js": "../../node_modules/moment/locale/tzm-latn.js",
	"./tzm.js": "../../node_modules/moment/locale/tzm.js",
	"./ug-cn": "../../node_modules/moment/locale/ug-cn.js",
	"./ug-cn.js": "../../node_modules/moment/locale/ug-cn.js",
	"./uk": "../../node_modules/moment/locale/uk.js",
	"./uk.js": "../../node_modules/moment/locale/uk.js",
	"./ur": "../../node_modules/moment/locale/ur.js",
	"./ur.js": "../../node_modules/moment/locale/ur.js",
	"./uz": "../../node_modules/moment/locale/uz.js",
	"./uz-latn": "../../node_modules/moment/locale/uz-latn.js",
	"./uz-latn.js": "../../node_modules/moment/locale/uz-latn.js",
	"./uz.js": "../../node_modules/moment/locale/uz.js",
	"./vi": "../../node_modules/moment/locale/vi.js",
	"./vi.js": "../../node_modules/moment/locale/vi.js",
	"./x-pseudo": "../../node_modules/moment/locale/x-pseudo.js",
	"./x-pseudo.js": "../../node_modules/moment/locale/x-pseudo.js",
	"./yo": "../../node_modules/moment/locale/yo.js",
	"./yo.js": "../../node_modules/moment/locale/yo.js",
	"./zh-cn": "../../node_modules/moment/locale/zh-cn.js",
	"./zh-cn.js": "../../node_modules/moment/locale/zh-cn.js",
	"./zh-hk": "../../node_modules/moment/locale/zh-hk.js",
	"./zh-hk.js": "../../node_modules/moment/locale/zh-hk.js",
	"./zh-tw": "../../node_modules/moment/locale/zh-tw.js",
	"./zh-tw.js": "../../node_modules/moment/locale/zh-tw.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "../../node_modules/moment/locale sync recursive ^\\.\\/.*$";

/***/ }),

/***/ "./$$_lazy_route_resource lazy recursive":
/*!******************************************************!*\
  !*** ./$$_lazy_route_resource lazy namespace object ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(function() {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "./$$_lazy_route_resource lazy recursive";

/***/ }),

/***/ "./app/functions/creditcard.function.ts":
/*!**********************************************!*\
  !*** ./app/functions/creditcard.function.ts ***!
  \**********************************************/
/*! exports provided: createCreditCardTokenObject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createCreditCardTokenObject", function() { return createCreditCardTokenObject; });
/* harmony import */ var _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @cinerino/sdk */ "../../node_modules/@cinerino/sdk/lib/browser.js");
/* harmony import */ var _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _util_function__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util.function */ "./app/functions/util.function.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


/**
 * クレジットカードトークンオブジェクト作成
 */
function createCreditCardTokenObject(params) {
    return __awaiter(this, void 0, void 0, function* () {
        const { seller, creditCard } = params;
        if (seller.paymentAccepted === undefined) {
            throw new Error('seller.paymentAccepted is undefined');
        }
        const findPaymentAcceptedResult = seller.paymentAccepted.find((paymentAccepted) => {
            return (paymentAccepted.paymentMethodType === _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__["factory"].paymentMethodType.CreditCard);
        });
        if (findPaymentAcceptedResult === undefined
            || findPaymentAcceptedResult.paymentMethodType !== _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__["factory"].paymentMethodType.CreditCard) {
            throw new Error('paymentMethodType CreditCard not found');
        }
        const gmoInfo = findPaymentAcceptedResult.gmoInfo;
        if (gmoInfo === undefined) {
            throw new Error('gmoInfo undefined');
        }
        else if (gmoInfo.tokenizationCode !== undefined) {
            return yield createSonyTokenObject({ creditCard, tokenizationCode: gmoInfo.tokenizationCode });
        }
        else if (gmoInfo.shopId !== undefined) {
            return yield createGmoTokenObject({ creditCard, shopId: gmoInfo.shopId });
        }
        else {
            throw new Error('gmoInfo.shopId or gmoInfo.tokenizationCode undefined');
        }
    });
}
/**
 * GMOトークンオブジェクト生成
 */
function createGmoTokenObject(params) {
    const { creditCard, shopId } = params;
    return new Promise((resolve, reject) => {
        window.someCallbackFunction = function someCallbackFunction(response) {
            if (response.resultCode === '000') {
                resolve(response.tokenObject);
            }
            else {
                reject(new Error(response.resultCode));
            }
        };
        const Multipayment = window.Multipayment;
        Multipayment.init(shopId);
        Multipayment.getToken(creditCard, window.someCallbackFunction);
    });
}
/**
 * Sonyトークンオブジェクト生成
 */
function createSonyTokenObject(params) {
    return new Promise((resolve, reject) => {
        const { creditCard, tokenizationCode } = params;
        const tokenUrl = Object(_util_function__WEBPACK_IMPORTED_MODULE_1__["getProject"])().sonyTokenUrl;
        if (tokenUrl === undefined) {
            reject(new Error('sonyTokenUrl undefined'));
        }
        const script = document.createElement('script');
        script.id = 'sonypayment';
        script.src = `${tokenUrl}?k_TokenNinsyoCode=${tokenizationCode}`;
        script.classList.add('spsvToken');
        script.setAttribute('callBackFunc', 'setToken');
        script.onload = () => {
            if (window.SpsvApi === undefined) {
                reject(new Error('SpsvApi undefined'));
                return;
            }
            window.SpsvApi.spsvCreateToken(creditCard.cardno, creditCard.expire.slice(2, 4), creditCard.expire.slice(4, 6), creditCard.securityCode, '', '', '', '', '');
            window.setToken = function setToken(token, card) {
                script.remove();
                window.SpsvApi = undefined;
                resolve({
                    token,
                    maskedCardNo: card
                });
            };
        };
        script.onerror = (event) => {
            script.remove();
            window.SpsvApi = undefined;
            const message = (typeof event === 'string') ? event : JSON.stringify(event);
            reject(new Error(message));
        };
        document.head.appendChild(script);
    });
}


/***/ }),

/***/ "./app/functions/index.ts":
/*!********************************!*\
  !*** ./app/functions/index.ts ***!
  \********************************/
/*! exports provided: Purchase, Util, Order, Translate, Creditcard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _creditcard_function__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./creditcard.function */ "./app/functions/creditcard.function.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Creditcard", function() { return _creditcard_function__WEBPACK_IMPORTED_MODULE_0__; });
/* harmony import */ var _order_function__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./order.function */ "./app/functions/order.function.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Order", function() { return _order_function__WEBPACK_IMPORTED_MODULE_1__; });
/* harmony import */ var _purchase_function__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./purchase.function */ "./app/functions/purchase.function.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Purchase", function() { return _purchase_function__WEBPACK_IMPORTED_MODULE_2__; });
/* harmony import */ var _translate_function__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./translate.function */ "./app/functions/translate.function.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Translate", function() { return _translate_function__WEBPACK_IMPORTED_MODULE_3__; });
/* harmony import */ var _util_function__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./util.function */ "./app/functions/util.function.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Util", function() { return _util_function__WEBPACK_IMPORTED_MODULE_4__; });








/***/ }),

/***/ "./app/functions/order.function.ts":
/*!*****************************************!*\
  !*** ./app/functions/order.function.ts ***!
  \*****************************************/
/*! exports provided: createPrintCanvas4Html, createTestPrintCanvas4Html, isShowQRCode, createCustomQRCode, createQRCode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createPrintCanvas4Html", function() { return createPrintCanvas4Html; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createTestPrintCanvas4Html", function() { return createTestPrintCanvas4Html; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isShowQRCode", function() { return isShowQRCode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createCustomQRCode", function() { return createCustomQRCode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createQRCode", function() { return createQRCode; });
/* harmony import */ var _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @cinerino/sdk */ "../../node_modules/@cinerino/sdk/lib/browser.js");
/* harmony import */ var _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! html2canvas */ "../../node_modules/html2canvas/dist/html2canvas.js");
/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(html2canvas__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "../../node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var qrcode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! qrcode */ "../../node_modules/qrcode/lib/browser.js");
/* harmony import */ var qrcode__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(qrcode__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../environments/environment */ "./environments/environment.ts");
/* harmony import */ var _models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models */ "./app/models/index.ts");
/* harmony import */ var _util_function__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./util.function */ "./app/functions/util.function.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};







/**
 * 印刷イメージ作成
 */
function createPrintCanvas4Html(params) {
    return __awaiter(this, void 0, void 0, function* () {
        // QR描画
        if (params.qrcode !== undefined) {
            params.qrcode = yield qrcode__WEBPACK_IMPORTED_MODULE_3__["toDataURL"](params.qrcode);
        }
        const template = yield window.ejs.render(params.view, Object.assign(Object.assign({ moment: moment__WEBPACK_IMPORTED_MODULE_2__ }, params), { storageUrl: Object(_util_function__WEBPACK_IMPORTED_MODULE_6__["getProject"])().storageUrl }), { async: true });
        const div = document.createElement('div');
        div.className = 'position-absolute';
        div.style.top = '-9999px';
        div.innerHTML = template;
        document.body.appendChild(div);
        const canvas = yield html2canvas__WEBPACK_IMPORTED_MODULE_1___default()(div, { width: div.clientWidth, scale: 1 });
        div.remove();
        return canvas;
    });
}
/**
 * テスト印刷用イメージ作成
 */
function createTestPrintCanvas4Html(params) {
    return __awaiter(this, void 0, void 0, function* () {
        const view = params.view;
        const template = yield window.ejs.render(view, { moment: moment__WEBPACK_IMPORTED_MODULE_2__ }, { async: true });
        const div = document.createElement('div');
        div.className = 'position-absolute';
        div.style.top = '-9999px';
        div.innerHTML = template;
        document.body.appendChild(div);
        const canvas = yield html2canvas__WEBPACK_IMPORTED_MODULE_1___default()(div, { width: div.clientWidth, scale: 1 });
        div.remove();
        return canvas;
    });
}
/**
 * QRコード表示判定
 */
function isShowQRCode(event) {
    return moment__WEBPACK_IMPORTED_MODULE_2__(event.startDate).add(-24, 'hours').toDate() < moment__WEBPACK_IMPORTED_MODULE_2__().toDate();
}
/**
 * カスタムQR作成
 */
function createCustomQRCode(params) {
    let result = params.qrcode;
    const order = params.order;
    const itemOffered = params.itemOffered;
    const index = params.index;
    result = result
        .replace(/\{\{ orderDate \| YYMMDD \}\}/g, moment__WEBPACK_IMPORTED_MODULE_2__(order.orderDate).format('YYMMDD'));
    result = result
        .replace(/\{\{ confirmationNumber \}\}/g, order.confirmationNumber);
    result = result
        .replace(/\{\{ confirmationNumber \| [0-9] \}\}/g, (match) => {
        const digit = Number(match.replace(/\{\{ confirmationNumber \| ([0-9]) \}\}/, '$1'));
        return `000000000${order.confirmationNumber}`.slice(-1 * digit);
    });
    result = result
        .replace(/\{\{ index \}\}/g, String(index));
    result = result
        .replace(/\{\{ index \| [0-9] \}\}/g, (match) => {
        const digit = Number(match.replace(/\{\{ index \| ([0-9]) \}\}/, '$1'));
        return `000000000${String(index)}`.slice(-1 * digit);
    });
    result = result
        .replace(/\{\{ orderNumber \}\}/g, order.orderNumber);
    result = result
        .replace(/\{\{ startDate \| YYMMDD \}\}/g, moment__WEBPACK_IMPORTED_MODULE_2__(itemOffered.reservationFor.startDate).format('YYMMDD'));
    return result;
}
/**
 * QR作成
 */
function createQRCode(params) {
    const { acceptedOffer, order, index, code } = params;
    if (acceptedOffer.itemOffered.typeOf !== _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__["factory"].chevre.reservationType.EventReservation) {
        return undefined;
    }
    let result;
    const itemOffered = acceptedOffer.itemOffered;
    const environment = Object(_environments_environment__WEBPACK_IMPORTED_MODULE_4__["getEnvironment"])();
    if (environment.PRINT_QRCODE_TYPE === _models__WEBPACK_IMPORTED_MODULE_5__["Order"].Print.PrintQrcodeType.None) {
        // なし
        result = undefined;
    }
    else if (environment.PRINT_QRCODE_TYPE === _models__WEBPACK_IMPORTED_MODULE_5__["Order"].Print.PrintQrcodeType.Token) {
        // トークン
        result = `${itemOffered.id}@${code}`;
    }
    else if (environment.PRINT_QRCODE_TYPE === _models__WEBPACK_IMPORTED_MODULE_5__["Order"].Print.PrintQrcodeType.Custom) {
        // カスタム文字列
        result = createCustomQRCode({
            qrcode: environment.PRINT_QRCODE_CUSTOM,
            order,
            itemOffered,
            index
        });
    }
    const additionalProperty = (itemOffered.reservationFor.workPerformed !== undefined
        && itemOffered.reservationFor.workPerformed.additionalProperty !== undefined
        && itemOffered.reservationFor.workPerformed.additionalProperty.length > 0)
        ? itemOffered.reservationFor.workPerformed.additionalProperty :
        (itemOffered.additionalProperty !== undefined
            && itemOffered.additionalProperty.length > 0) ?
            itemOffered.additionalProperty
            : undefined;
    if (additionalProperty !== undefined) {
        // 追加特性のqrcodeがfalseの場合QR非表示
        const isDisplayQrcode = additionalProperty.find(a => a.name === 'qrcode');
        if (isDisplayQrcode !== undefined && isDisplayQrcode.value === 'false') {
            result = undefined;
        }
    }
    return result;
}


/***/ }),

/***/ "./app/functions/purchase.function.ts":
/*!********************************************!*\
  !*** ./app/functions/purchase.function.ts ***!
  \********************************************/
/*! exports provided: screeningEvents2ScreeningEventSeries, sameMovieTicketFilter, isAvailabilityMovieTicket, createMovieTicketsFromAuthorizeSeatReservation, getTicketPrice, getItemPrice, movieTicketAuthErroCodeToMessage, getAmount, order2EventOrders, authorizeSeatReservation2Event, getRemainingSeatLength, isEligibleSeatingType, getEmptySeat, selectAvailableSeat, getMovieTicketTypeOffers */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "screeningEvents2ScreeningEventSeries", function() { return screeningEvents2ScreeningEventSeries; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sameMovieTicketFilter", function() { return sameMovieTicketFilter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isAvailabilityMovieTicket", function() { return isAvailabilityMovieTicket; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createMovieTicketsFromAuthorizeSeatReservation", function() { return createMovieTicketsFromAuthorizeSeatReservation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTicketPrice", function() { return getTicketPrice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getItemPrice", function() { return getItemPrice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "movieTicketAuthErroCodeToMessage", function() { return movieTicketAuthErroCodeToMessage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAmount", function() { return getAmount; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "order2EventOrders", function() { return order2EventOrders; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "authorizeSeatReservation2Event", function() { return authorizeSeatReservation2Event; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRemainingSeatLength", function() { return getRemainingSeatLength; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isEligibleSeatingType", function() { return isEligibleSeatingType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEmptySeat", function() { return getEmptySeat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectAvailableSeat", function() { return selectAvailableSeat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMovieTicketTypeOffers", function() { return getMovieTicketTypeOffers; });
/* harmony import */ var _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @cinerino/sdk */ "../../node_modules/@cinerino/sdk/lib/browser.js");
/* harmony import */ var _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "../../node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../environments/environment */ "./environments/environment.ts");
/* harmony import */ var _models_purchase_performance__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../models/purchase/performance */ "./app/models/purchase/performance.ts");




/**
 * 施設コンテンツごとのグループへ変換
 */
function screeningEvents2ScreeningEventSeries(params) {
    const environment = Object(_environments_environment__WEBPACK_IMPORTED_MODULE_2__["getEnvironment"])();
    const result = [];
    const { screeningEvents, now } = params;
    screeningEvents.forEach((screeningEvent) => {
        const registered = result.find((data) => {
            if (environment.PURCHASE_SCHEDULE_SORT === 'screeningEventSeries') {
                return (data.screeningEvent.superEvent.id ===
                    screeningEvent.superEvent.id);
            }
            else {
                return (data.screeningEvent.location.branchCode ===
                    screeningEvent.location.branchCode);
            }
        });
        const performance = new _models_purchase_performance__WEBPACK_IMPORTED_MODULE_3__["Performance"]({ screeningEvent, now });
        if (registered === undefined) {
            result.push({
                screeningEvent,
                data: [performance],
            });
        }
        else {
            registered.data.push(performance);
        }
    });
    return result;
}
/**
 * ムビチケ検索
 */
function sameMovieTicketFilter(params) {
    const { checkMovieTicketAction, checkMovieTicketActions } = params;
    if (checkMovieTicketAction.result === undefined ||
        checkMovieTicketAction.result.purchaseNumberAuthResult
            .knyknrNoInfoOut === null ||
        checkMovieTicketAction.result.purchaseNumberAuthResult
            .knyknrNoInfoOut[0].ykknInfo === null) {
        return [];
    }
    const result = [];
    checkMovieTicketActions.forEach((action) => {
        if (action.result === undefined ||
            action.result.purchaseNumberAuthResult.knyknrNoInfoOut === null ||
            action.result.purchaseNumberAuthResult.knyknrNoInfoOut[0]
                .ykknInfo === null) {
            return;
        }
        if (checkMovieTicketAction.result === undefined ||
            action.result.movieTickets[0].identifier !==
                checkMovieTicketAction.result.movieTickets[0].identifier) {
            return;
        }
        result.push(action);
    });
    return result;
}
/**
 * ムビチケ有効
 */
function isAvailabilityMovieTicket(checkMovieTicketAction) {
    return (checkMovieTicketAction.result !== undefined &&
        checkMovieTicketAction.result.purchaseNumberAuthResult
            .knyknrNoInfoOut !== null &&
        checkMovieTicketAction.result.purchaseNumberAuthResult
            .knyknrNoInfoOut[0].ykknInfo !== null);
}
/**
 *  予約情報からムビチケ情報作成
 */
function createMovieTicketsFromAuthorizeSeatReservation(args) {
    const results = [];
    const authorizeSeatReservation = args.authorizeSeatReservation;
    const pendingMovieTickets = args.pendingMovieTickets;
    const seller = args.seller;
    if (authorizeSeatReservation.result === undefined) {
        return [];
    }
    const pendingReservations = authorizeSeatReservation.result.responseBody.object.reservations;
    pendingReservations.forEach((pendingReservation) => {
        if (pendingReservation.price === undefined ||
            typeof pendingReservation.price === 'number') {
            return;
        }
        const findMovieTicketTypeChargeSpecification = pendingReservation.price.priceComponent.find((p) => p.typeOf ===
            _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__["factory"].chevre.priceSpecificationType
                .MovieTicketTypeChargeSpecification);
        if (findMovieTicketTypeChargeSpecification === undefined) {
            return;
        }
        const findPendingMovieTicket = pendingMovieTickets.find((pendingMovieTicket) => {
            return pendingMovieTicket.id === authorizeSeatReservation.id;
        });
        if (findPendingMovieTicket === undefined) {
            return;
        }
        const findReservation = findPendingMovieTicket.movieTickets.find((movieTicket) => {
            const seatNumber = movieTicket.serviceOutput.reservedTicket.ticketedSeat
                .seatNumber;
            const seatSection = movieTicket.serviceOutput.reservedTicket.ticketedSeat
                .seatSection;
            return (pendingReservation.reservedTicket.ticketedSeat !==
                undefined &&
                seatNumber ===
                    pendingReservation.reservedTicket.ticketedSeat
                        .seatNumber &&
                seatSection ===
                    pendingReservation.reservedTicket.ticketedSeat
                        .seatSection);
        });
        if (findReservation === undefined) {
            return;
        }
        results.push({
            typeOf: findReservation.typeOf,
            identifier: findReservation.identifier,
            accessCode: findReservation.accessCode,
            serviceType: findReservation.serviceType,
            serviceOutput: findReservation.serviceOutput,
            project: seller.project,
        });
    });
    return results;
}
/**
 * 券種金額取得
 * @deprecated 非推奨（廃止予定）
 */
function getTicketPrice(ticket) {
    const result = {
        unitPriceSpecification: 0,
        videoFormatCharge: 0,
        soundFormatCharge: 0,
        movieTicketTypeCharge: 0,
        total: 0,
        single: 0,
    };
    if (ticket.priceSpecification === undefined) {
        return result;
    }
    const priceComponent = ticket.priceSpecification.priceComponent;
    const priceSpecificationType = _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__["factory"].chevre.priceSpecificationType;
    const unitPriceSpecifications = priceComponent.filter((s) => s.typeOf === priceSpecificationType.UnitPriceSpecification);
    const movieTicketTypeCharges = priceComponent.filter((s) => s.typeOf ===
        priceSpecificationType.MovieTicketTypeChargeSpecification);
    result.unitPriceSpecification += unitPriceSpecifications[0].price;
    movieTicketTypeCharges.forEach((movieTicketTypeCharge) => {
        result.movieTicketTypeCharge += movieTicketTypeCharge.price;
    });
    result.total =
        result.unitPriceSpecification +
            result.videoFormatCharge +
            result.soundFormatCharge +
            result.movieTicketTypeCharge;
    const unitPriceSpecification = unitPriceSpecifications[0];
    if (unitPriceSpecification.typeOf ===
        priceSpecificationType.UnitPriceSpecification) {
        const referenceQuantityValue = unitPriceSpecification.referenceQuantity.value === undefined
            ? 1
            : unitPriceSpecification.referenceQuantity.value;
        result.single = result.total / referenceQuantityValue;
    }
    return result;
}
/**
 * アイテム金額取得
 */
function getItemPrice(params) {
    let price = 0;
    // 券種価格
    const priceComponents = params.priceComponents;
    if (priceComponents === undefined) {
        return price;
    }
    const priceSpecificationType = _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__["factory"].chevre.priceSpecificationType;
    priceComponents.forEach((p) => {
        if (p.typeOf === priceSpecificationType.UnitPriceSpecification) {
            const value = p.referenceQuantity.value
                ? p.referenceQuantity.value
                : 1;
            price += p.price / value;
            return;
        }
        price += p.price;
    });
    // 座席価格
    const seat = params.seat;
    if (seat === undefined || seat.offers === undefined) {
        return price;
    }
    seat.offers.forEach((o) => {
        if (o.priceSpecification === undefined) {
            return;
        }
        o.priceSpecification.priceComponent.forEach((p) => (price += p.price));
    });
    return price;
}
/**
 * ムビチケ認証購入管理番号無効事由区分変換
 */
function movieTicketAuthErroCodeToMessage(code) {
    const table = [
        { code: '01', ja: '存在無', en: 'no existence' },
        { code: '02', ja: 'PINｺｰﾄﾞ必須', en: 'PIN code required' },
        {
            code: '03',
            ja: 'PINｺｰﾄﾞ認証ｴﾗｰ',
            en: 'PIN code authentication error',
        },
        { code: '04', ja: '作品不一致', en: 'Work disagreement' },
        { code: '05', ja: '未ｱｸﾃｨﾍﾞｰﾄ', en: 'unactivated' },
        {
            code: '06',
            ja: '選択興行対象外',
            en: 'Not eligible for selection box',
        },
        { code: '07', ja: '有効期限切れ', en: 'expired' },
        {
            code: '08',
            ja: '座席予約期間外',
            en: 'outside the seat reservation period',
        },
        { code: '09', ja: 'その他', en: 'other' },
        {
            code: '11',
            ja: '座席予約開始前',
            en: 'Before starting seat reservation',
        },
        {
            code: '12',
            ja: '仮お直り購入番号数不一致',
            en: 'temporary redemption purchase number mismatch',
        },
    ];
    const findResult = table.find((data) => data.code === code);
    return findResult === undefined
        ? { ja: 'その他', en: 'other' }
        : { ja: findResult.ja, en: findResult.en };
}
/**
 * 予約金額取得
 */
function getAmount(authorizeSeatReservations) {
    const amounts = authorizeSeatReservations.map((reservations) => reservations.result === undefined ? 0 : reservations.result.price);
    const amount = amounts.reduce((previousValue, currentValue) => previousValue + currentValue);
    return amount;
}
/**
 * イベント別オーダーへ変換
 */
function order2EventOrders(params) {
    const results = [];
    const order = params.order;
    order.acceptedOffers.forEach((acceptedOffer) => {
        if (acceptedOffer.itemOffered.typeOf !==
            _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__["factory"].chevre.reservationType.EventReservation) {
            return;
        }
        const itemOffered = acceptedOffer.itemOffered;
        const registered = results.find((result) => {
            return result.event.id === itemOffered.reservationFor.id;
        });
        if (registered === undefined) {
            results.push({
                event: itemOffered.reservationFor,
                data: [acceptedOffer],
            });
        }
        else {
            registered.data.push(acceptedOffer);
        }
    });
    // 公開日順（降順）へソート
    const sortResult = results.sort((a, b) => {
        if (a.event.workPerformed === undefined ||
            a.event.workPerformed.datePublished === undefined) {
            return 1;
        }
        if (b.event.workPerformed === undefined ||
            b.event.workPerformed.datePublished === undefined) {
            return -1;
        }
        const unixA = moment__WEBPACK_IMPORTED_MODULE_1__(a.event.workPerformed.datePublished).unix();
        const unixB = moment__WEBPACK_IMPORTED_MODULE_1__(b.event.workPerformed.datePublished).unix();
        if (unixA > unixB) {
            return -1;
        }
        if (unixA < unixB) {
            return 1;
        }
        return 0;
    });
    return sortResult;
}
/**
 * 座席予約をイベントごとに変換
 */
function authorizeSeatReservation2Event(params) {
    const results = [];
    const authorizeSeatReservations = params.authorizeSeatReservations;
    authorizeSeatReservations.forEach((authorizeSeatReservation) => {
        if (authorizeSeatReservation.result === undefined) {
            return;
        }
        const reservations = authorizeSeatReservation.result.responseBody.object
            .reservations;
        reservations.forEach((reservation) => {
            const registered = results.find((result) => {
                return result.event.id === reservation.reservationFor.id;
            });
            if (registered === undefined) {
                results.push({
                    event: reservation.reservationFor,
                    reservations: [reservation],
                });
            }
            else {
                registered.reservations.push(reservation);
            }
        });
    });
    return results;
}
/**
 * 残席数取得
 */
function getRemainingSeatLength(params) {
    const screeningEventSeats = params.screeningEventSeats;
    const screeningEvent = params.screeningEvent;
    let result = 0;
    const limitSeatNumber = screeningEvent.workPerformed === undefined ||
        screeningEvent.workPerformed.additionalProperty === undefined
        ? undefined
        : screeningEvent.workPerformed.additionalProperty.find((a) => a.name === 'limitSeatNumber');
    const filterResult = screeningEventSeats.filter((s) => {
        if (limitSeatNumber !== undefined) {
            // 作品追加特性（limitSeatNumber）で座席数制御
            return (s.offers !== undefined &&
                s.offers[0].availability ===
                    _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__["factory"].chevre.itemAvailability.InStock &&
                Number(s.branchCode) <= Number(limitSeatNumber.value));
        }
        return (s.offers !== undefined &&
            s.offers[0].availability === _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__["factory"].chevre.itemAvailability.InStock);
    });
    result += filterResult.length;
    const reservationCount = screeningEventSeats.filter((s) => {
        return (s.offers !== undefined &&
            s.offers[0].availability ===
                _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__["factory"].chevre.itemAvailability.OutOfStock);
    }).length;
    if (screeningEvent.maximumAttendeeCapacity !== undefined &&
        result > screeningEvent.maximumAttendeeCapacity - reservationCount) {
        result = screeningEvent.maximumAttendeeCapacity - reservationCount;
    }
    return result;
}
/**
 * 適用座席タイプ判定
 */
function isEligibleSeatingType(params) {
    const seat = params.seat;
    const eligibleSeatingType = params.eligibleSeatingType;
    const filterResult = eligibleSeatingType.filter((e) => {
        if (Array.isArray(seat.seatingType)) {
            return (seat.seatingType.find((s) => e.codeValue === s) !== undefined);
        }
        return e.codeValue === seat.seatingType;
    });
    return filterResult.length === eligibleSeatingType.length;
}
/**
 * 空席取得
 */
function getEmptySeat(params) {
    const reservations = params.reservations;
    const screeningEventSeats = params.screeningEventSeats;
    const seats = [];
    screeningEventSeats.forEach((s) => {
        const section = s.containedInPlace === undefined ||
            s.containedInPlace.branchCode === undefined
            ? ''
            : s.containedInPlace.branchCode;
        const selectedSeat = reservations.find((r) => {
            return (r.seat !== undefined &&
                r.seat.seatNumber === s.branchCode &&
                r.seat.seatSection === section);
        });
        if ((s.offers === undefined ||
            s.offers[0].availability !==
                _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__["factory"].chevre.itemAvailability.InStock) &&
            selectedSeat === undefined) {
            // 在庫なし
            return;
        }
        seats.push({
            typeOf: s.typeOf,
            seatingType: s.seatingType,
            seatNumber: s.branchCode,
            seatRow: '',
            seatSection: section,
        });
    });
    return seats;
}
/**
 * 予約可能席取得
 */
function selectAvailableSeat(params) {
    const reservations = params.reservations;
    const screeningEventSeats = params.screeningEventSeats;
    const seats = getEmptySeat({ reservations, screeningEventSeats });
    const availableSeats = [];
    reservations.forEach((r) => {
        const findReservationSeat = seats.find((s) => {
            const findReservedSeat = availableSeats.find((a) => {
                const findSubReservedSeat = a.subReservations.find((sub) => sub.seatNumber === s.seatNumber &&
                    sub.seatSection === s.seatSection);
                if (findSubReservedSeat !== undefined) {
                    // サブ予約済み座席
                    return true;
                }
                return (a.seatNumber === s.seatNumber &&
                    a.seatSection === s.seatSection);
            });
            if (findReservedSeat !== undefined) {
                // 予約済み座席
                return false;
            }
            if (r.ticket !== undefined &&
                r.ticket.ticketOffer.eligibleSeatingType !== undefined &&
                !isEligibleSeatingType({
                    seat: s,
                    eligibleSeatingType: r.ticket.ticketOffer.eligibleSeatingType,
                })) {
                // 適用座席タイプ違い
                return false;
            }
            if (r.seat !== undefined) {
                // 座席選択済みの場合予約中の座席を選択
                return (r.seat.seatNumber === s.seatNumber &&
                    r.seat.seatSection === s.seatSection);
            }
            return true;
        });
        if (findReservationSeat === undefined) {
            // 予約可能席なし
            return;
        }
        if (r.ticket === undefined ||
            r.ticket.ticketOffer.eligibleSubReservation === undefined) {
            // サブ予約なし
            availableSeats.push(Object.assign(Object.assign({}, findReservationSeat), { subReservations: [] }));
            return;
        }
        // サブ予約分取得
        const subReservations = [];
        r.ticket.ticketOffer.eligibleSubReservation.forEach((e) => {
            for (let i = 0; i < e.amountOfThisGood; i++) {
                const subReservation = seats.find((s) => {
                    const findReservedSeat = availableSeats.find((a) => {
                        const findSubReservedSeat = a.subReservations.find((sub) => sub.seatNumber === s.seatNumber &&
                            sub.seatSection === s.seatSection);
                        if (findSubReservedSeat !== undefined) {
                            // サブ予約済み座席
                            return true;
                        }
                        return (a.seatNumber === s.seatNumber &&
                            a.seatSection === s.seatSection);
                    });
                    if (findReservedSeat !== undefined) {
                        // 予約済み座席
                        return false;
                    }
                    const findSubReservationSeat = subReservations.find((sub) => sub.seatNumber === s.seatNumber &&
                        sub.seatSection === s.seatSection);
                    if (findSubReservationSeat !== undefined) {
                        // サブ予約中座席
                        return false;
                    }
                    if (findReservationSeat.seatNumber === s.seatNumber &&
                        findReservationSeat.seatSection === s.seatSection) {
                        // 予約中座席
                        return false;
                    }
                    if (Array.isArray(s.seatingType) &&
                        s.seatingType.find((t) => t === e.typeOfGood.seatingType) === undefined) {
                        // 適用座席タイプ違い
                        return false;
                    }
                    if (!Array.isArray(s.seatingType) &&
                        s.seatingType !== e.typeOfGood.seatingType) {
                        // 適用座席タイプ違い
                        return false;
                    }
                    if (r.seat !== undefined) {
                        // 座席選択済みの場合予約中の座席以外を選択
                        return !(r.seat.seatNumber === s.seatNumber &&
                            r.seat.seatSection === s.seatSection);
                    }
                    return true;
                });
                if (subReservation === undefined) {
                    return;
                }
                subReservations.push(subReservation);
            }
        });
        availableSeats.push(Object.assign(Object.assign({}, findReservationSeat), { subReservations }));
    });
    return availableSeats;
}
/**
 * ムビチケオファー取得
 */
function getMovieTicketTypeOffers(params) {
    const screeningEventTicketOffers = params.screeningEventTicketOffers;
    const result = screeningEventTicketOffers.filter((o) => {
        const movieTicketTypeChargeSpecifications = o.priceSpecification.priceComponent.filter((p) => {
            return (p.typeOf ===
                _cinerino_sdk__WEBPACK_IMPORTED_MODULE_0__["factory"].chevre.priceSpecificationType
                    .MovieTicketTypeChargeSpecification);
        });
        return movieTicketTypeChargeSpecifications.length > 0;
    });
    return result;
}


/***/ }),

/***/ "./app/functions/translate.function.ts":
/*!*********************************************!*\
  !*** ./app/functions/translate.function.ts ***!
  \*********************************************/
/*! exports provided: CustomTranslateHttpLoader, getTranslateModuleConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomTranslateHttpLoader", function() { return CustomTranslateHttpLoader; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTranslateModuleConfig", function() { return getTranslateModuleConfig; });
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common/http */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/http.js");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ngx-translate/core */ "../../node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js");
/* harmony import */ var deepmerge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! deepmerge */ "../../node_modules/deepmerge/dist/cjs.js");
/* harmony import */ var deepmerge__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(deepmerge__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "../../node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "../../node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../environments/environment */ "./environments/environment.ts");
/* harmony import */ var _util_function__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./util.function */ "./app/functions/util.function.ts");








/**
     * 多言語カスタムローダー
     */
class CustomTranslateHttpLoader {
    constructor(http) {
        this.http = http;
    }
    getTranslation(lang) {
        const suffix = `.json?date=${moment__WEBPACK_IMPORTED_MODULE_3__().toISOString()}`;
        const resources = [
            `/default/i18n/common/${lang}${suffix}`,
            `/default/i18n/${Object(_environments_environment__WEBPACK_IMPORTED_MODULE_6__["getEnvironment"])().VIEW_TYPE}/${lang}${suffix}`,
            `${Object(_util_function__WEBPACK_IMPORTED_MODULE_7__["getProject"])().storageUrl}/i18n/${lang}${suffix}`,
        ];
        return Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["forkJoin"])(resources.map((url) => {
            return this.http.get(url).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["catchError"])((error) => {
                console.error(error);
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["of"])({});
            }));
        })).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])(response => {
            return response.reduce((a, b) => {
                return deepmerge__WEBPACK_IMPORTED_MODULE_2__(a, b);
            });
        }));
    }
}
/**
 * 多言語設定取得
 */
function getTranslateModuleConfig() {
    return {
        loader: {
            provide: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_1__["TranslateLoader"],
            useClass: CustomTranslateHttpLoader,
            deps: [_angular_common_http__WEBPACK_IMPORTED_MODULE_0__["HttpClient"]]
        }
    };
}


/***/ }),

/***/ "./app/functions/util.function.ts":
/*!****************************************!*\
  !*** ./app/functions/util.function.ts ***!
  \****************************************/
/*! exports provided: formatTelephone, toFull, toHalf, retry, sleep, iOSDatepickerTapBugFix, string2blob, getParameter, getProject, getExternalData, isFile, deepCopy */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatTelephone", function() { return formatTelephone; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toFull", function() { return toFull; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toHalf", function() { return toHalf; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "retry", function() { return retry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sleep", function() { return sleep; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "iOSDatepickerTapBugFix", function() { return iOSDatepickerTapBugFix; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "string2blob", function() { return string2blob; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getParameter", function() { return getParameter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getProject", function() { return getProject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getExternalData", function() { return getExternalData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isFile", function() { return isFile; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deepCopy", function() { return deepCopy; });
/* harmony import */ var libphonenumber_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libphonenumber-js */ "../../node_modules/libphonenumber-js/index.es6.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/**
     * 電話番号変換
     */
function formatTelephone(telephone, format) {
    if (telephone === undefined) {
        return '';
    }
    const parsedNumber = (new RegExp(/^\+/).test(telephone))
        ? libphonenumber_js__WEBPACK_IMPORTED_MODULE_0__["parse"](telephone)
        : libphonenumber_js__WEBPACK_IMPORTED_MODULE_0__["parse"](telephone, 'JP');
    format = (format === undefined) ? 'International' : format;
    return libphonenumber_js__WEBPACK_IMPORTED_MODULE_0__["format"](parsedNumber, format).replace(/\s/g, '');
}
/**
 * 全角変換
 */
function toFull(value) {
    return value.replace(/[A-Za-z0-9]/g, (s) => {
        return String.fromCharCode(s.charCodeAt(0) + 65248);
    });
}
/**
 * 半角変換
 */
function toHalf(value) {
    return value.replace(/[Ａ-Ｚａ-ｚ０-９]/g, function (s) {
        return String.fromCharCode(s.charCodeAt(0) - 65248);
    });
}
/**
 * リトライ
 * @param args
 */
function retry(args) {
    return __awaiter(this, void 0, void 0, function* () {
        let count = 0;
        return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {
            const timerProcess = () => {
                setTimeout(() => __awaiter(this, void 0, void 0, function* () {
                    count++;
                    try {
                        const result = yield args.process();
                        resolve(result);
                    }
                    catch (error) {
                        if (count >= args.limit) {
                            reject(error);
                            return;
                        }
                        timerProcess();
                    }
                }), args.interval);
            };
            try {
                const result = yield args.process();
                resolve(result);
            }
            catch (error) {
                timerProcess();
            }
        }));
    });
}
/**
 * ミリ秒待つ
 * デフォルト値500ms
 */
function sleep(time = 100) {
    return __awaiter(this, void 0, void 0, function* () {
        return new Promise((resolve) => {
            setTimeout(() => {
                resolve();
            }, time);
        });
    });
}
/**
 * iOS bugfix（2回タップしないと選択できない）
 */
function iOSDatepickerTapBugFix(container, datepickerDirectives) {
    const dayHoverHandler = container.dayHoverHandler;
    const hoverWrapper = (event) => {
        const { cell, isHovered } = event;
        if ((isHovered &&
            !!navigator.platform &&
            /iPad|iPhone|iPod/.test(navigator.platform)) &&
            'ontouchstart' in window) {
            datepickerDirectives.forEach(d => d._datepickerRef.instance.daySelectHandler(cell));
        }
        return dayHoverHandler(event);
    };
    container.dayHoverHandler = hoverWrapper;
}
/**
 * ストリーミングダウンロード
 */
// export async function streamingDownload<T>(stream: ReadableStream<T>) {
//     const reader = stream.getReader();
//     const decoder = new TextDecoder();
//     let streamText = '';
//     return new Promise<string>(async (resolve, reject) => {
//         try {
//             const readChunk = async (chunk: { done: boolean; value: any; }) => {
//                 if (chunk.done) {
//                     resolve(streamText);
//                     return;
//                 }
//                 streamText += decoder.decode(chunk.value);
//                 await readChunk(await reader.read());
//             };
//             await readChunk(await reader.read());
//         } catch (error) {
//             reject(error);
//         }
//     });
// }
/**
 * 文字列をBLOB変換
 */
function string2blob(value, options) {
    const bom = new Uint8Array([0xEF, 0xBB, 0xBF]);
    return new Blob([bom, value], options);
}
/**
 * パラメータ取得
 */
function getParameter() {
    const result = {};
    const params = location.search.replace('?', '').split('&');
    for (let i = 0; i < params.length; i++) {
        const param = params[i].split('=');
        const key = param[0];
        const value = param[1];
        if (key && value) {
            result[key] = value;
        }
    }
    if (result.performanceId !== undefined
        && result.eventId === undefined) {
        result.eventId = result.performanceId;
        result.performanceId = undefined;
    }
    return result;
}
/**
 * プロジェクト情報取得
 */
function getProject() {
    const project = sessionStorage.getItem('PROJECT');
    const defaultProject = { projectId: '', projectName: '', storageUrl: '' };
    if (project === null || project === '') {
        return defaultProject;
    }
    return Object.assign(Object.assign({}, defaultProject), JSON.parse(project));
}
/**
 * 外部データ取得
 */
function getExternalData() {
    const external = sessionStorage.getItem('EXTERNAL');
    if (external === null || external === '') {
        return {};
    }
    return JSON.parse(external);
}
/**
 * ファイル存在判定
 */
function isFile(url) {
    return __awaiter(this, void 0, void 0, function* () {
        const fetchResult = yield fetch(url, {
            method: 'GET',
            cache: 'no-cache',
            headers: {
                'Content-Type': 'charset=utf-8'
            },
        });
        return (fetchResult.ok);
    });
}
/**
 * オブジェクトディープコピー
 */
function deepCopy(obj) {
    return JSON.parse(JSON.stringify(obj));
}


/***/ }),

/***/ "./app/models/common/index.ts":
/*!************************************!*\
  !*** ./app/models/common/index.ts ***!
  \************************************/
/*! exports provided: Language, Printer, ViewType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _language__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./language */ "./app/models/common/language.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Language", function() { return _language__WEBPACK_IMPORTED_MODULE_0__["Language"]; });

/* harmony import */ var _printer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./printer */ "./app/models/common/printer.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Printer", function() { return _printer__WEBPACK_IMPORTED_MODULE_1__; });
/* harmony import */ var _viewType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./viewType */ "./app/models/common/viewType.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewType", function() { return _viewType__WEBPACK_IMPORTED_MODULE_2__["ViewType"]; });







/***/ }),

/***/ "./app/models/common/language.ts":
/*!***************************************!*\
  !*** ./app/models/common/language.ts ***!
  \***************************************/
/*! exports provided: Language */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Language", function() { return Language; });
/**
 * 言語
 */
var Language;
(function (Language) {
    Language["en"] = "English";
    Language["en-US"] = "English (American English)";
    Language["en-GB"] = "English (British English\u3001UK English)";
    Language["en-CA"] = "English (Canadian English)";
    Language["en-AU"] = "English (Australian English)";
    Language["fr"] = "French";
    Language["de"] = "German";
    Language["it"] = "Italian";
    Language["ja"] = "\u65E5\u672C\u8A9E";
    Language["ko"] = "Korean";
    Language["pt"] = "Portuguese";
    Language["ru"] = "Russian";
})(Language || (Language = {}));


/***/ }),

/***/ "./app/models/common/printer.ts":
/*!**************************************!*\
  !*** ./app/models/common/printer.ts ***!
  \**************************************/
/*! exports provided: ConnectionType, printers */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionType", function() { return ConnectionType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "printers", function() { return printers; });
/**
     * 接続の種類
     */
var ConnectionType;
(function (ConnectionType) {
    /**
     * なし
     */
    ConnectionType["None"] = "None";
    /**
     * 画像
     */
    ConnectionType["Image"] = "Image";
    /**
     * スター精密 LAN接続
     */
    ConnectionType["StarLAN"] = "StarLAN";
    /**
     * スター精密 Bluetooth接続
     */
    ConnectionType["StarBluetooth"] = "StarBluetooth";
})(ConnectionType || (ConnectionType = {}));
/**
 * プリンター一覧
 */
const printers = [
    {
        connectionType: ConnectionType.Image,
        name: 'setting.printType.image'
    },
    {
        connectionType: ConnectionType.StarLAN,
        name: 'setting.printType.starLAN'
    },
    {
        connectionType: ConnectionType.StarBluetooth,
        name: 'setting.printType.starBluetooth'
    }
];


/***/ }),

/***/ "./app/models/common/viewType.ts":
/*!***************************************!*\
  !*** ./app/models/common/viewType.ts ***!
  \***************************************/
/*! exports provided: ViewType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewType", function() { return ViewType; });
var ViewType;
(function (ViewType) {
    /**
     * 映画用
     */
    ViewType["Cinema"] = "cinema";
    /**
     * イベント用
     */
    ViewType["Event"] = "event";
})(ViewType || (ViewType = {}));


/***/ }),

/***/ "./app/models/index.ts":
/*!*****************************!*\
  !*** ./app/models/index.ts ***!
  \*****************************/
/*! exports provided: Purchase, Order, Common */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common */ "./app/models/common/index.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Common", function() { return _common__WEBPACK_IMPORTED_MODULE_0__; });
/* harmony import */ var _order__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./order */ "./app/models/order/index.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Order", function() { return _order__WEBPACK_IMPORTED_MODULE_1__; });
/* harmony import */ var _purchase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./purchase */ "./app/models/purchase/index.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Purchase", function() { return _purchase__WEBPACK_IMPORTED_MODULE_2__; });






/***/ }),

/***/ "./app/models/order/action.ts":
/*!************************************!*\
  !*** ./app/models/order/action.ts ***!
  \************************************/
/*! exports provided: OrderActions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OrderActions", function() { return OrderActions; });
var OrderActions;
(function (OrderActions) {
    /**
     * キャンセル
     */
    OrderActions["Cancel"] = "Cancel";
})(OrderActions || (OrderActions = {}));


/***/ }),

/***/ "./app/models/order/index.ts":
/*!***********************************!*\
  !*** ./app/models/order/index.ts ***!
  \***********************************/
/*! exports provided: Action, Print */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./action */ "./app/models/order/action.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Action", function() { return _action__WEBPACK_IMPORTED_MODULE_0__; });
/* harmony import */ var _print__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./print */ "./app/models/order/print.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Print", function() { return _print__WEBPACK_IMPORTED_MODULE_1__; });





/***/ }),

/***/ "./app/models/order/print.ts":
/*!***********************************!*\
  !*** ./app/models/order/print.ts ***!
  \***********************************/
/*! exports provided: PrintQrcodeType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrintQrcodeType", function() { return PrintQrcodeType; });
/**
 * QRコード文字列
 */
var PrintQrcodeType;
(function (PrintQrcodeType) {
    PrintQrcodeType["None"] = "None";
    PrintQrcodeType["Token"] = "token";
    PrintQrcodeType["Custom"] = "Custom";
})(PrintQrcodeType || (PrintQrcodeType = {}));


/***/ }),

/***/ "./app/models/purchase/index.ts":
/*!**************************************!*\
  !*** ./app/models/purchase/index.ts ***!
  \**************************************/
/*! exports provided: MovieTicket, Performance, Screen, Reservation, Payment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _movieTicket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./movieTicket */ "./app/models/purchase/movieTicket.ts");
/* harmony import */ var _movieTicket__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_movieTicket__WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "MovieTicket", function() { return _movieTicket__WEBPACK_IMPORTED_MODULE_0__; });
/* harmony import */ var _payment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./payment */ "./app/models/purchase/payment.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Payment", function() { return _payment__WEBPACK_IMPORTED_MODULE_1__; });
/* harmony import */ var _performance__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./performance */ "./app/models/purchase/performance.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Performance", function() { return _performance__WEBPACK_IMPORTED_MODULE_2__["Performance"]; });

/* harmony import */ var _reservation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./reservation */ "./app/models/purchase/reservation.ts");
/* harmony import */ var _reservation__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_reservation__WEBPACK_IMPORTED_MODULE_3__);
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Reservation", function() { return _reservation__WEBPACK_IMPORTED_MODULE_3__; });
/* harmony import */ var _screen__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./screen */ "./app/models/purchase/screen.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Screen", function() { return _screen__WEBPACK_IMPORTED_MODULE_4__; });








/***/ }),

/***/ "./app/models/purchase/movieTicket.ts":
/*!********************************************!*\
  !*** ./app/models/purchase/movieTicket.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./app/models/purchase/payment.ts":
/*!****************************************!*\
  !*** ./app/models/purchase/payment.ts ***!
  \****************************************/
/*! exports provided: PaymentMethodType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PaymentMethodType", function() { return PaymentMethodType; });
/**
 * 決済方法タイプ
 */
var PaymentMethodType;
(function (PaymentMethodType) {
    /**
     * 現金
     */
    PaymentMethodType["Cash"] = "Cash";
    /**
     * 電子マネー
     */
    PaymentMethodType["EMoney"] = "EMoney";
    /**
     * コード決済
     */
    PaymentMethodType["Code"] = "RegiGrow";
})(PaymentMethodType || (PaymentMethodType = {}));


/***/ }),

/***/ "./app/models/purchase/performance.ts":
/*!********************************************!*\
  !*** ./app/models/purchase/performance.ts ***!
  \********************************************/
/*! exports provided: Performance */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Performance", function() { return Performance; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "../../node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../environments/environment */ "./environments/environment.ts");


/**
 * Performance
 */
class Performance {
    constructor(params) {
        this.screeningEvent = params.screeningEvent;
        this.now = (params.now === undefined) ? moment__WEBPACK_IMPORTED_MODULE_0__().toDate() : params.now;
    }
    /**
     * 販売判定
     */
    isSales(status) {
        const screeningEvent = this.screeningEvent;
        const offers = screeningEvent.offers;
        if (offers === undefined) {
            return false;
        }
        let result = false;
        const criteria = moment__WEBPACK_IMPORTED_MODULE_0__(this.now).unix();
        const validFrom = moment__WEBPACK_IMPORTED_MODULE_0__(offers.validFrom).unix();
        const validThrough = moment__WEBPACK_IMPORTED_MODULE_0__(offers.validThrough).unix();
        switch (status) {
            case 'start':
                result = !(validFrom < criteria);
                break;
            case 'end':
                result = !(validThrough > criteria);
                break;
            default:
                result = (validFrom < criteria
                    && validThrough > criteria);
                break;
        }
        return result;
    }
    /**
     * 座席ステータス判定
     */
    isSeatStatus(status) {
        const screeningEvent = this.screeningEvent;
        const environment = Object(_environments_environment__WEBPACK_IMPORTED_MODULE_1__["getEnvironment"])();
        const limitSeatNumber = (screeningEvent.workPerformed === undefined
            || screeningEvent.workPerformed.additionalProperty === undefined)
            ? undefined : screeningEvent.workPerformed.additionalProperty.find(a => a.name === 'limitSeatNumber');
        let remainingAttendeeCapacity = screeningEvent.remainingAttendeeCapacity;
        let maximumAttendeeCapacity = screeningEvent.maximumAttendeeCapacity;
        if (remainingAttendeeCapacity === undefined || maximumAttendeeCapacity === undefined) {
            return status === undefined;
        }
        if (limitSeatNumber !== undefined && maximumAttendeeCapacity > Number(limitSeatNumber.value)) {
            // 作品追加特性（limitSeatNumber）で座席数制御
            remainingAttendeeCapacity = (remainingAttendeeCapacity < (maximumAttendeeCapacity - Number(limitSeatNumber.value)))
                ? 0 : remainingAttendeeCapacity - (maximumAttendeeCapacity - Number(limitSeatNumber.value));
            maximumAttendeeCapacity = Number(limitSeatNumber.value);
        }
        let result = false;
        const unit = environment.PURCHASE_SCHEDULE_STATUS_THRESHOLD_UNIT;
        const value = Number(environment.PURCHASE_SCHEDULE_STATUS_THRESHOLD_VALUE);
        if (unit === '%') {
            // 割合指定
            switch (status) {
                case 'success':
                    result = (remainingAttendeeCapacity !== 0
                        && Math.floor(remainingAttendeeCapacity / maximumAttendeeCapacity * 100) >= value);
                    break;
                case 'warning':
                    result = (remainingAttendeeCapacity !== 0
                        && Math.floor(remainingAttendeeCapacity / maximumAttendeeCapacity * 100) < value
                        && remainingAttendeeCapacity > 0);
                    break;
                case 'danger':
                    result = (remainingAttendeeCapacity === 0 || remainingAttendeeCapacity > maximumAttendeeCapacity);
                    break;
                default:
                    break;
            }
            return result;
        }
        else if (unit === 'count') {
            // 数指定
            switch (status) {
                case 'success':
                    result = (remainingAttendeeCapacity !== 0
                        && remainingAttendeeCapacity >= value);
                    break;
                case 'warning':
                    result = (remainingAttendeeCapacity !== 0
                        && remainingAttendeeCapacity < value
                        && remainingAttendeeCapacity > 0);
                    break;
                case 'danger':
                    result = remainingAttendeeCapacity === 0;
                    break;
                default:
                    break;
            }
            return result;
        }
        else {
            return false;
        }
    }
    /**
     * 座席あり判定
     */
    isTicketedSeat() {
        const screeningEvent = this.screeningEvent;
        return (screeningEvent.offers !== undefined
            && screeningEvent.offers.itemOffered.serviceOutput !== undefined
            && screeningEvent.offers.itemOffered.serviceOutput.reservedTicket !== undefined
            && screeningEvent.offers.itemOffered.serviceOutput.reservedTicket.ticketedSeat !== undefined);
    }
    /**
     * 在庫無限判定
     */
    isInfinitetock() {
        const screeningEvent = this.screeningEvent;
        return (screeningEvent.maximumAttendeeCapacity === undefined);
    }
}


/***/ }),

/***/ "./app/models/purchase/reservation.ts":
/*!********************************************!*\
  !*** ./app/models/purchase/reservation.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./app/models/purchase/screen.ts":
/*!***************************************!*\
  !*** ./app/models/purchase/screen.ts ***!
  \***************************************/
/*! exports provided: SeatStatus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SeatStatus", function() { return SeatStatus; });
var SeatStatus;
(function (SeatStatus) {
    SeatStatus["Disabled"] = "disabled";
    SeatStatus["Default"] = "default";
    SeatStatus["Active"] = "active";
})(SeatStatus || (SeatStatus = {}));


/***/ }),

/***/ "./environments/environment.ts":
/*!*************************************!*\
  !*** ./environments/environment.ts ***!
  \*************************************/
/*! exports provided: getEnvironment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEnvironment", function() { return getEnvironment; });
/* harmony import */ var _app_functions_util_function__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../app/functions/util.function */ "./app/functions/util.function.ts");

const defaultEnvironment = {
    production: false,
    APP_TITLE: 'SMART THEATER',
    ARROW_ROUTEING: ['purchase', 'inquiry'],
    PRIMARY_COLOR: 'steelblue',
    VIEW_TYPE: 'event',
    GTM_ID: '',
    ANALYTICS_ID: '',
    STORAGE_NAME: Object(_app_functions_util_function__WEBPACK_IMPORTED_MODULE_0__["getProject"])().projectId === ''
        ? 'FRONTEND-STATE'
        : `${Object(_app_functions_util_function__WEBPACK_IMPORTED_MODULE_0__["getProject"])().projectId.toUpperCase()}-FRONTEND-STATE`,
    STORAGE_TYPE: 'sessionStorage',
    BASE_URL: '/purchase/root',
    LANGUAGE: ['ja'],
    PROFILE: [
        {
            key: 'familyName',
            value: '',
            required: true,
            pattern: /^[ァ-ヶー]+$/,
            maxLength: 12,
        },
        {
            key: 'givenName',
            value: '',
            required: true,
            pattern: /^[ァ-ヶー]+$/,
            maxLength: 12,
        },
        { key: 'email', value: '', required: true, maxLength: 50 },
        {
            key: 'telephone',
            value: '',
            required: true,
            maxLength: 15,
            minLength: 9,
        },
    ],
    PORTAL_SITE_URL: '',
    DISPLAY_TICKETED_SEAT: true,
    HEADER_MENU: false,
    HEADER_MENU_SCOPE: [],
    FOOTER_COMPANY_URL: '',
    FOOTER_LAW_URL: '',
    FOOTER_PRIVACY_POLICY_URL: '',
    FOOTER_LINK: [],
    PURCHASE_ITEM_MAX_LENGTH: '50',
    PURCHASE_TRANSACTION_TIME: '15',
    PURCHASE_TRANSACTION_TIME_DISPLAY: true,
    PURCHASE_TRANSACTION_IDENTIFIER: [],
    PURCHASE_SCHEDULE_DISPLAY_LENGTH: '10',
    PURCHASE_SCHEDULE_SALES_DATE_VALUE: '0',
    PURCHASE_SCHEDULE_SALES_DATE_UNIT: 'hour',
    PURCHASE_SCHEDULE_SALES_STOP_TIME: '',
    PURCHASE_SCHEDULE_DEFAULT_SELECTED_DATE: '0',
    PURCHASE_SCHEDULE_STATUS_THRESHOLD_VALUE: '30',
    PURCHASE_SCHEDULE_STATUS_THRESHOLD_UNIT: '%',
    PURCHASE_SCHEDULE_SORT: 'screeningEventSeries',
    PURCHASE_VIEW_REMAINING_SEAT_THRESHOLD_VALUE: '0',
    PURCHASE_VIEW_REMAINING_SEAT_THRESHOLD_UNIT: 'seat',
    PURCHASE_COMPLETE_MAIL_CUSTOM: true,
    PURCHASE_TERMS: false,
    PURCHASE_WARNING: false,
    PURCHASE_DATE_CHANGE: false,
    ORDER_CANCEL_MAIL_CUSTOM: true,
    ORDER_AUTHORIZE_CODE_EXPIRES: '1814400',
    ORDER_MONEY_TRANSFER_DESCRIPTION: '受け取り',
    INQUIRY_CANCEL: false,
    INQUIRY_QRCODE: true,
    INQUIRY_PRINT: false,
    INQUIRY_PRINT_EXPIRED_VALUE: '0',
    INQUIRY_PRINT_EXPIRED_UNIT: 'hour',
    INQUIRY_PRINT_WAIT_TIME: '',
    INQUIRY_PRINT_SUCCESS_WAIT_TIME: '',
    INQUIRY_INPUT_KEYPAD: false,
    INQUIRY_ORDER_DATE_FROM_VALUE: '-3',
    INQUIRY_ORDER_DATE_FROM_UNIT: 'month',
    PRINT_QRCODE_TYPE: 'token',
    PRINT_QRCODE_CUSTOM: 'token',
    PRINT_LOADING: true,
};
function getEnvironment() {
    const environment = Object.assign(Object.assign(Object.assign(Object.assign({}, defaultEnvironment), { STORAGE_NAME: Object(_app_functions_util_function__WEBPACK_IMPORTED_MODULE_0__["getProject"])().projectId === ''
            ? 'FRONTEND-STATE'
            : `${Object(_app_functions_util_function__WEBPACK_IMPORTED_MODULE_0__["getProject"])().projectId.toUpperCase()}-FRONTEND-STATE` }), window.environment), { production: document.querySelector('body.production') !== null });
    return environment;
}


/***/ }),

/***/ "./main.ts":
/*!*****************!*\
  !*** ./main.ts ***!
  \*****************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser-dynamic */ "../../node_modules/@angular/platform-browser-dynamic/__ivy_ngcc__/fesm2015/platform-browser-dynamic.js");
/* harmony import */ var hammerjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hammerjs */ "../../node_modules/hammerjs/hammer.js");
/* harmony import */ var hammerjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hammerjs__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var moment_timezone__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment-timezone */ "../../node_modules/moment-timezone/index.js");
/* harmony import */ var moment_timezone__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var ngx_bootstrap_chronos__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngx-bootstrap/chronos */ "../../node_modules/ngx-bootstrap/__ivy_ngcc__/chronos/fesm2015/ngx-bootstrap-chronos.js");
/* harmony import */ var ngx_bootstrap_locale__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngx-bootstrap/locale */ "../../node_modules/ngx-bootstrap/__ivy_ngcc__/locale/fesm2015/ngx-bootstrap-locale.js");
/* harmony import */ var _app_functions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./app/functions */ "./app/functions/index.ts");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./environments/environment */ "./environments/environment.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/**
 * main
 */








function main() {
    return __awaiter(this, void 0, void 0, function* () {
        // タイムゾーン設定
        moment_timezone__WEBPACK_IMPORTED_MODULE_3__["tz"].setDefault('Asia/Tokyo');
        moment_timezone__WEBPACK_IMPORTED_MODULE_3__["locale"]('ja');
        // 言語設定
        Object(ngx_bootstrap_chronos__WEBPACK_IMPORTED_MODULE_4__["defineLocale"])('ja', ngx_bootstrap_locale__WEBPACK_IMPORTED_MODULE_5__["jaLocale"]);
        // パラメータ設定
        const params = _app_functions__WEBPACK_IMPORTED_MODULE_6__["Util"].getParameter();
        if (location.hash === ''
            || location.hash === '#/purchase/transaction') {
            sessionStorage.setItem('EXTERNAL', JSON.stringify(Object.assign(Object.assign({}, params), { project: undefined })));
        }
        // プロジェクト設定
        if (params.projectId !== undefined) {
            sessionStorage.removeItem('PROJECT');
        }
        const projectId = (params.projectId === undefined)
            ? (_app_functions__WEBPACK_IMPORTED_MODULE_6__["Util"].getProject().projectId === '') ? undefined : _app_functions__WEBPACK_IMPORTED_MODULE_6__["Util"].getProject().projectId
            : params.projectId;
        const projectName = (params.projectName === undefined)
            ? (_app_functions__WEBPACK_IMPORTED_MODULE_6__["Util"].getProject().projectName === '') ? undefined : _app_functions__WEBPACK_IMPORTED_MODULE_6__["Util"].getProject().projectName
            : params.projectName;
        const config = yield setProject({ projectId, projectName });
        if (_app_functions__WEBPACK_IMPORTED_MODULE_6__["Util"].getProject().storageUrl === undefined) {
            return;
        }
        yield setProjectConfig({
            storageUrl: _app_functions__WEBPACK_IMPORTED_MODULE_6__["Util"].getProject().storageUrl,
            gtmId: config.gtmId,
            analyticsId: config.analyticsId
        });
    });
}
/**
 * プロジェクト情報設定
 */
function setProject(params) {
    return __awaiter(this, void 0, void 0, function* () {
        const fetchResult = yield fetch('/api/project', {
            method: 'POST',
            cache: 'no-cache',
            headers: {
                'Content-Type': 'application/json; charset=utf-8'
            },
        });
        if (!fetchResult.ok) {
            throw new Error(JSON.stringify({ status: fetchResult.status, statusText: fetchResult.statusText }));
        }
        const result = yield fetchResult.json();
        const projectId = (result.projectId !== undefined)
            ? result.projectId
            : (params.projectId !== undefined) ? params.projectId : '';
        const projectName = (result.projectName !== undefined)
            ? result.projectName
            : (params.projectName !== undefined) ? params.projectName : '';
        const storageUrl = (result.projectId === undefined && result.projectName === undefined)
            ? (projectName !== '')
                ? `${result.storageUrl}/${projectId}-${projectName}`
                : `${result.storageUrl}/${projectId}`
            : result.storageUrl;
        sessionStorage.setItem('PROJECT', JSON.stringify({
            projectId,
            projectName,
            storageUrl,
            env: result.env,
            gtmId: result.gtmId,
            analyticsId: result.analyticsId,
            gmoTokenUrl: result.gmoTokenUrl,
            sonyTokenUrl: result.sonyTokenUrl,
        }));
        const script = document.createElement('script');
        script.src = result.gmoTokenUrl;
        document.body.appendChild(script);
        document.body.classList.add(result.env);
        return result;
    });
}
/**
 * プロジェクトごとのアプリケーション設定
 */
function setProjectConfig(params) {
    return __awaiter(this, void 0, void 0, function* () {
        const { storageUrl, gtmId, analyticsId } = params;
        const now = moment_timezone__WEBPACK_IMPORTED_MODULE_3__().toISOString();
        // 設定読み込み
        const fetchResult = yield fetch(`${storageUrl}/js/environment.js?=date${now}`, {
            method: 'GET',
            cache: 'no-cache',
            headers: { 'Content-Type': 'application/json; charset=utf-8' }
        });
        if (fetchResult.ok) {
            window.eval(yield fetchResult.text());
        }
        else {
            window.environment = {};
        }
        // GTM_ID, ANALYTICS_IDを設定
        const { GTM_ID, ANALYTICS_ID } = window.environment;
        window.environment.GTM_ID =
            ((GTM_ID === undefined || GTM_ID === '') && gtmId !== undefined) ? gtmId : GTM_ID;
        window.environment.ANALYTICS_ID =
            ((ANALYTICS_ID === undefined || ANALYTICS_ID === '') && analyticsId !== undefined) ? analyticsId : ANALYTICS_ID;
        const environment = Object(_environments_environment__WEBPACK_IMPORTED_MODULE_7__["getEnvironment"])();
        // タイトル設定
        document.title = environment.APP_TITLE;
        // 色設定
        yield applyColor({ primaryColor: environment.PRIMARY_COLOR });
        // CSS設定
        yield applyCSS({ storageUrl });
        // ファビコン設定
        yield applyFavicon({ storageUrl });
        // GTM設定
        applyGTM({ id: environment.GTM_ID });
        // モード設定
        if (environment.production) {
            Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["enableProdMode"])();
        }
    });
}
/**
 * 色設定
 */
function applyColor(params) {
    const { primaryColor } = params;
    const style = document.createElement('style');
    style.id = 'applyColor';
    style.innerHTML = `
.btn-primary,
.btn-outline-primary:hover,
header::after,
.wrapper .bg-primary { background-color: ${primaryColor} !important; }

.btn-primary,
.btn-outline-primary,
.wrapper .border-primary { border-color: ${primaryColor} !important; }

.btn-outline-primary,
.wrapper .text-primary { color: ${primaryColor} !important; }
    `;
    document.head.appendChild(style);
}
/**
 * CSS設定
 */
function applyCSS(params) {
    return __awaiter(this, void 0, void 0, function* () {
        const { storageUrl } = params;
        const now = moment_timezone__WEBPACK_IMPORTED_MODULE_3__().toISOString();
        const style = document.createElement('link');
        style.rel = 'stylesheet';
        style.href = (yield _app_functions__WEBPACK_IMPORTED_MODULE_6__["Util"].isFile(`${storageUrl}/css/style.css?=date${now}`))
            ? `${storageUrl}/css/style.css?=date${now}` : `/default/css/style.css?=date${now}`;
        document.head.appendChild(style);
    });
}
/**
 * ファビコン設定
 */
function applyFavicon(params) {
    return __awaiter(this, void 0, void 0, function* () {
        const { storageUrl } = params;
        const favicon = document.createElement('link');
        favicon.rel = 'icon';
        favicon.type = 'image/x-icon"';
        favicon.href = (yield _app_functions__WEBPACK_IMPORTED_MODULE_6__["Util"].isFile(`${storageUrl}/favicon.ico`)) ? `${storageUrl}/favicon.ico` : '/default/favicon.ico';
        document.head.appendChild(favicon);
    });
}
/**
 * GTM設定
 */
function applyGTM(params) {
    const { id } = params;
    if (id === undefined || id === '') {
        return;
    }
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        const f = d.getElementsByTagName(s)[0];
        const j = d.createElement(s), dl = l !== 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', id);
}
main().then(() => __awaiter(void 0, void 0, void 0, function* () {
    const { AppModule } = yield __webpack_require__.e(/*! import() | app-app-module */ "app-app-module").then(__webpack_require__.bind(null, /*! ./app/app.module */ "./app/app.module.ts"));
    Object(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__["platformBrowserDynamic"])().bootstrapModule(AppModule);
})).catch((error) => {
    console.error(error);
});


/***/ }),

/***/ 0:
/*!***********************!*\
  !*** multi ./main.ts ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! C:\Users\hataguchi\Desktop\workspace\smarttheater\transaction\src\client\main.ts */"./main.ts");


/***/ }),

/***/ 1:
/*!********************************!*\
  !*** ./util.inspect (ignored) ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 2:
/*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ })

},[[0,"runtime","vendor"]]]);
//# sourceMappingURL=main.js.map