{"version":3,"sources":["./app/modules/auth/auth-routing.module.ts","./app/modules/auth/auth.module.ts","./app/modules/auth/components/pages/auth-index/auth-index.component.ts","./app/modules/auth/components/pages/auth-index/auth-index.component.html","./app/modules/auth/components/pages/auth-signin/auth-signin.component.ts","./app/modules/auth/components/pages/auth-signin/auth-signin.component.html","./app/modules/auth/components/pages/auth-signout/auth-signout.component.ts","./app/modules/auth/components/pages/auth-signout/auth-signout.component.html"],"names":[],"mappings":"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","file":"modules-auth-auth-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AuthIndexComponent } from './components/pages/auth-index/auth-index.component';\nimport { AuthSigninComponent } from './components/pages/auth-signin/auth-signin.component';\nimport { AuthSignoutComponent } from './components/pages/auth-signout/auth-signout.component';\n\n\nconst routes: Routes = [\n  { path: '', component: AuthIndexComponent },\n  { path: 'signin', component: AuthSigninComponent },\n  { path: 'signout', component: AuthSignoutComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AuthRoutingModule { }\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { AuthRoutingModule } from './auth-routing.module';\nimport { AuthIndexComponent } from './components/pages/auth-index/auth-index.component';\nimport { AuthSigninComponent } from './components/pages/auth-signin/auth-signin.component';\nimport { AuthSignoutComponent } from './components/pages/auth-signout/auth-signout.component';\n\n\n\n@NgModule({\n  declarations: [\n    AuthIndexComponent,\n    AuthSigninComponent,\n    AuthSignoutComponent,\n  ],\n  imports: [\n    CommonModule,\n    AuthRoutingModule,\n    SharedModule,\n  ]\n})\nexport class AuthModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { Functions } from '../../../../..';\nimport { CinerinoService } from '../../../../../services';\n\n@Component({\n    selector: 'app-auth-index',\n    templateUrl: './auth-index.component.html',\n    styleUrls: ['./auth-index.component.scss']\n})\nexport class AuthIndexComponent implements OnInit {\n\n    constructor(\n        private cinerino: CinerinoService\n    ) { }\n\n    /**\n     * 初期化\n     */\n    public async ngOnInit() {\n        const params = Functions.Util.getExternalData();\n        sessionStorage.setItem('EXTERNAL', JSON.stringify({ ...params, redirectUrl: undefined }));\n        const redirectUrl = (params.redirectUrl === undefined) ? undefined : atob(params.redirectUrl);\n        await this.cinerino.signIn({ redirectUrl });\n    }\n}\n","<app-loading [isLoading]=\"true\" process=\"process.authAction.CheckLogin\"></app-loading>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { select, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-auth-signin',\n    templateUrl: './auth-signin.component.html',\n    styleUrls: ['./auth-signin.component.scss']\n})\nexport class AuthSigninComponent implements OnInit {\n    public process: Observable<string>;\n    public environment = getEnvironment();\n\n    constructor(\n        private router: Router,\n        private actionService: ActionService,\n        private store: Store<reducers.IState>\n    ) { }\n\n    /**\n     * 初期化\n     */\n    public async ngOnInit() {\n        this.process = this.store.pipe(select(reducers.getProcess));\n        this.actionService.user.delete();\n        this.actionService.user.initialize({ login: true });\n\n        try {\n            // await this.actionService.user.getProfile();\n            // await this.actionService.user.getCreditCards();\n            const redirectUrl = (sessionStorage.getItem('REDIRECT_URL') === null)\n                ? this.environment.BASE_URL : sessionStorage.getItem('REDIRECT_URL');\n            sessionStorage.removeItem('REDIRECT_URL');\n            if (redirectUrl === null) {\n                throw new Error('redirectUrl === null');\n            }\n            location.href = redirectUrl;\n        } catch (error) {\n            this.router.navigate(['/error']);\n        }\n    }\n\n}\n","<app-loading [isLoading]=\"true\" [process]=\"process | async\"></app-loading>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ActionService } from '../../../../../services';\n\n@Component({\n    selector: 'app-auth-signout',\n    templateUrl: './auth-signout.component.html',\n    styleUrls: ['./auth-signout.component.scss']\n})\nexport class AuthSignoutComponent implements OnInit {\n\n    constructor(\n        private router: Router,\n        private actionService: ActionService\n    ) { }\n\n    /**\n     * 初期化\n     */\n    public ngOnInit() {\n        this.actionService.order.delete();\n        this.actionService.purchase.delete();\n        this.actionService.user.delete();\n        const logoutUrl = (sessionStorage.getItem('LOGOUT_URL') === null)\n            ? '/' : sessionStorage.getItem('LOGOUT_URL');\n        sessionStorage.removeItem('LOGOUT_URL');\n        this.router.navigate([logoutUrl]);\n    }\n\n}\n","<app-loading [isLoading]=\"true\" process=\"process.authAction.Logout\"></app-loading>"],"sourceRoot":"webpack:///"}