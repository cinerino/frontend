{"version":3,"sources":["./app/modules/purchase/components/pages/cinema/purchase-cinema-overlap/purchase-cinema-overlap.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-overlap/purchase-cinema-overlap.component.html","./app/modules/purchase/components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component.html","./app/modules/purchase/components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component.html","./app/modules/purchase/components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component.html","./app/modules/purchase/components/pages/event/purchase-event-date/purchase-event-date.component.ts","./app/modules/purchase/components/pages/event/purchase-event-date/purchase-event-date.component.html","./app/modules/purchase/components/pages/event/purchase-event-schedule/purchase-event-schedule.component.ts","./app/modules/purchase/components/pages/event/purchase-event-schedule/purchase-event-schedule.component.html","./app/modules/purchase/components/pages/event/purchase-event-seat-ticket/purchase-event-seat-ticket.component.ts","./app/modules/purchase/components/pages/event/purchase-event-seat-ticket/purchase-event-seat-ticket.component.html","./app/modules/purchase/components/pages/event/purchase-event-seat/purchase-event-seat.component.ts","./app/modules/purchase/components/pages/event/purchase-event-seat/purchase-event-seat.component.html","./app/modules/purchase/components/pages/purchase-base/purchase-base.component.ts","./app/modules/purchase/components/pages/purchase-base/purchase-base.component.html","./app/modules/purchase/components/pages/purchase-complete/purchase-complete.component.ts","./app/modules/purchase/components/pages/purchase-complete/purchase-complete.component.html","./app/modules/purchase/components/pages/purchase-confirm/purchase-confirm.component.ts","./app/modules/purchase/components/pages/purchase-confirm/purchase-confirm.component.html","./app/modules/purchase/components/pages/purchase-input/purchase-input.component.ts","./app/modules/purchase/components/pages/purchase-input/purchase-input.component.html","./app/modules/purchase/components/pages/purchase-root/purchase-root.component.ts","./app/modules/purchase/components/pages/purchase-seat/purchase-seat.component.ts","./app/modules/purchase/components/pages/purchase-ticket/purchase-ticket.component.ts","./app/modules/purchase/components/pages/purchase-transaction/purchase-transaction.component.ts","./app/modules/purchase/components/parts/event/performances-confirm/performances-confirm.component.ts","./app/modules/purchase/components/parts/event/performances-confirm/performances-confirm.component.html","./app/modules/purchase/components/parts/movie-tickets/movie-tickets.component.ts","./app/modules/purchase/components/parts/movie-tickets/movie-tickets.component.html","./app/modules/purchase/components/parts/performance/performance.component.ts","./app/modules/purchase/components/parts/performance/performance.component.html","./app/modules/purchase/components/parts/performances/performances.component.ts","./app/modules/purchase/components/parts/performances/performances.component.html","./app/modules/purchase/components/parts/purchase-info/purchase-info.component.ts","./app/modules/purchase/components/parts/purchase-info/purchase-info.component.html","./app/modules/purchase/components/parts/purchase-terms/purchase-terms.component.ts","./app/modules/purchase/components/parts/purchase-terms/purchase-terms.component.html","./app/modules/purchase/components/parts/purchase-warning/purchase-warning.component.ts","./app/modules/purchase/components/parts/purchase-warning/purchase-warning.component.html","./app/modules/purchase/components/parts/screen/screen.component.ts","./app/modules/purchase/components/parts/screen/screen.component.html","./app/modules/purchase/components/parts/seat-info/seat-info.component.ts","./app/modules/purchase/components/parts/seat-info/seat-info.component.html","./app/modules/purchase/components/parts/transaction-remaining-time/transaction-remaining-time.component.ts","./app/modules/purchase/components/parts/transaction-remaining-time/transaction-remaining-time.component.html","./app/modules/purchase/purchase-routing.module.ts","./app/modules/purchase/purchase.module.ts"],"names":[],"mappings":"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","file":"modules-purchase-purchase-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk/lib/abstract';\nimport { select, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../../..';\nimport { ActionService, CinerinoService, } from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-cinema-overlap',\n    templateUrl: './purchase-cinema-overlap.component.html',\n    styleUrls: ['./purchase-cinema-overlap.component.scss']\n})\nexport class PurchaseCinemaOverlapComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public tmpPurchaseData: {\n        screeningEvent: factory.chevre.event.screeningEvent.IEvent;\n        reservations: Models.Purchase.Reservation.IReservation[];\n    };\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService,\n        private cinerino: CinerinoService\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        try {\n            const external = Functions.Util.getExternalData();\n            if (external.eventId === undefined) {\n                throw new Error('eventId is undefined');\n            }\n            await this.cinerino.getServices();\n            const screeningEvent =\n                await this.cinerino.event.findById<factory.chevre.eventType.ScreeningEvent>({ id: external.eventId });\n            this.tmpPurchaseData = {\n                screeningEvent: screeningEvent,\n                reservations: []\n            };\n        } catch (error) {\n            this.router.navigate(['/error']);\n        }\n    }\n\n    public async onSubmit() {\n        this.actionService.purchase.delete();\n        await this.actionService.purchase.cancelTransaction();\n        const external = Functions.Util.getExternalData();\n        if (external.eventId !== undefined) {\n            this.router.navigate([`/purchase/transaction`]);\n            return;\n        }\n    }\n\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.cinema.overlap.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.cinema.overlap.read' | translate\"></p>\n    <div *ngIf=\"tmpPurchaseData\">\n        <p class=\"mb-3\">{{ 'purchase.cinema.overlap.nextRead' | translate }}</p>\n        <app-purchase-info class=\"mb-4\" [purchase]=\"tmpPurchaseData\"></app-purchase-info>\n\n        <div class=\"buttons mx-auto text-center\">\n            <button type=\"button\" class=\"btn btn-primary btn-block py-3 mb-3\" [disabled]=\"isLoading | async\"\n                (click)=\"onSubmit()\">{{ 'purchase.cinema.overlap.next' | translate }}</button>\n        </div>\n    </div>\n    <div>\n        <p class=\"mb-3\">{{ 'purchase.cinema.overlap.prevRead' | translate }}</p>\n        <app-purchase-info class=\"mb-4\" [purchase]=\"purchase | async\"></app-purchase-info>\n\n        <div class=\"buttons mx-auto text-center\">\n            <button type=\"button\" routerLink=\"/purchase/cinema/seat\"\n                class=\"btn btn-primary btn-block py-3 mb-3\">{{ 'purchase.cinema.overlap.prev' | translate }}</button>\n        </div>\n    </div>\n\n</div>","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BAD_REQUEST, TOO_MANY_REQUESTS } from 'http-status';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService, UtilService } from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-cinema-schedule',\n    templateUrl: './purchase-cinema-schedule.component.html',\n    styleUrls: ['./purchase-cinema-schedule.component.scss']\n})\nexport class PurchaseCinemaScheduleComponent implements OnInit, OnDestroy {\n    public isLoading: Observable<boolean>;\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public error: Observable<string | null>;\n    public firstScheduleDate: string;\n    public scheduleDates: string[];\n    public preScheduleDates: string[];\n    public isPreSchedule: boolean;\n    public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup[];\n    public moment: typeof moment = moment;\n    public environment = getEnvironment();\n    public external = Functions.Util.getExternalData();\n    private updateTimer: any;\n    public theaters: factory.chevre.place.movieTheater.IPlaceWithoutScreeningRoom[];\n    public swiperInstance: any;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private utilService: UtilService,\n        private actionService: ActionService,\n        private masterService: MasterService,\n        private translate: TranslateService\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        const swiperConfig: any = {\n            spaceBetween: 2,\n            slidesPerView: 7,\n            freeMode: true,\n            breakpoints: {\n                320: { slidesPerView: 3 },\n                767: { slidesPerView: 4 },\n                1024: { slidesPerView: 7 }\n            },\n            navigation: {\n                nextEl: '.schedule-slider .swiper-button-next',\n                prevEl: '.schedule-slider .swiper-button-prev',\n            },\n        };\n        this.swiperInstance = new (<any>window).Swiper('.swiper-container', swiperConfig);\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.error = this.store.pipe(select(reducers.getError));\n        this.isPreSchedule = false;\n        this.scheduleDates = [];\n        this.preScheduleDates = [];\n        this.screeningEventsGroup = [];\n        this.theaters = [];\n        try {\n            this.theaters = await this.masterService.searchMovieTheaters();\n            if (this.theaters.length === 0) {\n                throw new Error('theater notfound');\n            }\n            const purchase = await this.actionService.purchase.getData();\n            const external = Functions.Util.getExternalData();\n            let theater = (purchase.theater === undefined) ? this.theaters[0] : purchase.theater;\n            const findResult = this.theaters.find((t) => {\n                return (external.theaterBranchCode !== undefined && t.branchCode === external.theaterBranchCode);\n            });\n            if (findResult !== undefined) {\n                theater = findResult;\n            }\n            this.selectTheater(theater);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public ngOnDestroy() {\n        clearTimeout(this.updateTimer);\n    }\n\n    /**\n     * \n     */\n    public changeScheduleType() {\n        if (this.isPreSchedule) {\n            this.scheduleDates = [];\n            for (let i = 0; i < Number(this.environment.PURCHASE_SCHEDULE_DISPLAY_LENGTH); i++) {\n                this.scheduleDates.push(moment().add(i, 'day').format('YYYYMMDD'));\n            }\n        } else {\n            this.scheduleDates = this.preScheduleDates;\n        }\n        this.selectDate();\n        this.isPreSchedule = !this.isPreSchedule;\n        this.swiperInstance.update();\n\n    }\n\n    /**\n     * \n     */\n    private update() {\n        if (this.updateTimer !== undefined) {\n            clearTimeout(this.updateTimer);\n        }\n        const time = 600000; // 10 * 60 * 1000\n        this.updateTimer = setTimeout(async () => {\n            const purchase = await this.actionService.purchase.getData();\n            if (purchase.theater === undefined) {\n                this.router.navigate(['/error']);\n                return;\n            }\n            this.selectTheater(purchase.theater);\n        }, time);\n    }\n\n    /**\n     * \n     */\n    public resize() {\n        this.swiperInstance.update();\n    }\n\n    /**\n     * \n     */\n    public async selectTheater(theater: factory.chevre.place.movieTheater.IPlaceWithoutScreeningRoom) {\n        try {\n            this.actionService.purchase.selectTheater(theater);\n            this.scheduleDates = [];\n            for (let i = 0; i < Number(this.environment.PURCHASE_SCHEDULE_DISPLAY_LENGTH); i++) {\n                this.scheduleDates.push(moment().add(i, 'day').format('YYYYMMDD'));\n            }\n            this.preScheduleDates = [];\n            this.isPreSchedule = false;\n            this.firstScheduleDate = await this.getFirstScheduleDate();\n            this.preScheduleDates = await this.actionService.purchase.getPreScheduleDates();\n            this.selectDate();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async selectDate(scheduleDate?: string) {\n        const { theater } = await this.actionService.purchase.getData();\n        const external = Functions.Util.getExternalData();\n        if (theater === undefined || this.scheduleDates.length === 0) {\n            this.router.navigate(['/error']);\n            return;\n        }\n        let first = false;\n        if (scheduleDate === undefined) {\n            first = true;\n            scheduleDate = (this.isPreSchedule)\n                ? this.scheduleDates[0]\n                : this.firstScheduleDate;\n            if (external.scheduleDate !== undefined) {\n                scheduleDate = external.scheduleDate;\n            }\n        }\n        this.actionService.purchase.selectScheduleDate(scheduleDate);\n        try {\n            const creativeWorks = await this.masterService.searchMovies({\n                offers: { availableFrom: moment(scheduleDate).toDate() }\n            });\n            const screeningEventSeries = (this.environment.PURCHASE_SCHEDULE_SORT === 'screeningEventSeries')\n                ? await this.masterService.searchScreeningEventSeries({\n                    location: {\n                        branchCode: { $eq: theater.branchCode }\n                    },\n                    workPerformed: { identifiers: creativeWorks.map(c => c.identifier) }\n                })\n                : [];\n            const screeningRooms = (this.environment.PURCHASE_SCHEDULE_SORT === 'screen')\n                ? await this.masterService.searchScreeningRooms({\n                    branchCode: { $eq: theater.branchCode }\n                })\n                : [];\n            const screeningEvents = await this.masterService.searchScreeningEvent({\n                superEvent: {\n                    ids: (external.superEventId === undefined) ? [] : [external.superEventId],\n                    locationBranchCodes: [theater.branchCode],\n                    workPerformedIdentifiers: (external.workPerformedId === undefined)\n                        ? [] : [external.workPerformedId],\n                },\n                startFrom: moment(scheduleDate).toDate(),\n                startThrough: moment(scheduleDate).add(1, 'day').add(-1, 'millisecond').toDate(),\n                creativeWorks,\n                screeningEventSeries,\n                screeningRooms\n            });\n            this.screeningEventsGroup = Functions.Purchase.screeningEvents2ScreeningEventSeries({ screeningEvents });\n            this.update();\n            if (first) {\n                const activeIndex = this.scheduleDates.findIndex(s => s === this.firstScheduleDate);\n                this.swiperInstance.update();\n                this.swiperInstance.slideTo(activeIndex);\n            }\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async selectSchedule(screeningEvent: factory.chevre.event.screeningEvent.IEvent) {\n        if (screeningEvent.remainingAttendeeCapacity === undefined\n            || screeningEvent.remainingAttendeeCapacity === 0) {\n            return;\n        }\n        if (screeningEvent.offers === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput.reservedTicket === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput.reservedTicket.ticketedSeat === undefined) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('purchase.cinema.schedule.alert.ticketedSeat')\n            });\n            return;\n        }\n        this.actionService.purchase.unsettledDelete();\n        try {\n            await this.actionService.purchase.getScreeningEvent(screeningEvent);\n            if (screeningEvent.offers.seller === undefined\n                || screeningEvent.offers.seller.id === undefined) {\n                throw new Error('screeningEvent.offers.seller or screeningEvent.offers.seller.id undefined');\n            }\n            await this.actionService.purchase.getSeller(screeningEvent.offers.seller.id);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n        const purchase = await this.actionService.purchase.getData();\n        if (purchase.seller === undefined) {\n            this.router.navigate(['/error']);\n            return;\n        }\n        try {\n            if (purchase.transaction !== undefined) {\n                await this.actionService.purchase.cancelTransaction();\n            }\n            await this.actionService.purchase.startTransaction();\n            this.router.navigate(['/purchase/cinema/seat']);\n        } catch (error) {\n            console.error(error);\n            try {\n                const errorObject = JSON.parse(error);\n                if (errorObject.status === TOO_MANY_REQUESTS) {\n                    this.router.navigate(['/congestion']);\n                    return;\n                }\n                if (errorObject.status === BAD_REQUEST) {\n                    this.router.navigate(['/maintenance']);\n                    return;\n                }\n                this.router.navigate(['/error']);\n            } catch (error2) {\n                console.error(error2);\n                this.router.navigate(['/error']);\n            }\n        }\n    }\n\n    /**\n     * \n     */\n    public async getFirstScheduleDate() {\n        try {\n            const { theater } = await this.actionService.purchase.getData();\n            if (theater === undefined || this.scheduleDates.length === 0) {\n                throw new Error('theater === undefined || this.scheduleDates.length === 0');\n            }\n            const today = moment(moment().format('YYYYMMDD'), 'YYYYMMDD').toDate();\n            const screeningEvents = await this.masterService.searchScreeningEvent({\n                superEvent: {\n                    locationBranchCodes: [theater.branchCode],\n                },\n                startFrom: moment(today).toDate(),\n                startThrough: moment(today)\n                    .add(Number(this.environment.PURCHASE_SCHEDULE_DISPLAY_LENGTH), 'day')\n                    .add(-1, 'millisecond')\n                    .toDate(),\n                pageing: false\n            });\n            return (screeningEvents.length > 0)\n                ? moment(screeningEvents[0].startDate).format('YYYYMMDD')\n                : moment().format('YYYYMMDD');\n        } catch (error) {\n            throw error;\n        }\n    }\n\n}\n","<div *ngIf=\"!(external.theaterBranchCode)\" class=\"contents-width mx-auto px-3 pt-5\">\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.cinema.theater.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.cinema.theater.read' | translate\"></p>\n</div>\n\n<ul *ngIf=\"!(external.theaterBranchCode)\" class=\"contents-width mx-auto theaters d-flex flex-wrap p-2\">\n    <li *ngFor=\"let theater of theaters\" class=\"px-2 my-2\">\n        <button type=\"button\" class=\"btn btn-block py-3 m-0\" (click)=\"selectTheater(theater)\"\n            [class.btn-primary]=\"(purchase | async)?.theater?.id === theater.id\"\n            [class.btn-outline-primary]=\"(purchase | async)?.theater?.id !== theater.id\">{{ theater.name | changeLanguage }}</button>\n    </li>\n</ul>\n\n<div class=\"contents-width mx-auto px-3 pt-5\">\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.cinema.schedule.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.cinema.schedule.read' | translate\"></p>\n    <p class=\"text-primary mb-3 font-weight-bold\" *ngIf=\"(purchase | async)?.theater\">{{ (purchase | async)?.theater.name | changeLanguage }}</p>\n    <div *ngIf=\"preScheduleDates.length > 0\" class=\"buttons mx-auto mb-3\">\n        <button *ngIf=\"!isPreSchedule\" type=\"button\" class=\"btn btn-primary btn-block py-3\"\n            [disabled]=\"isLoading | async\"\n            (click)=\"changeScheduleType()\">{{ 'purchase.cinema.schedule.preSalesSchedule' | translate }}</button>\n        <button *ngIf=\"isPreSchedule\" type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n            [disabled]=\"isLoading | async\"\n            (click)=\"changeScheduleType()\">{{ 'purchase.cinema.schedule.salesSchedule' | translate }}</button>\n    </div>\n</div>\n<div [class.d-none]=\"scheduleDates.length === 0\" class=\"bg-light-gray\">\n    <div class=\"contents-width mx-auto px-3\">\n        <div class=\"position-relative schedule-slider px-md-4\">\n            <div class=\"swiper-container date\" (resize)=\"resize()\">\n                <div class=\"swiper-wrapper\">\n                    <div *ngFor=\"let scheduleDate of scheduleDates\" class=\"swiper-slide pointer\">\n                        <div class=\"text-center text-white py-4\" [ngClass]=\"{\n                            'bg-primary': scheduleDate === (purchase | async)?.scheduleDate,\n                            'bg-white text-primary': scheduleDate !== (purchase | async)?.scheduleDate\n                        }\" (click)=\"selectDate(scheduleDate)\">\n                            <div>\n                                <p class=\"font-weight-bold\"><span class=\"text-small\">{{ moment(scheduleDate).format('MM/') }}</span>{{ moment(scheduleDate).format('DD(ddd)') }}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"swiper-button-next bg-dark-gray d-none d-md-block\"></div>\n            <div class=\"swiper-button-prev bg-dark-gray d-none d-md-block\"></div>\n        </div>\n    </div>\n</div>\n<div class=\"contents-width mx-auto p-3\">\n    <p *ngIf=\"(purchase | async)?.scheduleDate\" class=\"text-primary mb-3 font-weight-bold\">\n        {{ (purchase | async)?.scheduleDate | formatDate: 'YYYY/MM/DD (ddd)' }}\n    </p>\n    <p *ngIf=\"screeningEventsGroup.length === 0\" class=\"mb-3\"\n        [innerHTML]=\"'purchase.cinema.schedule.notfound' | translate\"></p>\n    <app-purchase-performances *ngFor=\"let screeningWorkEvent of screeningEventsGroup\"\n        [screeningEventsGroup]=\"screeningWorkEvent\" (select)=\"selectSchedule($event)\" class=\"mb-3\">\n    </app-purchase-performances>\n</div>\n\n<div class=\"contents-width mx-auto px-3 pb-5\">\n    <div class=\"buttons mx-auto text-center\">\n        <a *ngIf=\"environment.PORTAL_SITE_URL\" class=\"btn btn-outline-primary btn-block py-3 portal-link\"\n            [href]=\"environment.PORTAL_SITE_URL\">{{ 'purchase.cinema.schedule.prev' | translate }}</a>\n    </div>\n</div>","import { Component } from '@angular/core';\nimport { PurchaseSeatComponent } from '../../purchase-seat/purchase-seat.component';\n\n@Component({\n    selector: 'app-purchase-cinema-seat',\n    templateUrl: './purchase-cinema-seat.component.html',\n    styleUrls: ['./purchase-cinema-seat.component.scss']\n})\nexport class PurchaseCinemaSeatComponent extends PurchaseSeatComponent {}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n    <div *ngIf=\"!((purchase | async)?.screen?.openSeatingAllowed)\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.cinema.seat.title' | translate }}</h2>\n        <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.cinema.seat.read' | translate\"></p>\n        <div class=\"container px-0\">\n            <div class=\"row\">\n                <div class=\"col-lg-8\">\n                    <app-screen *ngIf=\"(purchase | async)?.theater \n                && screeningEventSeats.length > 0 \n                && (purchase | async)?.screen\" class=\"mb-3\" [theaterCode]=\"(purchase | async)?.theater.branchCode\"\n                        [screenCode]=\"(purchase | async)?.screen.branchCode\" [screeningEventSeats]=\"screeningEventSeats\"\n                        [openSeatingAllowed]=\"(purchase | async)?.screen?.openSeatingAllowed\"\n                        [reservations]=\"(purchase | async)?.reservations\"\n                        [authorizeSeatReservation]=\"(purchase | async)?.authorizeSeatReservation\"\n                        (select)=\"selectSeat($event)\">\n                    </app-screen>\n                    <app-seat-info class=\"mb-4\"></app-seat-info>\n                </div>\n                <div class=\"col-lg-4\">\n                    <app-purchase-info class=\"mb-4\" [purchase]=\"purchase | async\"></app-purchase-info>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">\n            {{ 'purchase.cinema.seat.openSeating.title' | translate }}</h2>\n        <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.cinema.seat.openSeating.read' | translate\"></p>\n\n        <div class=\"container px-0\">\n            <div class=\"row\">\n                <div class=\"col-lg-8\">\n                    <div class=\"mb-4\">\n                        <ul class=\"bg-white\">\n                            <li>\n                                <div class=\"container p-3\">\n                                    <div class=\"row align-items-center\">\n                                        <div class=\"col-md-3 col-12\">\n                                            <p class=\"mb-2 mb-md-0 font-weight-bold text-large\">\n                                                {{ 'purchase.cinema.seat.openSeating.seat' | translate }}\n                                            </p>\n                                        </div>\n                                        <div class=\"col-md-9 col-12\">\n                                            <select class=\"form-control\" [(ngModel)]=\"reservationCount\">\n                                                <option [value]=\"0\">0</option>\n                                                <option *ngFor=\"let value of remainingAttendeeCapacityValue({\n                            screeningEventSeats: screeningEventSeats,\n                            screeningEvent: (purchase | async)?.screeningEvent,\n                            authorizeSeatReservations: (purchase | async)?.authorizeSeatReservations\n                        })\" [value]=\"value\">{{ value }}</option>\n                                            </select>\n                                        </div>\n                                    </div>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n\n                <div class=\"col-lg-4\">\n                    <app-purchase-info class=\"mb-4\" [purchase]=\"purchase | async\"></app-purchase-info>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <div *ngIf=\"environment.PURCHASE_TERMS\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.cinema.seat.terms' | translate }}</h2>\n        <div class=\"mb-4\">\n            <app-purchase-terms [language]=\"(user | async)?.language\"\n                [screeningEvent]=\"(purchase | async)?.screeningEvent\"></app-purchase-terms>\n        </div>\n    </div>\n    <div class=\"buttons mx-auto text-center\">\n        <button *ngIf=\"!((purchase | async)?.screen?.openSeatingAllowed)\" type=\"submit\"\n            class=\"btn btn-primary btn-block py-3 mb-3\" [disabled]=\"(isLoading | async) \n            || (purchase | async)?.reservations.length === 0\" (click)=\"onSubmit()\">\n            <ng-container *ngIf=\"!environment.PURCHASE_TERMS\">{{ 'purchase.cinema.seat.next' | translate }}\n            </ng-container>\n            <ng-container *ngIf=\"environment.PURCHASE_TERMS\">{{ 'purchase.cinema.seat.consent' | translate }}\n            </ng-container>\n        </button>\n        <button *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\" type=\"submit\"\n            class=\"btn btn-primary btn-block py-3 mb-3\" [disabled]=\"(isLoading | async) \n            || Number(reservationCount) === 0\" (click)=\"onSubmit()\">\n            <ng-container *ngIf=\"!environment.PURCHASE_TERMS\">{{ 'purchase.cinema.seat.next' | translate }}\n            </ng-container>\n            <ng-container *ngIf=\"environment.PURCHASE_TERMS\">{{ 'purchase.cinema.seat.consent' | translate }}\n            </ng-container>\n        </button>\n        <button *ngIf=\"!external.eventId\" type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n            routerLink=\"/purchase/cinema/schedule\">{{ 'purchase.cinema.seat.prev' | translate }}</button>\n        <a *ngIf=\"external.eventId\" class=\"btn btn-outline-primary btn-block py-3\"\n            [href]=\"(purchase | async)?.seller.url\">{{ 'purchase.cinema.seat.prev' | translate }}</a>\n    </div>\n\n</div>","import { Component } from '@angular/core';\nimport { PurchaseTicketComponent } from '../../purchase-ticket/purchase-ticket.component';\n\n@Component({\n    selector: 'app-purchase-cinema-ticket',\n    templateUrl: './purchase-cinema-ticket.component.html',\n    styleUrls: ['./purchase-cinema-ticket.component.scss']\n})\nexport class PurchaseCinemaTicketComponent extends PurchaseTicketComponent {\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.cinema.ticket.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.cinema.ticket.read' | translate\"></p>\n    <div class=\"container px-0\">\n        <div class=\"row\">\n            <div class=\"col-lg-8\">\n                <app-movie-tickets *ngIf=\"(purchase | async)?.screeningEventTicketOffers\"\n                    [screeningEventTicketOffers]=\"(purchase | async)?.screeningEventTicketOffers\"\n                    (select)=\"openMovieTicket($event)\"></app-movie-tickets>\n\n                <div class=\"mb-4\">\n                    <ul class=\"bg-white\">\n                        <li *ngFor=\"let reservation of (purchase | async)?.reservations\">\n                            <div class=\"container p-3\">\n                                <div class=\"row align-items-center\">\n                                    <div class=\"col-md-3 col-12\">\n                                        <p class=\"mb-2 mb-md-0 font-weight-bold text-large\">\n                                            {{ reservation.seat.seatNumber }}\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-9 col-12\">\n                                        <button *ngIf=\"reservation.ticket === undefined\" type=\"button\"\n                                            (click)=\"openTicketList(reservation)\"\n                                            class=\"btn btn-primary btn-block py-3\">{{ 'purchase.cinema.ticket.unselected' | translate }}</button>\n                                        <button *ngIf=\"reservation.ticket !== undefined\" type=\"button\"\n                                            (click)=\"openTicketList(reservation)\"\n                                            class=\"btn btn-block border border-primary text-primary bg-white py-3\">\n                                            <div class=\"d-flex justify-content-between align-items-center\"\n                                                *ngFor=\"let priceComponent of reservation.ticket?.ticketOffer.priceSpecification.priceComponent\">\n                                                <p class=\"w-50 text-left\">{{ priceComponent.name | changeLanguage }}</p>\n                                                <p *ngIf=\"priceComponent.price > 0\" class=\"w-50 text-right\">\n                                                    <span>{{ priceComponent.price | currency : priceComponent.priceCurrency }}</span>\n                                                    <!--\n                                                    --><span\n                                                        *ngIf=\"priceComponent?.referenceQuantity?.value\">{{ 'common.referenceQuantityValue' | translate: { value: priceComponent?.referenceQuantity?.value } }}</span>\n                                                </p>\n                                            </div>\n                                            <div class=\"d-flex justify-content-between align-items-center\"\n                                                *ngFor=\"let addOn of reservation.ticket?.addOn;\">\n                                                <p class=\"w-50 text-left\">\n                                                    {{ addOn.priceSpecification.name | changeLanguage }}\n                                                </p>\n                                                <p *ngIf=\"addOn.priceSpecification.price > 0\" class=\"w-50 text-right\">\n                                                    <span>{{ addOn.priceSpecification.price | currency : addOn.priceSpecification.priceCurrency }}</span>\n                                                    <!--\n                                                    --><span\n                                                        *ngIf=\"addOn.priceSpecification?.referenceQuantity?.value\">{{ 'common.referenceQuantityValue' | translate: { value: addOn.priceSpecification?.referenceQuantity?.value } }}</span>\n                                                </p>\n                                            </div>\n                                            <div>\n                                                <p *ngIf=\"reservation.ticket.movieTicket\" class=\"text-small text-left\">\n                                                    {{ 'modal.purchase.seatTicket.movieTicket.code' | translate }}\n                                                    {{ reservation.ticket.movieTicket.identifier }}\n                                                </p>\n                                            </div>\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n\n                <div class=\"mb-4 additional-ticket-text d-none\">\n                    <p>{{ 'common.additionalTicketText' | translate }}</p>\n                    <textarea [(ngModel)]=\"additionalTicketText\" class=\"py-1 px-2\"></textarea>\n                </div>\n            </div>\n            <div class=\"col-lg-4\">\n                <app-purchase-info class=\"mb-4\" [purchase]=\"purchase | async\"></app-purchase-info>\n            </div>\n        </div>\n    </div>\n    <div class=\"buttons mx-auto text-center\">\n        <button type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\" [disabled]=\"(isLoading | async) || !isSelectedTicket\"\n            (click)=\"onSubmit()\">{{ 'purchase.cinema.ticket.next' | translate }}</button>\n        <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n            routerLink=\"/purchase/cinema/seat\">{{ 'purchase.cinema.ticket.prev' | translate }}</button>\n    </div>","import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { BAD_REQUEST, TOO_MANY_REQUESTS } from 'http-status';\nimport * as moment from 'moment';\nimport { BsDatepickerContainerComponent, BsDatepickerDirective, BsLocaleService } from 'ngx-bootstrap/datepicker';\nimport { Observable } from 'rxjs';\nimport { Functions } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService, UtilService } from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-event-date',\n    templateUrl: './purchase-event-date.component.html',\n    styleUrls: ['./purchase-event-date.component.scss']\n})\nexport class PurchaseEventDateComponent implements OnInit, OnDestroy {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public error: Observable<string | null>;\n    public isLoading: Observable<boolean>;\n    public screeningEvents: factory.chevre.event.screeningEvent.IEvent[];\n    public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup[];\n    public moment: typeof moment = moment;\n    public scheduleDate: Date;\n    public environment = getEnvironment();\n    public bsValue: Date;\n    public isSales: boolean;\n    public external = Functions.Util.getExternalData();\n    private updateTimer: any;\n    public theaters: factory.chevre.place.movieTheater.IPlaceWithoutScreeningRoom[];\n    @ViewChild('datepicker', { static: true }) private datepicker: BsDatepickerDirective;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService,\n        private masterService: MasterService,\n        private localeService: BsLocaleService,\n        private utilService: UtilService,\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.bsValue = moment().toDate();\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.error = this.store.pipe(select(reducers.getError));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.screeningEventsGroup = [];\n        this.isSales = true;\n        try {\n            const { transaction } = await this.actionService.purchase.getData();\n            if (transaction !== undefined) {\n                await this.actionService.purchase.cancelTransaction();\n            }\n            this.scheduleDate = moment(moment().format('YYYYMMDD'))\n                .add(this.environment.PURCHASE_SCHEDULE_DEFAULT_SELECTED_DATE, 'day')\n                .toDate();\n            const external = Functions.Util.getExternalData();\n            if (external.scheduleDate !== undefined) {\n                this.scheduleDate = moment(external.scheduleDate).toDate();\n            }\n            this.theaters = await this.masterService.searchMovieTheaters();\n            if (this.theaters.length === 0) {\n                throw new Error('theater notfound');\n            }\n            const theater = await this.getDefaultTheater();\n            this.selectTheater(theater);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public ngOnDestroy() {\n        clearTimeout(this.updateTimer);\n    }\n\n    /**\n     * \n     */\n    private update() {\n        if (this.updateTimer !== undefined) {\n            clearTimeout(this.updateTimer);\n        }\n        const time = 600000; // 10 * 60 * 1000\n        this.updateTimer = setTimeout(async () => {\n            const purchase = await this.actionService.purchase.getData();\n            if (purchase.theater === undefined) {\n                this.router.navigate(['/error']);\n                return;\n            }\n            this.selectTheater(purchase.theater);\n        }, time);\n    }\n\n    /**\n     * \n     */\n    private async getDefaultTheater() {\n        const purchase = await this.actionService.purchase.getData();\n        let theater = (purchase.theater === undefined) ? this.theaters[0] : purchase.theater;\n        const findResult = this.theaters.find((t) => {\n            const external = Functions.Util.getExternalData();\n            return (external.theaterBranchCode !== undefined && t.branchCode === external.theaterBranchCode);\n        });\n        if (findResult !== undefined) {\n            theater = findResult;\n        }\n        return theater;\n    }\n\n    /**\n     * \n     */\n    public async selectTheater(theater: factory.chevre.place.movieTheater.IPlaceWithoutScreeningRoom) {\n        this.actionService.purchase.selectTheater(theater);\n        await this.selectDate(this.scheduleDate);\n    }\n\n    /**\n     * \n     */\n    public async selectDate(date?: Date | null) {\n        if (date === undefined || date === null) {\n            return;\n        }\n        this.scheduleDate = date;\n        const now = (await this.utilService.getServerTime()).date;\n        const selectDate = moment(moment(this.scheduleDate).format('YYYYMMDD')).toDate();\n        const salesStopDate = moment(moment().format('YYYYMMDD'))\n            .add(this.environment.PURCHASE_SCHEDULE_SALES_DATE_VALUE,\n                this.environment.PURCHASE_SCHEDULE_SALES_DATE_UNIT)\n            .toDate();\n        this.isSales = (selectDate >= salesStopDate);\n        if (this.isSales\n            && this.environment.PURCHASE_SCHEDULE_SALES_STOP_TIME !== ''\n            && moment(salesStopDate).unix() === moment(selectDate).unix()) {\n            const salesStopTime = moment(this.environment.PURCHASE_SCHEDULE_SALES_STOP_TIME, 'HHmmss').format('HHmmss');\n            this.isSales = (moment(now).format('HHmmss') < salesStopTime);\n        }\n        try {\n            const purchase = await this.actionService.purchase.getData();\n            const theater = purchase.theater;\n            if (theater === undefined) {\n                return;\n            }\n            const scheduleDate = moment(this.scheduleDate).format('YYYY-MM-DD');\n            this.actionService.purchase.selectScheduleDate(scheduleDate);\n            const external = Functions.Util.getExternalData();\n            const creativeWorks = await this.masterService.searchMovies({\n                offers: { availableFrom: moment(scheduleDate).toDate() }\n            });\n            const screeningEventSeries = (this.environment.PURCHASE_SCHEDULE_SORT === 'screeningEventSeries')\n                ? await this.masterService.searchScreeningEventSeries({\n                    location: {\n                        branchCode: { $eq: theater.branchCode }\n                    },\n                    workPerformed: { identifiers: creativeWorks.map(c => c.identifier) }\n                })\n                : [];\n            const screeningRooms = (this.environment.PURCHASE_SCHEDULE_SORT === 'screen')\n                ? await this.masterService.searchScreeningRooms({\n                    branchCode: { $eq: theater.branchCode }\n                })\n                : [];\n            this.screeningEvents = await this.masterService.searchScreeningEvent({\n                superEvent: {\n                    ids: (external.superEventId === undefined)\n                        ? [] : [external.superEventId],\n                    locationBranchCodes: [theater.branchCode],\n                    workPerformedIdentifiers: (external.workPerformedId === undefined)\n                        ? [] : [external.workPerformedId],\n                },\n                startFrom: moment(scheduleDate).toDate(),\n                startThrough: moment(scheduleDate).add(1, 'day').add(-1, 'millisecond').toDate(),\n                creativeWorks,\n                screeningEventSeries,\n                screeningRooms\n            });\n            this.screeningEventsGroup =\n                Functions.Purchase.screeningEvents2ScreeningEventSeries({ screeningEvents: this.screeningEvents });\n            this.update();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        try {\n            const screeningEvent = this.screeningEvents\n                .find(s => s.offers !== undefined && s.offers.seller !== undefined && s.offers.seller.id !== undefined);\n            if (screeningEvent === undefined\n                || screeningEvent.offers === undefined\n                || screeningEvent.offers.seller === undefined\n                || screeningEvent.offers.seller.id === undefined) {\n                throw new Error('screeningEvent.offers.seller === undefined');\n            }\n            await this.actionService.purchase.getSeller(screeningEvent.offers.seller.id);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n        try {\n            const purchase = await this.actionService.purchase.getData();\n            const transaction = purchase.transaction;\n            if (transaction !== undefined) {\n                await this.actionService.purchase.cancelTransaction();\n            }\n            await this.actionService.purchase.startTransaction();\n            this.router.navigate(['/purchase/event/schedule']);\n        } catch (error) {\n            console.error(error);\n            try {\n                const errorObject = JSON.parse(error);\n                if (errorObject.status === TOO_MANY_REQUESTS) {\n                    this.router.navigate(['/congestion']);\n                    return;\n                }\n                if (errorObject.status === BAD_REQUEST) {\n                    this.router.navigate(['/maintenance']);\n                    return;\n                }\n                this.router.navigate(['/error']);\n            } catch (error2) {\n                console.error(error2);\n                this.router.navigate(['/error']);\n            }\n        }\n    }\n\n    /**\n     * Datepicker\n     */\n    public setDatePicker() {\n        this.user.subscribe((user) => {\n            this.localeService.use(user.language);\n        }).unsubscribe();\n    }\n\n    /**\n     * Datepicker\n     */\n    public toggleDatepicker() {\n        this.setDatePicker();\n        this.datepicker.toggle();\n    }\n\n    /**\n     * iOS bugfix2\n     */\n    public onShowPicker(container: BsDatepickerContainerComponent) {\n        Functions.Util.iOSDatepickerTapBugFix(container, [this.datepicker]);\n    }\n\n}\n","<div *ngIf=\"!(external.theaterBranchCode)\" class=\"contents-width mx-auto px-3 pt-5\">\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.event.theater.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.event.theater.read' | translate\"></p>\n</div>\n\n<ul *ngIf=\"!(external.theaterBranchCode)\" class=\"contents-width mx-auto theaters d-flex flex-wrap p-2\">\n    <li *ngFor=\"let theater of theaters\" class=\"px-2 my-2\">\n        <button type=\"button\" class=\"btn btn-block py-3 m-0\" (click)=\"selectTheater(theater)\"\n            [class.btn-primary]=\"(purchase | async)?.theater?.id === theater.id\"\n            [class.btn-outline-primary]=\"(purchase | async)?.theater?.id !== theater.id\">{{ theater.name | changeLanguage }}</button>\n    </li>\n</ul>\n\n<div class=\"contents-width mx-auto px-3 pt-5\">\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.event.date.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.event.date.read' | translate\"></p>\n</div>\n<div class=\"contents-width mx-auto p-3\">\n    <p class=\"text-primary mb-3 font-weight-bold\" *ngIf=\"(purchase | async)?.theater\">{{ (purchase | async)?.theater.name | changeLanguage }}</p>\n    <div class=\"mb-3 position-relative\">\n        <div class=\"input-group\">\n            <input type=\"text\" placeholder=\"Datepicker\" class=\"form-control\" #datepicker=\"bsDatepicker\" bsDatepicker\n                [(ngModel)]=\"scheduleDate\"\n                [bsConfig]=\"{ dateInputFormat: 'YYYY/MM/DD', adaptivePosition: true, showWeekNumbers: false, minDate: moment().toDate() }\"\n                (bsValueChange)=\"selectDate($event)\" readonly (click)=\"setDatePicker()\"\n                (onShown)=\"onShowPicker($event)\">\n            <div class=\"input-group-append pointer\" (click)=\"toggleDatepicker()\">\n                <span class=\"input-group-text\"><i class=\"fas fa-caret-down\"></i></span>\n            </div>\n        </div>\n    </div>\n    <div class=\"mb-4\">\n        <p *ngIf=\"(purchase | async)?.scheduleDate\" class=\"text-primary mb-3 font-weight-bold\">\n            {{ 'purchase.event.date.selectedDate' | translate: {value: (purchase | async)?.scheduleDate | formatDate: 'YYYY/MM/DD (ddd)'} }}\n        </p>\n        <p *ngIf=\"screeningEventsGroup.length === 0\" class=\"mb-3\"\n            [innerHTML]=\"'purchase.event.date.notfound' | translate\"></p>\n        <app-purchase-event-performances-confirm *ngFor=\"let group of screeningEventsGroup\"\n            [screeningEventsGroup]=\"group\" [readonly]=\"true\" class=\"mb-3\">\n        </app-purchase-event-performances-confirm>\n    </div>\n\n    <div *ngIf=\"environment.PURCHASE_TERMS\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.event.date.terms' | translate }}</h2>\n        <div class=\"mb-4\">\n            <app-purchase-terms [language]=\"(user | async)?.language\"\n                [screeningEvent]=\"(purchase | async)?.screeningEvent\">\n            </app-purchase-terms>\n        </div>\n    </div>\n\n    <div class=\"buttons mx-auto text-center\">\n        <button *ngIf=\"isSales && !environment.PURCHASE_TERMS\" type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\"\n            [disabled]=\"screeningEventsGroup.length === 0 || (isLoading | async)\"\n            (click)=\"onSubmit()\">{{ 'purchase.event.date.next' | translate }}</button>\n        <button *ngIf=\"isSales && environment.PURCHASE_TERMS\" type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\"\n            [disabled]=\"screeningEventsGroup.length === 0 || (isLoading | async)\"\n            (click)=\"onSubmit()\">{{ 'purchase.event.date.consent' | translate }}</button>\n        <button *ngIf=\"!isSales\" type=\"button\" class=\"btn btn-primary btn-block py-3 mb-3\" disabled\n            (click)=\"onSubmit()\">{{ 'purchase.event.date.disabled' | translate }}</button>\n        <a *ngIf=\"environment.PORTAL_SITE_URL\" class=\"btn btn-outline-primary btn-block py-3 portal-link\"\n            [href]=\"environment.PORTAL_SITE_URL\">{{ 'purchase.event.date.prev' | translate }}</a>\n    </div>\n</div>","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService, UtilService } from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\nimport {\n    PurchaseEventTicketModalComponent\n} from '../../../../../shared/components/parts/purchase/event/ticket-modal/ticket-modal.component';\n\n@Component({\n    selector: 'app-purchase-event-schedule',\n    templateUrl: './purchase-event-schedule.component.html',\n    styleUrls: ['./purchase-event-schedule.component.scss']\n})\nexport class PurchaseEventScheduleComponent implements OnInit, OnDestroy {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public error: Observable<string | null>;\n    public isLoading: Observable<boolean>;\n    public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup[];\n    public moment: typeof moment = moment;\n    public environment = getEnvironment();\n    private updateTimer: any;\n    public screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private utilService: UtilService,\n        private masterService: MasterService,\n        private translate: TranslateService,\n        private actionService: ActionService,\n        private modal: BsModalService\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.error = this.store.pipe(select(reducers.getError));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.screeningEventsGroup = [];\n        this.actionService.purchase.unsettledDelete();\n        try {\n            await this.getSchedule();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public ngOnDestroy() {\n        clearTimeout(this.updateTimer);\n    }\n\n    /**\n     * \n     */\n    private update() {\n        if (this.updateTimer !== undefined) {\n            clearTimeout(this.updateTimer);\n        }\n        const time = 600000; // 10 * 60 * 1000\n        this.updateTimer = setTimeout(async () => {\n            try {\n                await this.getSchedule();\n            } catch (error) {\n                console.error(error);\n                this.router.navigate(['/error']);\n            }\n        }, time);\n    }\n\n    /**\n     * \n     */\n    public async getSchedule() {\n        const purchase = await this.actionService.purchase.getData();\n        const theater = purchase.theater;\n        const scheduleDate = purchase.scheduleDate;\n        const transaction = purchase.transaction;\n        const external = Functions.Util.getExternalData();\n        if (theater === undefined\n            || scheduleDate === undefined\n            || transaction === undefined) {\n            throw new Error('theater or scheduleDate or transaction undefined');\n        }\n        const creativeWorks = await this.masterService.searchMovies({\n            offers: { availableFrom: moment(scheduleDate).toDate() }\n        });\n        const screeningEventSeries = (this.environment.PURCHASE_SCHEDULE_SORT === 'screeningEventSeries')\n            ? await this.masterService.searchScreeningEventSeries({\n                location: {\n                    branchCode: { $eq: theater.branchCode }\n                },\n                workPerformed: { identifiers: creativeWorks.map(c => c.identifier) }\n            })\n            : [];\n        const screeningRooms = (this.environment.PURCHASE_SCHEDULE_SORT === 'screen')\n            ? await this.masterService.searchScreeningRooms({\n                branchCode: { $eq: theater.branchCode }\n            })\n            : [];\n        const screeningEvents = await this.masterService.searchScreeningEvent({\n            superEvent: {\n                ids: (external.superEventId === undefined) ? [] : [external.superEventId],\n                locationBranchCodes: [theater.branchCode],\n                workPerformedIdentifiers: (external.workPerformedId === undefined)\n                    ? [] : [external.workPerformedId],\n            },\n            startFrom: moment(scheduleDate).toDate(),\n            startThrough: moment(scheduleDate).add(1, 'day').add(-1, 'millisecond').toDate(),\n            creativeWorks,\n            screeningEventSeries,\n            screeningRooms\n        });\n        this.screeningEventsGroup = Functions.Purchase.screeningEvents2ScreeningEventSeries({ screeningEvents });\n        this.update();\n    }\n\n    /**\n     * \n     * @param screeningEvent\n     */\n    public async selectSchedule(screeningEvent: factory.event.screeningEvent.IEvent) {\n        const purchase = await this.actionService.purchase.getData();\n        if (purchase.authorizeSeatReservations.length > 0\n            && Number(this.environment.PURCHASE_ITEM_MAX_LENGTH) === 1) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('purchase.event.schedule.alert.cart')\n            });\n            return;\n        }\n        try {\n            await this.actionService.purchase.getScreeningEvent(screeningEvent);\n            this.screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n            await this.actionService.purchase.getTicketList();\n            await this.actionService.purchase.getScreen({\n                branchCode: { $eq: screeningEvent.location.branchCode },\n                containedInPlace: {\n                    branchCode: { $eq: screeningEvent.superEvent.location.branchCode }\n                }\n            });\n            this.openTicketList();\n        } catch (error) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: ''\n            });\n        }\n    }\n\n    /**\n     * \n     */\n    private async openTicketList() {\n        const purchase = await this.actionService.purchase.getData();\n        const screeningEvent = purchase.screeningEvent;\n        const screeningEventTicketOffers = purchase.screeningEventTicketOffers;\n        const screeningEventSeats = this.screeningEventSeats;\n        const screen = purchase.screen;\n        if (screeningEvent === undefined || screen === undefined) {\n            return;\n        }\n        const performance = new Models.Purchase.Performance(screeningEvent);\n        if (!performance.isInfinitetock()\n            && !screen.openSeatingAllowed\n            && performance.isTicketedSeat()) {\n            // \n            this.router.navigate(['/purchase/event/seat']);\n            return;\n        }\n        this.modal.show(PurchaseEventTicketModalComponent, {\n            class: 'modal-dialog-centered modal-lg',\n            backdrop: 'static',\n            initialState: {\n                screeningEventTicketOffers,\n                screeningEventSeats,\n                screeningEvent,\n                cb: (params: {\n                    reservations: Models.Purchase.Reservation.IReservation[];\n                    additionalTicketText?: string;\n                }) => {\n                    this.selectTicket(params);\n                }\n            }\n        });\n    }\n\n    /**\n     * \n     */\n    private async selectTicket(params: {\n        reservations: Models.Purchase.Reservation.IReservation[];\n        additionalTicketText?: string;\n    }) {\n        const reservations = params.reservations;\n        const additionalTicketText = params.additionalTicketText;\n        try {\n            const purchase = await this.actionService.purchase.getData();\n            const limit = (purchase.screeningEvent === undefined\n                || purchase.screeningEvent.offers === undefined\n                || purchase.screeningEvent.offers.eligibleQuantity.maxValue === undefined)\n                ? Number(this.environment.PURCHASE_ITEM_MAX_LENGTH)\n                : purchase.screeningEvent.offers.eligibleQuantity.maxValue;\n            if (reservations.length > limit) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant(\n                        'purchase.event.schedule.alert.limit',\n                        { value: limit }\n                    )\n                });\n                return;\n            }\n            this.screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n            if (purchase.screeningEvent !== undefined\n                && new Models.Purchase.Performance(purchase.screeningEvent).isTicketedSeat()) {\n                const remainingSeatLength = Functions.Purchase.getRemainingSeatLength({\n                    screeningEventSeats: this.screeningEventSeats,\n                    screeningEvent: purchase.screeningEvent\n                });\n                if (remainingSeatLength < reservations.length) {\n                    this.utilService.openAlert({\n                        title: this.translate.instant('common.error'),\n                        body: this.translate.instant('purchase.event.schedule.alert.getScreeningEventSeats')\n                    });\n                    return;\n                }\n            }\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: ''\n            });\n        }\n        try {\n            await this.actionService.purchase.temporaryReservation({\n                reservations,\n                additionalTicketText,\n                screeningEventSeats: this.screeningEventSeats\n            });\n            this.utilService.openAlert({\n                title: this.translate.instant('common.complete'),\n                body: this.translate.instant('purchase.event.schedule.success.temporaryReservation')\n            });\n            this.actionService.purchase.unsettledDelete();\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('purchase.event.schedule.alert.temporaryReservation')\n            });\n        }\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        const { authorizeSeatReservations } = await this.actionService.purchase.getData();\n        // \n        if (this.isSinglePurchase({ name: 'alert', authorizeSeatReservations })) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('purchase.event.schedule.alert.single')\n            });\n            return;\n        }\n        if (this.isSinglePurchase({ name: 'confirm', authorizeSeatReservations })) {\n            this.utilService.openConfirm({\n                title: this.translate.instant('common.confirm'),\n                body: this.translate.instant('purchase.event.schedule.confirm.single'),\n                cb: () => { this.router.navigate(['/purchase/input']); }\n            });\n            return;\n        }\n        // \n        let itemCount = 0;\n        authorizeSeatReservations.forEach(a => itemCount += a.object.acceptedOffer.length);\n        if (itemCount > Number(this.environment.PURCHASE_ITEM_MAX_LENGTH)) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(\n                    'purchase.event.schedule.alert.limit',\n                    { value: Number(this.environment.PURCHASE_ITEM_MAX_LENGTH) }\n                )\n            });\n            return;\n        }\n        this.router.navigate(['/purchase/input']);\n    }\n\n    /**\n     *  or \n     */\n    private isSinglePurchase(params: {\n        name: 'alert' | 'confirm',\n        authorizeSeatReservations: factory.action.authorize.offer.seatReservation.IAction<factory.service.webAPI.Identifier.Chevre>[]\n    }) {\n        const authorizeSeatReservations = params.authorizeSeatReservations;\n        const findResult = authorizeSeatReservations.find((a) => {\n            if (a.result === undefined\n                || a.result.responseBody.object.reservations === undefined\n                || a.result.responseBody.object.reservations[0].additionalProperty === undefined) {\n                return false;\n            }\n            const findPropertyResult = a.result.responseBody.object.reservations[0].additionalProperty\n                .find(p => p.name === params.name && p.value !== undefined);\n            if (findPropertyResult === undefined) {\n                return false;\n            }\n            const findWorkPerformedResult = authorizeSeatReservations.find((a2) => {\n                return (a2.object.event !== undefined\n                    && a2.object.event.workPerformed !== undefined\n                    && a2.object.event.workPerformed.identifier === findPropertyResult.value);\n            });\n            return (findWorkPerformedResult === undefined);\n        });\n\n        return findResult;\n    }\n\n    /**\n     * \n     */\n    public removeItem(\n        authorizeSeatReservation: factory.action.authorize.offer.seatReservation.IAction<factory.service.webAPI.Identifier.Chevre>) {\n        this.utilService.openConfirm({\n            title: this.translate.instant('common.confirm'),\n            body: this.translate.instant('purchase.event.cart.confirm.cancel'),\n            cb: async () => {\n                const authorizeSeatReservations = [authorizeSeatReservation];\n                await this.actionService.purchase.cancelTemporaryReservations(authorizeSeatReservations);\n            }\n        });\n    }\n\n}\n\n","<div class=\"contents-width mx-auto px-3 py-5\">\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.event.schedule.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.event.schedule.read' | translate\"></p>\n\n    <div *ngIf=\"(purchase | async)?.scheduleDate\" class=\"d-flex align-items-center bg-white py-2 px-3 mb-3\">\n        <div>{{ (purchase | async)?.scheduleDate | formatDate: 'YYYY/MM/DD (ddd)' }}</div>\n        <button type=\"button\" class=\"btn btn-link btn-sm ml-auto\"\n            routerLink=\"/purchase/event/date\">{{ 'common.change' | translate }}</button>\n    </div>\n\n    <div class=\"mb-4\">\n        <p *ngIf=\"screeningEventsGroup.length === 0\" class=\"mb-3\">\n            {{ 'purchase.event.schedule.notfound' | translate }}\n        </p>\n        <app-purchase-performances *ngFor=\"let group of screeningEventsGroup\"\n            [screeningEventsGroup]=\"group\" (select)=\"selectSchedule($event)\" class=\"mb-3\">\n        </app-purchase-performances>\n    </div>\n\n    <div class=\"mb-4\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.event.cart.title' | translate }}</h2>\n        <div *ngIf=\"(purchase | async)?.authorizeSeatReservations.length === 0\">\n            <p class=\"text-md-center\">{{ 'purchase.event.cart.notfound' | translate }}</p>\n        </div>\n        <div *ngFor=\"let authorizeSeatReservation of (purchase | async)?.authorizeSeatReservations\"\n            class=\"mb-4 position-relative\">\n            <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"removeItem(authorizeSeatReservation)\">\n                <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <app-item-event [screeningEvent]=\"authorizeSeatReservation.object.event\"></app-item-event>\n            <div class=\"bg-white p-3\">\n                <app-item-list [authorizeSeatReservations]=\"authorizeSeatReservation?.result?.responseBody.object.reservations\"></app-item-list>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"buttons mx-auto text-center\">\n        <button type=\"submit\" [disabled]=\"(isLoading | async) || (purchase | async)?.authorizeSeatReservations.length === 0\" class=\"btn btn-primary btn-block py-3 mb-3\"\n            (click)=\"onSubmit()\">{{ 'purchase.event.cart.next' | translate }}</button>\n        <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n            routerLink=\"/purchase/event/date\">{{ 'purchase.event.schedule.prev' | translate }}</button>\n    </div>\n</div>","import { Component } from '@angular/core';\nimport { PurchaseTicketComponent } from '../../purchase-ticket/purchase-ticket.component';\n\n@Component({\n    selector: 'app-purchase-event-seat-ticket',\n    templateUrl: './purchase-event-seat-ticket.component.html',\n    styleUrls: ['./purchase-event-seat-ticket.component.scss']\n})\nexport class PurchaseEventSeatTicketComponent extends PurchaseTicketComponent {\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.event.seatTicket.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.event.seatTicket.read' | translate\"></p>\n\n    <div class=\"container px-0\">\n        <div class=\"row\">\n            <div class=\"col-lg-8\">\n                <app-movie-tickets *ngIf=\"(purchase | async)?.screeningEventTicketOffers\"\n                    [screeningEventTicketOffers]=\"(purchase | async)?.screeningEventTicketOffers\"\n                    (select)=\"openMovieTicket($event)\"></app-movie-tickets>\n\n                <div class=\"mb-4\">\n                    <ul class=\"bg-white\">\n                        <li *ngFor=\"let reservation of (purchase | async)?.reservations\">\n                            <div class=\"container p-3\">\n                                <div class=\"row align-items-center\">\n                                    <div class=\"col-md-3 col-12\">\n                                        <p class=\"mb-2 mb-md-0 font-weight-bold text-large\">\n                                            {{ reservation.seat.seatNumber }}\n                                        </p>\n                                    </div>\n                                    <div class=\"col-md-9 col-12\">\n                                        <button *ngIf=\"reservation.ticket === undefined\" type=\"button\"\n                                            (click)=\"openTicketList(reservation)\"\n                                            class=\"btn btn-primary btn-block py-3\">{{ 'purchase.event.seatTicket.unselected' | translate }}</button>\n                                        <button *ngIf=\"reservation.ticket !== undefined\" type=\"button\"\n                                            (click)=\"openTicketList(reservation)\"\n                                            class=\"btn btn-block border border-primary text-primary bg-white py-3\">\n                                            <div class=\"d-flex justify-content-between align-items-center\"\n                                                *ngFor=\"let priceComponent of reservation.ticket?.ticketOffer.priceSpecification.priceComponent\">\n                                                <p class=\"w-50 text-left\">{{ priceComponent.name | changeLanguage }}</p>\n                                                <p *ngIf=\"priceComponent.price > 0\" class=\"w-50 text-right\">\n                                                    <span>{{ priceComponent.price | currency : priceComponent.priceCurrency }}</span>\n                                                    <!--\n                                                    --><span\n                                                        *ngIf=\"priceComponent?.referenceQuantity?.value\">{{ 'common.referenceQuantityValue' | translate: { value: priceComponent?.referenceQuantity?.value } }}</span>\n                                                </p>\n                                            </div>\n                                            <div class=\"d-flex justify-content-between align-items-center\"\n                                                *ngFor=\"let addOn of reservation.ticket?.addOn;\">\n                                                <p class=\"w-50 text-left\">\n                                                    {{ addOn.priceSpecification.name | changeLanguage }}\n                                                </p>\n                                                <p *ngIf=\"addOn.priceSpecification.price > 0\" class=\"w-50 text-right\">\n                                                    <span>{{ addOn.priceSpecification.price | currency : addOn.priceSpecification.priceCurrency }}</span>\n                                                    <!--\n                                                    --><span\n                                                        *ngIf=\"addOn.priceSpecification?.referenceQuantity?.value\">{{ 'common.referenceQuantityValue' | translate: { value: addOn.priceSpecification?.referenceQuantity?.value } }}</span>\n                                                </p>\n                                            </div>\n                                            <div>\n                                                <p *ngIf=\"reservation.ticket.movieTicket\" class=\"text-small text-left\">\n                                                    {{ 'modal.purchase.seatTicket.movieTicket.code' | translate }}\n                                                    {{ reservation.ticket.movieTicket.identifier }}\n                                                </p>\n                                            </div>\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n\n                <div class=\"mb-4 additional-ticket-text d-none\">\n                    <p>{{ 'common.additionalTicketText' | translate }}</p>\n                    <textarea [(ngModel)]=\"additionalTicketText\" class=\"py-1 px-2\"></textarea>\n                </div>\n            </div>\n            <div class=\"col-lg-4\">\n                <app-purchase-info class=\"mb-4\" [purchase]=\"purchase | async\"></app-purchase-info>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"buttons mx-auto text-center\">\n        <button type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\" [disabled]=\"(isLoading | async) || !isSelectedTicket\"\n            (click)=\"onSubmit()\">{{ 'purchase.event.seatTicket.next' | translate }}</button>\n        <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n            routerLink=\"/purchase/event/seat\">{{ 'purchase.event.seatTicket.prev' | translate }}</button>\n    </div>\n\n\n</div>","\nimport { Component } from '@angular/core';\nimport { PurchaseSeatComponent } from '../../purchase-seat/purchase-seat.component';\n\n@Component({\n    selector: 'app-purchase-event-seat',\n    templateUrl: './purchase-event-seat.component.html',\n    styleUrls: ['./purchase-event-seat.component.scss']\n})\nexport class PurchaseEventSeatComponent extends PurchaseSeatComponent {\n    public async prev() {\n        try {\n            const authorizeSeatReservation = (await this.actionService.purchase.getData()).authorizeSeatReservation;\n            if (authorizeSeatReservation !== undefined) {\n                await this.actionService.purchase.cancelTemporaryReservations([authorizeSeatReservation]);\n            }\n            this.router.navigate(['/purchase/event/schedule']);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.event.seat.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.event.seat.read' | translate\"></p>\n    <div class=\"container px-0\">\n        <div class=\"row\">\n            <div class=\"col-lg-8\">\n                <app-screen *ngIf=\"(purchase | async)?.theater \n                && screeningEventSeats.length > 0 \n                && (purchase | async)?.screen\" class=\"mb-3\" [theaterCode]=\"(purchase | async)?.theater.branchCode\"\n                    [screenCode]=\"(purchase | async)?.screen.branchCode\" [screeningEventSeats]=\"screeningEventSeats\"\n                    [openSeatingAllowed]=\"(purchase | async)?.screen.openSeatingAllowed\"\n                    [reservations]=\"(purchase | async)?.reservations\"\n                    [authorizeSeatReservation]=\"(purchase | async)?.authorizeSeatReservation\"\n                    (select)=\"selectSeat($event)\">\n                </app-screen>\n                <app-seat-info class=\"mb-4\"></app-seat-info>\n                <div *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\" class=\"mb-4\">\n                    <div class=\"d-flex align-items-center\">\n                        <p class=\"mr-2\">{{ 'purchase.event.seat.openSeating' | translate }}</p>\n                        <select class=\"form-control d-inline-block w-auto\" [(ngModel)]=\"reservationCount\">\n                            <option value=\"0\">0</option>\n                            <option *ngFor=\"let value of remainingAttendeeCapacityValue({\n                            screeningEventSeats: screeningEventSeats,\n                            screeningEvent: (purchase | async)?.screeningEvent,\n                            authorizeSeatReservations: (purchase | async)?.authorizeSeatReservations\n                        })\" [value]=\"value\">{{ value }}</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-lg-4\">\n                <app-purchase-info class=\"mb-4\" [purchase]=\"purchase | async\"></app-purchase-info>\n            </div>\n        </div>\n    </div>\n    <div class=\"buttons mx-auto text-center\">\n        <button *ngIf=\"!((purchase | async)?.screen?.openSeatingAllowed)\" type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\"\n            [disabled]=\"(isLoading | async) || (purchase | async)?.reservations.length === 0\"\n            (click)=\"onSubmit()\">{{ 'purchase.event.seat.next' | translate }}</button>\n        <button *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\" type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\"\n            [disabled]=\"(isLoading | async) || Number(reservationCount) === 0\"\n            (click)=\"onSubmit()\">{{ 'purchase.event.seat.next' | translate }}</button>\n        <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\" (click)=\"prev()\">{{\n            'purchase.event.seat.prev' | translate }}</button>\n    </div>\n\n</div>","import { AfterViewChecked, ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\nimport { select, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-base',\n    templateUrl: './purchase-base.component.html',\n    styleUrls: ['./purchase-base.component.scss']\n})\nexport class PurchaseBaseComponent implements OnInit, AfterViewChecked, OnDestroy {\n    public isLoading: Observable<boolean>;\n    public process: Observable<string>;\n    public purchase: Observable<reducers.IPurchaseState>;\n    constructor(\n        private store: Store<reducers.IState>,\n        private changeDetectorRef: ChangeDetectorRef\n    ) { }\n\n    /**\n     * \n     */\n    public ngOnInit() {\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.process = this.store.pipe(select(reducers.getProcess));\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n    }\n\n    /**\n     * \n     */\n    public ngAfterViewChecked() {\n        this.changeDetectorRef.detectChanges();\n    }\n\n    /**\n     * \n     */\n    public ngOnDestroy() {\n        this.isLoading.subscribe().unsubscribe();\n        this.process.subscribe().unsubscribe();\n        this.purchase.subscribe().unsubscribe();\n    }\n\n}\n","<app-header></app-header>\n<app-contents class=\"purchase\">\n    <app-transaction-remaining-time *ngIf=\"(purchase | async)?.transaction\" [transaction]=\"(purchase | async)?.transaction\"></app-transaction-remaining-time>\n    <router-outlet></router-outlet>\n    <app-footer></app-footer>\n</app-contents>\n\n<app-loading [isLoading]=\"isLoading | async\" [process]=\"process | async\"></app-loading>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-complete',\n    templateUrl: './purchase-complete.component.html',\n    styleUrls: ['./purchase-complete.component.scss']\n})\nexport class PurchaseCompleteComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public moment: typeof moment = moment;\n    public eventOrders: Functions.Purchase.IEventOrder[];\n    public environment = getEnvironment();\n    public paymentMethodType = factory.paymentMethodType;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService,\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.eventOrders = [];\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        const purchase = await this.actionService.purchase.getData();\n        if (purchase.order === undefined) {\n            this.router.navigate(['/error']);\n            return;\n        }\n        const order = purchase.order;\n        this.eventOrders = Functions.Purchase.order2EventOrders({ order });\n    }\n\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n    <div class=\"mb-4\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.complete.title' | translate }}</h2>\n        <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.complete.read' | translate\"></p>\n\n        <div class=\"mb-4 px-3 py-2 bg-white\">\n            <div class=\"row align-items-center\">\n                <p class=\"col-4\">\n                    {{ 'common.confirmationNumber' | translate }}</p>\n                <p class=\"col-8 text-large text-info font-weight-bold\">\n                    {{ (purchase | async)?.order.confirmationNumber }}\n                </p>\n            </div>\n        </div>\n\n\n        <div *ngFor=\"let eventOrder of eventOrders\" class=\"mb-4\">\n            <app-item-event [screeningEvent]=\"eventOrder.event\"></app-item-event>\n            <div class=\"bg-white p-3\">\n                <app-item-list [acceptedOffers]=\"eventOrder.data\"></app-item-list>\n            </div>\n        </div>\n\n\n        <div class=\"mb-4 px-3 bg-white\">\n            <div class=\"py-3 border-bottom border-gray\">\n                <div class=\"row align-items-center\">\n                    <p class=\"mb-2 mb-md-0 col-md-4\">{{ 'common.customerName' | translate }}</p>\n                    <p class=\"col-md-8\">{{ (purchase | async)?.order.customer.familyName }} {{ (purchase |\n                        async)?.order.customer.givenName }}</p>\n                </div>\n            </div>\n            <div class=\"py-3 border-bottom border-gray\">\n                <div class=\"row align-items-center\">\n                    <p class=\"mb-2 mb-md-0 col-md-4\">{{ 'form.label.email' | translate }}</p>\n                    <p class=\"col-md-8\">{{ (purchase | async)?.order.customer.email }}</p>\n                </div>\n            </div>\n            <div class=\"py-3 border-bottom border-gray\" [class.border-0]=\"(purchase | async)?.order.price === 0\">\n                <div class=\"row align-items-center\">\n                    <p class=\"mb-2 mb-md-0 col-md-4\">{{ 'form.label.telephone' | translate }}</p>\n                    <p class=\"col-md-8\">{{ (purchase | async)?.order.customer.telephone | libphonenumberFormat }}</p>\n                </div>\n            </div>\n            <div class=\"py-3 border-bottom border-gray\" *ngIf=\"(purchase | async)?.order.price > 0\">\n                <div class=\"row align-items-center\">\n                    <p class=\"mb-2 mb-md-0 col-md-4\">{{ 'common.amount' | translate }}</p>\n                    <p class=\"col-md-8 font-weight-bold text-large text-info\">{{ (purchase | async)?.order.price | currency : 'JPY' }}</p>\n                </div>\n            </div>\n            <div class=\"py-3\" *ngIf=\"(purchase | async)?.order.price > 0\">\n                <div class=\"row align-items-center\">\n                    <p class=\"mb-2 mb-md-0 col-md-4\">{{ 'common.paymentMethod' | translate }}</p>\n                    <div class=\"col-md-8\">\n                        <p *ngFor=\"let paymentMethod of (purchase | async)?.order.paymentMethods\">\n                            <span *ngIf=\"paymentMethod.typeOf === paymentMethodType.Cash\">{{ 'common.paymentMethodTypes.cash.label' | translate }}</span>\n                            <span *ngIf=\"paymentMethod.typeOf === paymentMethodType.CreditCard\">{{ 'common.paymentMethodTypes.creditCard.label' | translate }}</span>\n                            <span *ngIf=\"paymentMethod.typeOf === paymentMethodType.EMoney\">{{ 'common.paymentMethodTypes.eMoney.label' | translate }}</span>\n                            <span *ngIf=\"paymentMethod.typeOf === paymentMethodType.MovieTicket\">{{ 'common.paymentMethodTypes.movieTicket.label' | translate }}</span>\n                            <span *ngIf=\"paymentMethod.typeOf === paymentMethodType.Others\">{{ 'common.paymentMethodTypes.others.label' | translate }}</span>\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"buttons mx-auto text-center\">\n        <a *ngIf=\"environment.PORTAL_SITE_URL\" class=\"btn btn-outline-primary btn-block py-3 portal-link\"\n            [href]=\"environment.PORTAL_SITE_URL\">{{ 'purchase.confirm.prev' | translate }}</a>\n        <button *ngIf=\"!environment.PORTAL_SITE_URL\" type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n            routerLink=\"/\">{{ 'purchase.confirm.prev' | translate }}</button>\n    </div>\n\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-confirm',\n    templateUrl: './purchase-confirm.component.html',\n    styleUrls: ['./purchase-confirm.component.scss']\n})\nexport class PurchaseConfirmComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public isLoading: Observable<boolean>;\n    public moment: typeof moment = moment;\n    public amount: number;\n    public environment = getEnvironment();\n    public user: Observable<reducers.IUserState>;\n    public profile: factory.person.IProfile;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private utilService: UtilService,\n        private actionService: ActionService,\n        private router: Router,\n        private translate: TranslateService\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.amount = 0;\n        const purchase = await this.actionService.purchase.getData();\n        if (purchase.transaction === undefined\n            || purchase.profile === undefined) {\n            this.router.navigate(['/error']);\n            return;\n        }\n        this.profile = purchase.profile;\n        this.amount = Functions.Purchase.getAmount(purchase.authorizeSeatReservations);\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        const { pendingMovieTickets } = await this.actionService.purchase.getData();\n        const { language } = await this.actionService.user.getData();\n        try {\n            if (this.amount > 0) {\n                await this.actionService.purchase.authorizeCreditCard(this.amount);\n            }\n        } catch (error) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('purchase.confirm.alert.authorizeCreditCard')\n            });\n            this.router.navigate(['/purchase/input']);\n            return;\n        }\n        try {\n            if (pendingMovieTickets.length > 0) {\n                await this.actionService.purchase.authorizeMovieTicket();\n            }\n        } catch (error) {\n            this.router.navigate(['/error']);\n            return;\n        }\n        try {\n            await this.actionService.purchase.endTransaction({ language });\n            this.router.navigate(['/purchase/complete']);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public getProfile() {\n        const profile = this.profile;\n        const result: { key: string; name: string; value?: string; label?: { ja: string; en: string; } }[] = [];\n        if (profile === undefined) {\n            return result;\n        }\n        this.environment.PROFILE.forEach(p => {\n            const key = p.key;\n            if (result.find(r => r.name === 'common.customerName') === undefined\n                && (key === 'familyName' || key === 'givenName')) {\n                result.push({\n                    key: 'customerName',\n                    name: 'common.customerName',\n                    value: (profile.familyName === undefined && profile.givenName === undefined)\n                        ? '' : `${profile.familyName} ${profile.givenName}`\n                });\n                return;\n            }\n            if (key === 'email'\n                || key === 'telephone'\n                || key === 'address'\n                || key === 'age'\n                || key === 'gender') {\n                result.push({\n                    key,\n                    name: `form.label.${key}`,\n                    value: profile[key],\n                    label: p.label\n                });\n                return;\n            }\n            if (!/additionalProperty/.test(key)) {\n                return;\n            }\n            result.push({\n                key,\n                name: key,\n                value: profile.additionalProperty?.find(a => a.name === key.replace('additionalProperty.', ''))?.value,\n                label: p.label\n            });\n\n        });\n        return result.filter(r => r.value !== undefined && r.value !== '');\n    }\n\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n    <div class=\"mb-4\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.confirm.title' | translate }}</h2>\n        <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.confirm.read' | translate\"></p>\n\n        <div *ngFor=\"let authorizeSeatReservation of (purchase | async)?.authorizeSeatReservations\"\n            class=\"mb-4\">\n            <app-item-event [screeningEvent]=\"authorizeSeatReservation.object.event\"></app-item-event>\n            <div class=\"bg-white p-3\">\n                <app-item-list\n                    [authorizeSeatReservations]=\"authorizeSeatReservation?.result?.responseBody.object.reservations\">\n                </app-item-list>\n            </div>\n        </div>\n\n        <div *ngIf=\"profile\" class=\"mb-4 px-3 bg-white\">\n            <div *ngFor=\"let profile of getProfile()\" class=\"py-3 border-bottom border-gray\">\n                <div class=\"row align-items-center\">\n                    <p *ngIf=\"!profile.label\" class=\"mb-2 mb-md-0 col-md-4\">{{ profile.name | translate }}</p>\n                    <p *ngIf=\"profile.label\" class=\"mb-2 mb-md-0 col-md-4\">{{ profile.label | changeLanguage }}</p>\n                    <p *ngIf=\"profile.key !== 'telephone' && profile.key !== 'gender'\" class=\"col-md-8 white-space-pre-wrap\">\n                        {{ profile.value }}\n                    </p>\n                    <p *ngIf=\"profile.key === 'telephone'\" class=\"col-md-8\">{{ profile.value | libphonenumberFormat }}</p>\n                    <p *ngIf=\"profile.key === 'gender'\" class=\"col-md-8\">{{ 'form.select.option.' + profile.value | translate }}</p>\n                </div>\n            </div>\n            <div class=\"py-3 border-bottom border-gray\" *ngIf=\"amount > 0\">\n                <div class=\"row align-items-center\">\n                    <p class=\"mb-2 mb-md-0 col-md-4\">{{ 'common.paymentMethod' | translate }}</p>\n                    <p class=\"col-md-8\">{{ 'common.paymentMethodTypes.creditCard.label' | translate }}</p>\n                </div>\n            </div>\n            <div class=\"py-3 border-bottom border-gray\" *ngIf=\"amount > 0\">\n                <div class=\"row align-items-center\">\n                    <p class=\"mb-2 mb-md-0 col-md-4\">{{ 'common.amount' | translate }}</p>\n                    <p class=\"col-md-8 font-weight-bold text-large text-info\">{{ amount | currency : 'JPY' }}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div *ngIf=\"environment.PURCHASE_WARNING\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.confirm.warning' | translate }}</h2>\n        <div class=\"mb-4\">\n            <app-purchase-warning [language]=\"(user | async)?.language\"\n                [screeningEvent]=\"(purchase | async)?.screeningEvent\"></app-purchase-warning>\n        </div>\n    </div>\n\n    <div class=\"buttons mx-auto text-center\">\n        <button *ngIf=\"!environment.PURCHASE_WARNING\" type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\"\n            [disabled]=\"isLoading | async\" (click)=\"onSubmit()\">{{ 'purchase.confirm.next' | translate }}</button>\n        <button *ngIf=\"environment.PURCHASE_WARNING\" type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\"\n            [disabled]=\"isLoading | async\" (click)=\"onSubmit()\">{{ 'purchase.confirm.consent' | translate }}</button>\n        <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n            routerLink=\"/purchase/input\">{{ 'purchase.confirm.prev' | translate }}</button>\n    </div>\n</div>","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { AbstractControl, FormBuilder, FormControl, FormGroup, ValidatorFn, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { CountryISO, NgxIntlTelInputComponent, SearchCountryField, TooltipLabel, } from 'ngx-intl-tel-input';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\nimport {\n    CreditcardSecurityCodeModalComponent\n} from '../../../../shared/components/parts/creditcard/security-code-modal/security-code-modal.component';\nimport { CreditCardSelectModalComponent } from '../../../../shared/components/parts/creditcard/select-modal/select-modal.component';\nimport { LibphonenumberFormatPipe } from '../../../../shared/pipes/libphonenumber-format.pipe';\n\n@Component({\n    selector: 'app-purchase-input',\n    templateUrl: './purchase-input.component.html',\n    styleUrls: ['./purchase-input.component.scss']\n})\nexport class PurchaseInputComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public profileForm: FormGroup;\n    public creditCardForm: FormGroup;\n    public cardExpiration: {\n        year: string[];\n        month: string[];\n    };\n    public amount: number;\n    public environment = getEnvironment();\n    public viewType = Models.Common.ViewType;\n    public usedCreditCard?: factory.chevre.paymentMethod.paymentCard.creditCard.ICheckedCard;\n    public SearchCountryField = SearchCountryField;\n    public TooltipLabel = TooltipLabel;\n    public CountryISO = CountryISO;\n    @ViewChild('intlTelInput') private intlTelInput: NgxIntlTelInputComponent;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private modal: BsModalService,\n        private formBuilder: FormBuilder,\n        private utilService: UtilService,\n        private actionService: ActionService,\n        private translate: TranslateService\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        try {\n            this.purchase = this.store.pipe(select(reducers.getPurchase));\n            this.user = this.store.pipe(select(reducers.getUser));\n            this.isLoading = this.store.pipe(select(reducers.getLoading));\n            const user = await this.actionService.user.getData();\n            if (user.login) {\n                // \n                await this.actionService.user.getProfile();\n                // await this.actionService.user.getCreditCards();\n            }\n            await this.createProfileForm();\n            this.createCreditCardForm();\n            const purchase = await this.actionService.purchase.getData();\n            if (purchase.transaction === undefined) {\n                this.router.navigate(['/error']);\n                return;\n            }\n            this.amount = Functions.Purchase.getAmount(purchase.authorizeSeatReservations);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n        setTimeout(() => {\n            if (this.intlTelInput === undefined) {\n                return;\n            }\n            const findResult = this.intlTelInput.allCountries.find(c => c.iso2 === CountryISO.Japan);\n            if (findResult === undefined) {\n                return;\n            }\n            findResult.placeHolder = this.translate.instant('form.placeholder.telephone');\n        }, 0);\n    }\n\n    /**\n     * \n     */\n    private async createProfileForm() {\n        const profile = this.environment.PROFILE;\n        this.profileForm = this.formBuilder.group({});\n        profile.forEach(p => {\n            const validators: ValidatorFn[] = [];\n            if (p.required !== undefined && p.required) {\n                validators.push(Validators.required);\n            }\n            if (p.maxLength !== undefined) {\n                validators.push(Validators.maxLength(p.maxLength));\n            }\n            if (p.minLength !== undefined) {\n                validators.push(Validators.minLength(p.minLength));\n            }\n            if (p.pattern !== undefined) {\n                validators.push(Validators.pattern(p.pattern));\n            }\n            if (p.key === 'familyName' || p.key === 'givenName') {\n                validators.push((control: AbstractControl) => {\n                    const field = control.root.get(p.key);\n                    const language = document.documentElement.lang;\n                    if (field !== null) {\n                        if (field.value === '') {\n                            return null;\n                        }\n                        if (language === 'ja' && !new RegExp(/^[-]+$/).test(field.value)) {\n                            return { customPattern: true };\n                        }\n                        if (language !== 'ja' && !new RegExp(/^[a-z]+$/).test(field.value)) {\n                            return { customPattern: true };\n                        }\n                    }\n\n                    return null;\n                });\n            }\n            if (p.key === 'email') {\n                validators.push(Validators.email);\n            }\n            this.profileForm.addControl(p.key, new FormControl(p.value, validators));\n        });\n        const purchase = await this.actionService.purchase.getData();\n        const user = await this.actionService.user.getData();\n        const profileData = (user.login && purchase.profile === undefined)\n            ? user.profile : purchase.profile;\n        if (profileData === undefined) {\n            return;\n        }\n        Object.keys(profileData).forEach(key => {\n            const value = (<any>profileData)[key];\n            if (value === undefined || this.profileForm.controls[key] === undefined) {\n                return;\n            }\n            if (key === 'telephone') {\n                this.profileForm.controls.telephone\n                    .setValue(new LibphonenumberFormatPipe().transform(value));\n                return;\n            }\n            this.profileForm.controls[key].setValue(value);\n        });\n        const additionalProperty = profileData.additionalProperty;\n        if (additionalProperty === undefined) {\n            return;\n        }\n        additionalProperty.forEach(a => {\n            const key = `additionalProperty.${a.name}`;\n            const value = a.value;\n            if (value === undefined || this.profileForm.controls[key] === undefined) {\n                return;\n            }\n            this.profileForm.controls[key].setValue(value);\n        });\n    }\n\n    /**\n     * \n     */\n    private createCreditCardForm() {\n        this.cardExpiration = {\n            year: [],\n            month: []\n        };\n        for (let i = 0; i < 12; i++) {\n            this.cardExpiration.month.push(`0${String(i + 1)}`.slice(-2));\n        }\n        for (let i = 0; i < 10; i++) {\n            this.cardExpiration.year.push(moment().add(i, 'year').format('YYYY'));\n        }\n        this.creditCardForm = this.formBuilder.group({\n            cardNumber: ['', [Validators.required, Validators.pattern(/^[0-9]+$/)]],\n            cardExpirationMonth: [this.cardExpiration.month[0], [Validators.required]],\n            cardExpirationYear: [this.cardExpiration.year[0], [Validators.required]],\n            securityCode: ['', [Validators.required]],\n            holderName: ['', [Validators.required]]\n        });\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        // Form\n        Object.keys(this.profileForm.controls).forEach((key) => {\n            this.profileForm.controls[key].markAsTouched();\n            if (key === 'telephone') {\n                return;\n            }\n            this.profileForm.controls[key].setValue((<HTMLInputElement>document.getElementById(key)).value);\n        });\n        if (this.profileForm.invalid) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('purchase.input.alert.customer')\n            });\n            return;\n        }\n        // \n        if (this.usedCreditCard === undefined && this.amount > 0) {\n            Object.keys(this.creditCardForm.controls).forEach((key) => {\n                this.creditCardForm.controls[key].markAsTouched();\n            });\n            this.creditCardForm.controls.cardNumber.setValue((<HTMLInputElement>document.getElementById('cardNumber')).value);\n            this.creditCardForm.controls.securityCode.setValue((<HTMLInputElement>document.getElementById('securityCode')).value);\n            this.creditCardForm.controls.holderName.setValue((<HTMLInputElement>document.getElementById('holderName')).value);\n            if (this.creditCardForm.invalid) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant('purchase.input.alert.payment')\n                });\n                return;\n            }\n        }\n        this.actionService.purchase.removeCreditCard();\n        if (this.amount > 0 && this.usedCreditCard === undefined) {\n            // \n            try {\n                const cardExpiration = {\n                    year: this.creditCardForm.controls.cardExpirationYear.value,\n                    month: this.creditCardForm.controls.cardExpirationMonth.value\n                };\n                const creditCard = {\n                    cardno: this.creditCardForm.controls.cardNumber.value,\n                    expire: `${cardExpiration.year}${cardExpiration.month}`,\n                    holderName: this.creditCardForm.controls.holderName.value,\n                    securityCode: this.creditCardForm.controls.securityCode.value\n                };\n                await this.actionService.purchase.createGmoTokenObject(creditCard);\n            } catch (error) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant('purchase.input.alert.gmoToken')\n                });\n                return;\n            }\n        }\n        if (this.amount > 0 && this.usedCreditCard !== undefined) {\n            // \n            const creditCard = {\n                memberId: 'me',\n                cardSeq: Number(this.usedCreditCard.cardSeq)\n            };\n            this.actionService.purchase.registerCreditCard(creditCard);\n        }\n        try {\n            const additionalProperty: { name: string; value: string; }[] = [];\n            Object.keys(this.profileForm.controls).forEach(key => {\n                if (!/additionalProperty/.test(key)) {\n                    return;\n                }\n                additionalProperty.push({ name: key.replace('additionalProperty.', ''), value: this.profileForm.controls[key].value });\n            });\n\n            const contact = {\n                givenName: (this.profileForm.controls.givenName === undefined)\n                    ? undefined : this.profileForm.controls.givenName.value,\n                familyName: (this.profileForm.controls.familyName === undefined)\n                    ? undefined : this.profileForm.controls.familyName.value,\n                telephone: (this.profileForm.controls.telephone === undefined)\n                    ? undefined : this.profileForm.controls.telephone.value.e164Number,\n                email: (this.profileForm.controls.email === undefined)\n                    ? undefined : this.profileForm.controls.email.value,\n                address: (this.profileForm.controls.address === undefined)\n                    ? undefined : this.profileForm.controls.address.value,\n                age: (this.profileForm.controls.age === undefined)\n                    ? undefined : this.profileForm.controls.age.value,\n                gender: (this.profileForm.controls.gender === undefined)\n                    ? undefined : this.profileForm.controls.gender.value,\n                additionalProperty: (additionalProperty.length === 0) ? undefined : additionalProperty,\n            };\n            await this.actionService.purchase.registerContact(contact);\n            this.router.navigate(['/purchase/confirm']);\n        } catch (error) {\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public openSecurityCode() {\n        this.modal.show(CreditcardSecurityCodeModalComponent, {\n            class: 'modal-dialog-centered'\n        });\n    }\n\n    /**\n     * \n     */\n    public openRegisteredCreditCard() {\n\n        this.user.subscribe((user) => {\n            this.modal.show(CreditCardSelectModalComponent, {\n                initialState: {\n                    creditCards: user.creditCards,\n                    cb: (creditCard: factory.chevre.paymentMethod.paymentCard.creditCard.ICheckedCard) => {\n                        this.usedCreditCard = creditCard;\n                    }\n                },\n                class: 'modal-dialog-centered'\n            });\n        }).unsubscribe();\n    }\n\n    /**\n     * \n     */\n    public changeInputCreditCard() {\n        this.usedCreditCard = undefined;\n        this.createCreditCardForm();\n    }\n\n    /**\n     * \n     */\n    public copyDomain() {\n        const str = this.translate.instant('email.domain');\n        const element = document.createElement('textarea');\n        element.value = str;\n        element.selectionStart = 0;\n        element.selectionEnd = element.value.length;\n        document.body.appendChild(element);\n        element.focus();\n        document.execCommand('copy');\n        element.blur();\n        document.body.removeChild(element);\n    }\n\n    /**\n     * \n     */\n    public isRequired(key: String) {\n        return this.environment.PROFILE.find(p => p.key === key && p.required) !== undefined;\n    }\n\n    /**\n     * key\n     */\n    public getProfileFormKeys() {\n        return Object.keys(this.profileForm.controls);\n    }\n\n    /**\n     * \n     */\n    public getAdditionalProperty(key: string) {\n        return this.environment.PROFILE.find(p => /additionalProperty/.test(p.key) && p.key === key);\n    }\n\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n    <div class=\"mb-4\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.input.title' | translate }}</h2>\n        <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.input.read' | translate\"></p>\n\n        <div class=\"p-3 bg-white\">\n            <form *ngIf=\"profileForm\" [formGroup]=\"profileForm\">\n                <div *ngFor=\"let key of getProfileFormKeys()\" class=\"form-group row\">\n                    <div class=\"col-md-4 py-2 text-md-right \">\n                        <div class=\"d-inline-flex align-items-center\">\n                            <p *ngIf=\"!getAdditionalProperty(key)\">{{ 'form.label.' + key | translate }}</p>\n                            <p *ngIf=\"getAdditionalProperty(key)\">\n                                {{ getAdditionalProperty(key)?.label | changeLanguage }}</p>\n                            <p *ngIf=\"isRequired(key)\" class=\"badge badge-danger ml-2\">{{ 'form.required' | translate }}\n                            </p>\n                        </div>\n                    </div>\n                    <div class=\"col-md-8\">\n                        <input\n                            *ngIf=\"key !== 'email' && key !== 'telephone' && key !== 'gender' && !getAdditionalProperty(key)\"\n                            type=\"text\" class=\"form-control\" [formControlName]=\"key\" [id]=\"key\"\n                            [placeholder]=\"'form.placeholder.' + key | translate\">\n                        <input *ngIf=\"key === 'email'\" type=\"email\" class=\"form-control\" [formControlName]=\"key\"\n                            [id]=\"key\" [placeholder]=\"'form.placeholder.' + key | translate\">\n                        <ngx-intl-tel-input *ngIf=\"key === 'telephone'\" #intlTelInput\n                            [preferredCountries]=\"[CountryISO.Japan]\" [enableAutoCountrySelect]=\"false\"\n                            [enablePlaceholder]=\"true\" [searchCountryFlag]=\"true\"\n                            [searchCountryField]=\"[SearchCountryField.Iso2, SearchCountryField.Name]\"\n                            [selectFirstCountry]=\"false\" [selectedCountryISO]=\"CountryISO.Japan\" [maxLength]=\"15\"\n                            [tooltipField]=\"TooltipLabel.Name\" [phoneValidation]=\"true\" [separateDialCode]=\"false\"\n                            inputId=\"telephone\" name=\"telephone\" formControlName=\"telephone\"></ngx-intl-tel-input>\n                        <select *ngIf=\"key === 'gender'\" class=\"form-control\" [formControlName]=\"key\" [id]=\"key\">\n                            <option value=\"\">{{ 'form.option.unselected' | translate }}</option>\n                            <option value=\"man\">{{ 'form.option.man' | translate }}</option>\n                            <option value=\"woman\">{{ 'form.option.woman' | translate }}</option>\n                        </select>\n                        <input\n                            *ngIf=\"getAdditionalProperty(key) && getAdditionalProperty(key)?.inputType !== 'textarea'\"\n                            type=\"text\" class=\"form-control\" [formControlName]=\"key\" [id]=\"key\" placeholder=\"\">\n                        <textarea\n                            *ngIf=\"getAdditionalProperty(key) && getAdditionalProperty(key)?.inputType === 'textarea'\"\n                            class=\"form-control\" [formControlName]=\"key\" [id]=\"key\" placeholder=\"\"></textarea>\n                        <div *ngIf=\"profileForm.controls[key].invalid && profileForm.controls[key].touched\"\n                            class=\"mt-2\">\n                            <p *ngIf=\"profileForm.controls[key].errors?.required\" class=\"text-danger\">\n                                {{ 'form.validation.required' | translate }}\n                            </p>\n                            <p *ngIf=\"profileForm.controls[key].errors?.maxlength\" class=\"text-danger\">\n                                {{ 'form.validation.maxlength' | translate:{ value: profileForm.controls[key].errors?.maxlength.requiredLength } }}\n                            </p>\n                            <p *ngIf=\"profileForm.controls[key].errors?.email\" class=\"text-danger\">\n                                {{ 'form.validation.email' | translate }}\n                            </p>\n                            <p *ngIf=\"profileForm.controls[key].errors?.validatePhoneNumber\" class=\"text-danger\">\n                                {{ 'form.validation.telephone' | translate }}\n                            </p>\n                            <div *ngIf=\"key === 'familyName' || key === 'givenName'\">\n                                <p *ngIf=\"(user | async)?.language === 'ja' && profileForm.controls[key].errors?.customPattern\"\n                                    class=\"text-danger\">\n                                    {{ 'form.validation.fullKana' | translate }}</p>\n                                <p *ngIf=\"(user | async)?.language !== 'ja' && profileForm.controls[key].errors?.customPattern\"\n                                    class=\"text-danger\">\n                                    {{ 'form.validation.lowercaseLetters' | translate }}</p>\n                            </div>\n                        </div>\n                        <div *ngIf=\"key === 'email'\">\n                            <p class=\"mt-2 mb-1 text-small\" [innerHTML]=\"'form.description.email' | translate\"></p>\n                            <button type=\"button\" class=\"btn btn-primary btn-sm\"\n                                (click)=\"copyDomain()\">{{ 'purchase.input.copyDomain' | translate }}</button>\n                        </div>\n                        <div *ngIf=\"key === 'telephone'\">\n                            <p class=\"mt-2 mb-1 text-small\" [innerHTML]=\"'form.description.telephone' | translate\"></p>\n                        </div>\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n\n    <div class=\"mb-4\" *ngIf=\"amount > 0\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.input.payment.title' | translate }}</h2>\n        <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.input.payment.read' | translate\"></p>\n\n        <div class=\"p-3 bg-white\">\n            <div class=\"form-group row\">\n                <p class=\"col-md-4 py-2 py-md-3 text-md-right\">{{ 'common.amount' | translate }}</p>\n                <div class=\"col-md-8\">\n                    <p class=\"text-x-large text-info\">{{ amount | currency : 'JPY'}}</p>\n                </div>\n            </div>\n            <div class=\"mb-3\">\n                <form *ngIf=\"!usedCreditCard && creditCardForm\" [formGroup]=\"creditCardForm\">\n                    <div class=\"form-group row\">\n                        <p class=\"col-md-4 py-2 text-md-right\">{{ 'common.credit.cardNumber' | translate }}<span\n                                class=\"badge badge-danger ml-2\">{{ 'form.required' | translate }}</span></p>\n                        <div class=\"col-md-8\">\n                            <input type=\"text\" class=\"form-control\" id=\"cardNumber\" formControlName=\"cardNumber\"\n                                [placeholder]=\"'form.placeholder.cardNumber' | translate\" maxlength=\"16\">\n                            <div *ngIf=\"creditCardForm.controls.cardNumber.invalid && creditCardForm.controls.cardNumber.touched\"\n                                class=\"mt-2\">\n                                <p *ngIf=\"creditCardForm.controls.cardNumber.errors?.required\" class=\"text-danger\">\n                                    {{ 'form.validation.required' | translate }}</p>\n                                <p *ngIf=\"creditCardForm.controls.cardNumber.errors?.pattern\" class=\"text-danger\">\n                                    {{ 'form.validation.number' | translate }}\n                                </p>\n                            </div>\n                            <p class=\"mt-2 mb-1 text-small\" [innerHTML]=\"'form.description.cardNumber' | translate\"></p>\n                            <div class=\"credit-image\"><img class=\"w-100\" src=\"/assets/images/credit_card.png\" alt=\"\">\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <p class=\"col-md-4 py-2 text-md-right\">{{ 'common.credit.cardExpiration' | translate }}<span\n                                class=\"badge badge-danger ml-2\">{{ 'form.required' | translate }}</span></p>\n                        <div class=\"col-md-8\">\n                            <div class=\"form-inline\">\n                                <select class=\"form-control d-inline-block w-auto\" id=\"cardExpirationMonth\"\n                                    formControlName=\"cardExpirationMonth\">\n                                    <option *ngFor=\"let month of cardExpiration.month\" [value]=\"month\">{{ month }}\n                                    </option>\n                                </select>\n                                <span class=\"mx-2\">{{ 'common.date.month' | translate }}</span>\n                                <select class=\"form-control d-inline-block w-auto\" id=\"cardExpirationYear\"\n                                    formControlName=\"cardExpirationYear\">\n                                    <option *ngFor=\"let year of cardExpiration.year\" [value]=\"year\">{{ year }}</option>\n                                </select>\n                                <span class=\"mx-2\">{{ 'common.date.year' | translate }}</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <p class=\"col-md-4 py-2 text-md-right\">{{ 'common.credit.securityCode' | translate }}<span\n                                class=\"badge badge-danger ml-2\">{{ 'form.required' | translate }}</span></p>\n                        <div class=\"col-md-8\">\n                            <input type=\"text\" class=\"form-control\" id=\"securityCode\" maxlength=\"4\"\n                                [placeholder]=\"'form.placeholder.securityCode' | translate\"\n                                formControlName=\"securityCode\">\n                            <div *ngIf=\"creditCardForm.controls.securityCode.invalid && creditCardForm.controls.securityCode.touched\"\n                                class=\"mt-2\">\n                                <p *ngIf=\"creditCardForm.controls.securityCode.errors?.required\" class=\"text-danger\">\n                                    {{ 'form.validation.required' | translate }}</p>\n                            </div>\n                            <div class=\"btn btn-link btn-sm\" (click)=\"openSecurityCode()\">\n                                {{ 'purchase.input.securityCode' | translate }}</div>\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <p class=\"col-md-4 py-2 text-md-right\">{{ 'common.credit.holderName' | translate }}<span\n                                class=\"badge badge-danger ml-2\">{{ 'form.required' | translate }}</span></p>\n                        <div class=\"col-md-8\">\n                            <input type=\"text\" class=\"form-control\" id=\"holderName\"\n                                [placeholder]=\"'form.placeholder.holderName' | translate\" formControlName=\"holderName\">\n                            <div *ngIf=\"creditCardForm.controls.holderName.invalid && creditCardForm.controls.holderName.touched\"\n                                class=\"mt-2\">\n                                <p *ngIf=\"creditCardForm.controls.holderName.errors?.required\" class=\"text-danger\">\n                                    {{ 'form.validation.required' | translate }}</p>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div *ngIf=\"usedCreditCard\" class=\"mb-3\">\n                <div class=\"form-group row\">\n                    <p class=\"col-md-4 py-2 text-md-right\">{{ 'common.credit.cardNumber' | translate }}</p>\n                    <p class=\"col-md-8 py-2\">{{ usedCreditCard.cardNo }}</p>\n                </div>\n                <div class=\"form-group row\">\n                    <p class=\"col-md-4 py-2 text-md-right\">{{ 'common.credit.cardExpiration' | translate }}</p>\n                    <p class=\"col-md-8 py-2\">\n                        {{ usedCreditCard.expire | slice:2:4 }}\n                        <span class=\"mx-2\">{{ 'common.date.month' | translate }}</span>\n                        {{ usedCreditCard.expire | slice:0:2 }}\n                        <span class=\"mx-2\">{{ 'common.date.year' | translate }}</span>\n                    </p>\n                </div>\n            </div>\n            <div *ngIf=\"(user | async)?.creditCards.length > 0 && !usedCreditCard\" class=\"buttons mx-auto\">\n                <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\" [disabled]=\"isLoading | async\"\n                    (click)=\"openRegisteredCreditCard()\">{{ 'purchase.input.registeredCreditCard' | translate }}</button>\n            </div>\n            <div *ngIf=\"usedCreditCard\" class=\"buttons mx-auto\">\n                <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n                    (click)=\"changeInputCreditCard()\">{{ 'purchase.input.inputCreditCard' | translate }}</button>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"mb-4 p-3 bg-white\">\n        <h3 class=\"mb-2 font-weight-bold\">{{ 'purchase.input.payment.note.label' | translate }}</h3>\n        <p class=\"text-small\" [innerHTML]=\"'purchase.input.payment.note.read' | translate\"></p>\n    </div>\n\n\n    <div class=\"buttons mx-auto text-center\">\n        <button type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\" [disabled]=\"isLoading | async\"\n            (click)=\"onSubmit()\">{{ 'purchase.input.next' | translate }}</button>\n\n        <div *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\">\n            <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n                routerLink=\"/purchase/cinema/ticket\">{{ 'purchase.input.prev' | translate }}</button>\n        </div>\n        <div *ngIf=\"environment.VIEW_TYPE === viewType.Event\">\n            <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n                routerLink=\"/purchase/event/schedule\">{{ 'purchase.input.prev' | translate }}</button>\n        </div>\n\n    </div>\n\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { select, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-root',\n    templateUrl: './purchase-root.component.html',\n    styleUrls: ['./purchase-root.component.scss']\n})\nexport class PurchaseRootComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public environment = getEnvironment();\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private actionService: ActionService,\n        private router: Router\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.actionService.purchase.delete();\n        if (this.environment.VIEW_TYPE === Models.Common.ViewType.Cinema) {\n            this.router.navigate(['/purchase/cinema/schedule']);\n            return;\n        }\n        this.router.navigate(['/purchase/event/date']);\n    }\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-seat',\n    template: ''\n})\nexport class PurchaseSeatComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public environment = getEnvironment();\n    public external = Functions.Util.getExternalData();\n    public screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n    public translateName: string;\n    public reservationCount: number;\n    public Number = Number;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private utilService: UtilService,\n        private translate: TranslateService,\n        protected router: Router,\n        protected actionService: ActionService\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.translateName = (this.environment.VIEW_TYPE === 'cinema')\n            ? 'purchase.cinema.seat' : 'purchase.event.seat';\n        this.screeningEventSeats = [];\n        this.reservationCount = 0;\n        try {\n            const { screeningEvent, reservations } = await this.actionService.purchase.getData();\n            if (screeningEvent === undefined) {\n                this.router.navigate(['/error']);\n                return;\n            }\n            this.reservationCount = reservations.length;\n            await this.resetSeats();\n            reservations.forEach(r => {\n                if (r.seat === undefined) {\n                    return;\n                }\n                this.selectSeat({ seat: r.seat, status: Models.Purchase.Screen.SeatStatus.Default });\n            });\n            await this.actionService.purchase.getScreen({\n                branchCode: { $eq: screeningEvent.location.branchCode },\n                containedInPlace: {\n                    branchCode: { $eq: screeningEvent.superEvent.location.branchCode }\n                }\n            });\n            this.screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n            await this.actionService.purchase.getTicketList();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async selectSeat(data: {\n        seat: Models.Purchase.Reservation.IReservationSeat,\n        status: Models.Purchase.Screen.SeatStatus\n    }) {\n        const purchase = await this.actionService.purchase.getData();\n        if (data.status === Models.Purchase.Screen.SeatStatus.Default) {\n            if (purchase.screeningEvent !== undefined\n                && purchase.screeningEvent.offers !== undefined\n                && purchase.screeningEvent.offers.eligibleQuantity.maxValue !== undefined\n                && purchase.reservations.length >= purchase.screeningEvent.offers.eligibleQuantity.maxValue) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant(\n                        `${this.translateName}.alert.limit`,\n                        { value: purchase.screeningEvent.offers.eligibleQuantity.maxValue }\n                    )\n                });\n                return;\n            }\n            this.actionService.purchase.selectSeats([data.seat]);\n        } else {\n            this.actionService.purchase.cancelSeats([data.seat]);\n        }\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        const { screeningEventTicketOffers, screen } = await this.actionService.purchase.getData();\n        try {\n            if (screeningEventTicketOffers.length === 0) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant(`${this.translateName}.alert.ticketNotfound`)\n                });\n                return;\n            }\n            if (screen !== undefined && screen.openSeatingAllowed) {\n                // \n                await this.selectOpenSeating();\n            }\n            const { reservations } = await this.actionService.purchase.getData();\n            await this.actionService.purchase.temporaryReservation({\n                reservations,\n                screeningEventSeats: this.screeningEventSeats\n            });\n            const navigate = (this.environment.VIEW_TYPE === 'cinema')\n                ? '/purchase/cinema/ticket'\n                : '/purchase/event/seat/ticket';\n            this.router.navigate([navigate]);\n        } catch (error) {\n            if (screen !== undefined && screen.openSeatingAllowed) {\n                // \n                await this.resetSeats();\n            }\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(`${this.translateName}.alert.temporaryReservation`)\n            });\n        }\n    }\n\n    /**\n     * \n     */\n    public async resetSeats() {\n        const seats: Models.Purchase.Reservation.IReservationSeat[] = [];\n        const purchase = await this.actionService.purchase.getData();\n        purchase.reservations.forEach((reservation) => {\n            if (reservation.seat === undefined) {\n                return;\n            }\n            seats.push(reservation.seat);\n        });\n        this.actionService.purchase.cancelSeats(seats);\n    }\n\n    /**\n     * \n     */\n    public remainingAttendeeCapacityValue(params: {\n        screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n        screeningEvent: factory.chevre.event.screeningEvent.IEvent;\n        authorizeSeatReservations: factory.action.authorize.offer.seatReservation.IAction<factory.service.webAPI.Identifier.Chevre>[];\n    }) {\n        const screeningEventSeats = params.screeningEventSeats;\n        const screeningEvent = params.screeningEvent;\n        const values = [];\n        let limit = Number(this.environment.PURCHASE_ITEM_MAX_LENGTH);\n        if (screeningEvent.offers !== undefined\n            && screeningEvent.offers.eligibleQuantity.maxValue !== undefined\n            && limit > screeningEvent.offers.eligibleQuantity.maxValue) {\n            limit = screeningEvent.offers.eligibleQuantity.maxValue;\n        }\n        if (new Models.Purchase.Performance(screeningEvent).isTicketedSeat()) {\n            // \n            const screeningEventLimit = Functions.Purchase.getRemainingSeatLength({\n                screeningEventSeats, screeningEvent\n            });\n            if (limit > screeningEventLimit) {\n                limit = screeningEventLimit;\n            }\n        }\n        for (let i = 0; i < limit; i++) {\n            values.push(i + 1);\n        }\n        return values;\n    }\n\n    /**\n     * \n     */\n    public async selectOpenSeating() {\n        const { reservations } = await this.actionService.purchase.getData();\n        this.screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n        const screeningEventSeats = this.screeningEventSeats;\n        const seats = Functions.Purchase.getEmptySeat({ reservations, screeningEventSeats });\n        await this.resetSeats();\n        const selectSeats: Models.Purchase.Reservation.IReservationSeat[] = [];\n        for (let i = 0; i < Number(this.reservationCount); i++) {\n            selectSeats.push(seats[i]);\n        }\n        this.actionService.purchase.selectSeats(selectSeats);\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { Observable } from 'rxjs';\nimport { Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\nimport { MovieTicketCheckModalComponent } from '../../../../shared/components/parts/movie-ticket/check-modal/check-modal.component';\nimport { PurchaseSeatTicketModalComponent } from '../../../../shared/components/parts/purchase/seat-ticket-modal/seat-ticket-modal.component';\n\n@Component({\n    selector: 'app-purchase-ticket',\n    template: ''\n})\nexport class PurchaseTicketComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public additionalTicketText: string;\n    public environment = getEnvironment();\n    public translateName: string;\n    public isSelectedTicket: boolean;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private modal: BsModalService,\n        private utilService: UtilService,\n        private actionService: ActionService,\n        private translate: TranslateService\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.translateName = (this.environment.VIEW_TYPE === 'cinema')\n            ? 'purchase.cinema.ticket' : 'purchase.event.seatTicket';\n        this.additionalTicketText = '';\n        this.isSelectedTicket = (await this.getUnselectedTicketReservations()).length === 0;\n    }\n\n    /**\n     * \n     */\n    public async getUnselectedTicketReservations() {\n        const { reservations } = await this.actionService.purchase.getData();\n        return reservations.filter((reservation) => {\n            return (reservation.ticket === undefined);\n        });\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        try {\n            const { reservations } = await this.actionService.purchase.getData();\n            const validResult = reservations.filter((reservation) => {\n                if (reservation.ticket === undefined) {\n                    return false;\n                }\n                const priceComponent = reservation.ticket.ticketOffer.priceSpecification.priceComponent;\n                const UnitPriceSpecification = factory.chevre.priceSpecificationType.UnitPriceSpecification;\n                const unitPriceSpecifications = priceComponent.filter(p => p.typeOf === UnitPriceSpecification);\n                const filterResult = reservations.filter((targetReservation) => {\n                    return (reservation.ticket !== undefined\n                        && targetReservation.ticket !== undefined\n                        && reservation.ticket.ticketOffer.id === targetReservation.ticket.ticketOffer.id);\n                });\n                const findResult = unitPriceSpecifications.find((unitPriceSpecification) => {\n                    const value = (unitPriceSpecification.typeOf === UnitPriceSpecification\n                        && unitPriceSpecification.referenceQuantity.value !== undefined)\n                        ? unitPriceSpecification.referenceQuantity.value : 1;\n\n                    return (filterResult.length % value !== 0);\n                });\n\n                return (findResult !== undefined);\n            });\n            if (validResult.length > 0) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant(`${this.translateName}.alert.ticketCondition`)\n                });\n                return;\n            }\n            const additionalTicketText = this.additionalTicketText;\n            const screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n            await this.actionService.purchase.temporaryReservation({\n                reservations,\n                additionalTicketText,\n                screeningEventSeats\n            });\n            const navigate = (this.environment.VIEW_TYPE === 'cinema')\n                ? '/purchase/input'\n                : '/purchase/event/schedule';\n            this.router.navigate([navigate]);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     * @param reservation\n     */\n    public async openTicketList(reservation: Models.Purchase.Reservation.IReservation) {\n        const purchase = await this.actionService.purchase.getData();\n        this.modal.show(PurchaseSeatTicketModalComponent, {\n            initialState: {\n                authorizeSeatReservation: purchase.authorizeSeatReservation,\n                screeningEventTicketOffers: purchase.screeningEventTicketOffers,\n                checkMovieTicketActions: purchase.checkMovieTicketActions,\n                reservations: purchase.reservations,\n                reservation: reservation,\n                pendingMovieTickets: purchase.pendingMovieTickets,\n                cb: async (ticket: Models.Purchase.Reservation.IReservationTicket) => {\n                    this.actionService.purchase.selectTickets([{ ...reservation, ticket }]);\n                    this.isSelectedTicket = (await this.getUnselectedTicketReservations()).length === 0;\n                }\n            },\n            class: 'modal-dialog-centered'\n        });\n    }\n\n    public openMovieTicket(paymentMethodType: factory.chevre.paymentMethodType) {\n        this.modal.show(MovieTicketCheckModalComponent, {\n            initialState: {\n                paymentMethodType\n            },\n            class: 'modal-dialog-centered'\n        });\n    }\n\n}\n","import { AfterViewInit, Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { select, Store } from '@ngrx/store';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-transaction',\n    templateUrl: './purchase-transaction.component.html',\n    styleUrls: ['./purchase-transaction.component.scss']\n})\nexport class PurchaseTransactionComponent implements OnInit, AfterViewInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public error: Observable<string | null>;\n    public environment = getEnvironment();\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private activatedRoute: ActivatedRoute,\n        private actionService: ActionService,\n        private utilService: UtilService,\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.error = this.store.pipe(select(reducers.getError));\n        const tmpPurchase = await this.actionService.purchase.getData();\n        const external = Functions.Util.getExternalData();\n        if (this.environment.VIEW_TYPE === Models.Common.ViewType.Cinema\n            && external !== undefined\n            && external.eventId !== undefined\n            && tmpPurchase.authorizeSeatReservation !== undefined) {\n            this.router.navigate(['/purchase/cinema/overlap']);\n            return;\n        }\n        this.actionService.purchase.delete();\n        if (this.environment.VIEW_TYPE !== Models.Common.ViewType.Cinema\n            || external.eventId === undefined) {\n            this.router.navigate(['/error']);\n            return;\n        }\n        try {\n            const criteria = moment((await this.utilService.getServerTime()).date).toDate();\n            await this.actionService.purchase.convertExternalToPurchase(external.eventId);\n            const { screeningEvent } = await this.actionService.purchase.getData();\n            if (screeningEvent === undefined\n                || !new Models.Purchase.Performance(screeningEvent).isSales({ criteria })\n                || new Models.Purchase.Performance(screeningEvent).isSeatStatus('danger')) {\n                    throw new Error('Not for sale');\n            }\n            await this.actionService.purchase.startTransaction();\n            this.router.navigate(['/purchase/cinema/seat']);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    public ngAfterViewInit() {\n        const snapshot = this.activatedRoute.snapshot;\n        const language = snapshot.params.language;\n        if (language !== undefined) {\n            this.actionService.user.updateLanguage(language);\n        }\n    }\n\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\n\n@Component({\n    selector: 'app-purchase-event-performances-confirm',\n    templateUrl: './performances-confirm.component.html',\n    styleUrls: ['./performances-confirm.component.scss']\n})\nexport class PurchaseEventPerformancesConfirmComponent implements OnInit {\n\n    @Input() public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup;\n    @Input() public readonly: boolean;\n    @Output() public select = new EventEmitter<factory.chevre.event.screeningEvent.IEvent>();\n    public moment = moment;\n    public environment = getEnvironment();\n\n    constructor() { }\n\n    public ngOnInit() { }\n\n}\n","<div>\n    <div *ngIf=\"environment.PURCHASE_SCHEDULE_SORT === 'screeningEventSeries'\" class=\"bg-gray p-3\">\n        <div class=\"mb-2\">\n            <p class=\"font-weight-bold text-large\">{{ screeningEventsGroup.screeningEvent.name | changeLanguage }}</p>\n            <p class=\"text-small\"\n                *ngIf=\"screeningEventsGroup.screeningEvent.superEvent.headline && (screeningEventsGroup.screeningEvent.superEvent.headline | changeLanguage)\">\n                {{ screeningEventsGroup.screeningEvent.superEvent.headline | changeLanguage }}</p>\n            <p class=\"text-small\"\n                *ngIf=\"screeningEventsGroup.screeningEvent.superEvent.description && (screeningEventsGroup.screeningEvent.superEvent.description | changeLanguage)\">\n                {{\n                screeningEventsGroup.screeningEvent.superEvent.description | changeLanguage }}</p>\n        </div>\n        <div class=\"d-flex align-items-center\">\n            <div *ngIf=\"screeningEventsGroup.screeningEvent.workPerformed?.duration && moment.duration(screeningEventsGroup.screeningEvent.workPerformed?.duration).asMinutes() > 0\"\n                class=\"text-small ml-auto\">\n                <span class=\"mr-1\">{{ 'common.duration' | translate }}</span>{{\n                moment.duration(screeningEventsGroup.screeningEvent.workPerformed?.duration).asMinutes() }}{{ 'common.date.minute'\n                | translate }}\n            </div>\n        </div>\n    </div>\n    <div *ngIf=\"environment.PURCHASE_SCHEDULE_SORT === 'screen'\" class=\"bg-gray p-3\">\n        <p class=\"font-weight-bold text-large\">{{ screeningEventsGroup.screeningEvent.location.name | changeLanguage }}\n        </p>\n    </div>\n    <div class=\"p-3 bg-white d-flex flex-wrap\" [class.not-event]=\"readonly\">\n        <div *ngFor=\"let performance of screeningEventsGroup.data\" class=\"performance my-2\" [ngClass]=\"{ \n            'text-dark-gray': !performance.isSales() && performance.isSeatStatus('danger')\n            }\">\n            <div *ngIf=\"environment.PURCHASE_SCHEDULE_SORT === 'screen'\">\n                <p class=\"text-small text-overflow-ellipsis d-inline-block pr-3\">\n                    {{ performance.screeningEvent.name | changeLanguage }}\n                </p>\n            </div>\n            <div class=\"d-flex align-items-center\">\n                <div class=\"mr-2 font-weight-bold\">\n                    {{ moment(performance.screeningEvent.startDate).format('HH:mm') }}-{{\n                    moment(performance.screeningEvent.endDate).format('HH:mm') }}\n                </div>\n                <div class=\"status\" *ngIf=\"performance.isSales() && !performance.isInfinitetock()\">\n                    <div *ngIf=\"performance.isSeatStatus('success')\">\n                        <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n                    </div>\n                    <div *ngIf=\"performance.isSeatStatus('warning')\"\n                        class=\"d-flex justify-content-around align-items-center\">\n                        <img src=\"/assets/images/icon/status_warning.svg\" alt=\"\">\n                    </div>\n                    <div *ngIf=\"performance.isSeatStatus('danger')\">\n                        <img src=\"/assets/images/icon/status_danger_color.svg\" alt=\"\">\n                    </div>\n                    <div *ngIf=\"performance.isSeatStatus()\">\n                        <img src=\"/assets/images/icon/status_undefined.svg\" alt=\"\">\n                    </div>\n                </div>\n\n                <div class=\"status\" *ngIf=\"performance.isSales() && performance.isInfinitetock()\">\n                    <div class=\"d-flex justify-content-around align-items-center\">\n                        <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n                    </div>\n                </div>\n\n\n                <div class=\"status text-x-small\" *ngIf=\"performance.isSales({ status: 'end' })\">\n                    {{ 'purchase.event.schedule.status.endSale' | translate }}</div>\n                <div class=\"status text-x-small\" *ngIf=\"performance.isSales({ status: 'start' })\">\n                    {{ 'purchase.event.schedule.status.outsideSalesPeriod' | translate }}</div>\n            </div>\n        </div>\n    </div>\n</div>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport * as Models from '../../../../../models';\n\n@Component({\n    selector: 'app-movie-tickets',\n    templateUrl: './movie-tickets.component.html',\n    styleUrls: ['./movie-tickets.component.scss']\n})\nexport class MovieTicketsComponent implements OnInit {\n\n    @Input() public screeningEventTicketOffers: factory.chevre.event.screeningEvent.ITicketOffer[];\n    @Output() public select = new EventEmitter<factory.paymentMethodType>();\n    public isMovieTicket: boolean;\n    public isMGTicket: boolean;\n    public paymentMethodType = factory.paymentMethodType;\n    public moment = moment;\n    public environment = getEnvironment();\n    public viewType = Models.Common.ViewType;\n\n    constructor() { }\n\n    public async ngOnInit() {\n        const screeningEventTicketOffers = this.screeningEventTicketOffers;\n        const movieTicketTypeOffers = Functions.Purchase.getMovieTicketTypeOffers({ screeningEventTicketOffers });\n        this.isMovieTicket = (movieTicketTypeOffers.find(m => {\n            const findResult = m.priceSpecification.priceComponent.find(\n                p => (p.typeOf === factory.chevre.priceSpecificationType.UnitPriceSpecification\n                    && p.appliesToMovieTicket?.serviceOutput?.typeOf === factory.chevre.paymentMethodType.MovieTicket)\n            );\n            return findResult !== undefined;\n        }) !== undefined);\n        this.isMGTicket = (movieTicketTypeOffers.find(m => {\n            const findResult = m.priceSpecification.priceComponent.find(\n                p => (p.typeOf === factory.chevre.priceSpecificationType.UnitPriceSpecification\n                    && p.appliesToMovieTicket?.serviceOutput?.typeOf === factory.chevre.paymentMethodType.MGTicket)\n            );\n            return findResult !== undefined;\n        }) !== undefined);\n    }\n\n}\n","<div *ngIf=\"isMovieTicket || isMovieTicket\" class=\"mb-4 container bg-white\">\n    <div *ngIf=\"isMovieTicket\" class=\"py-3 row align-items-center movieticket\">\n        <p class=\"col-12 col-md-6 mb-2 mb-md-0\">{{ 'common.paymentMethodTypes.movieTicket.use' | translate }}</p>\n        <div class=\"col-12 col-md-6\">\n            <button type=\"button\" (click)=\"select.emit(paymentMethodType.MovieTicket)\"\n                class=\"btn btn-block bg-white border border-gray py-3\">\n                <img src=\"/assets/images/mvtk.svg\" height=\"24\" alt=\"\">\n            </button>\n        </div>\n    </div>\n    <div *ngIf=\"isMGTicket\" class=\"py-3 row align-items-center mgticket\">\n        <p class=\"col-12 col-md-6 mb-2 mb-md-0\">{{ 'common.paymentMethodTypes.mgTicket.use' | translate }}</p>\n        <div class=\"col-12 col-md-6\">\n            <button type=\"button\" (click)=\"select.emit(paymentMethodType.MGTicket)\"\n                class=\"btn btn-block bg-white border border-gray py-3\">\n                <div class=\"font-weight-bold text-large\">{{ 'common.paymentMethodTypes.mgTicket.label' | translate }}</div>\n                <!-- <img src=\"/assets/images/mvtk.svg\" height=\"24\" alt=\"\"> -->\n            </button>\n        </div>\n    </div>\n</div>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport * as Models from '../../../../../models';\n\n@Component({\n    selector: 'app-purchase-performance',\n    templateUrl: './performance.component.html',\n    styleUrls: ['./performance.component.scss']\n})\nexport class PurchasePerformanceComponent implements OnInit {\n\n    @Input() public performance: Models.Purchase.Performance;\n    @Output() public select = new EventEmitter<factory.chevre.event.screeningEvent.IEvent>();\n    public moment = moment;\n    public environment = getEnvironment();\n    public viewType = Models.Common.ViewType;\n\n    constructor() { }\n\n    public ngOnInit() {\n    }\n\n}\n","<div class=\"row mx-0 border boder-gray rounded p-3 py-md-3 text-md-center d-md-block align-items-center pointer h-100\"\n    [ngClass]=\"{ \n                'bg-white': performance.isSales() && !performance.isSeatStatus('danger'), \n                'bg-dark-gray text-light-gray not-event': !performance.isSales() \n                || performance.isSeatStatus('danger') \n                || (performance.isInfinitetock() && environment.VIEW_TYPE === viewType.Cinema)\n                }\" (click)=\"select.emit(performance.screeningEvent)\">\n    <div class=\"col-md-12 col-8 px-0\">\n        <div *ngIf=\"environment.PURCHASE_SCHEDULE_SORT === 'screeningEventSeries'\" class=\"mb-1 text-small screen-name\">\n            <p *ngIf=\"performance.screeningEvent.location.address | changeLanguage\"\n                class=\"text-overflow-ellipsis mr-2 mr-md-0 d-inline-block d-md-block\">\n                {{ performance.screeningEvent.location.address | changeLanguage }}</p>\n            <p class=\"text-overflow-ellipsis d-inline-block d-md-block\">\n                {{ performance.screeningEvent.location.name | changeLanguage }}</p>\n        </div>\n        <div *ngIf=\"environment.PURCHASE_SCHEDULE_SORT === 'screen'\" class=\"mb-1 text-small\">\n            <p class=\"text-overflow-ellipsis d-inline-block d-md-block\">\n                {{ performance.screeningEvent.name | changeLanguage }}</p>\n        </div>\n        <div>\n            <strong class=\"text-large\">{{ moment(performance.screeningEvent.startDate).format('HH:mm') }}</strong>\n            <span>-</span>\n            <span>{{ moment(performance.screeningEvent.endDate).format('HH:mm') }}</span>\n        </div>\n    </div>\n    <hr class=\"border-0 bg-light-gray my-2\">\n    <div class=\"col-md-12 col-4 px-0 text-center\">\n        <div class=\"status\" *ngIf=\"performance.isSales() && !performance.isInfinitetock()\">\n            <div *ngIf=\"performance.isSeatStatus('success')\" class=\"d-flex justify-content-center align-items-center\">\n                <div class=\"text-success mr-2\">\n                    {{ 'common.performance.status.success' | translate }}</div>\n                <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n            </div>\n            <div *ngIf=\"performance.isSeatStatus('warning')\" class=\"d-flex justify-content-center align-items-center\">\n                <div class=\"text-warning mr-2\">\n                    {{ 'common.performance.status.warning' | translate }}</div>\n                <img src=\"/assets/images/icon/status_warning.svg\" alt=\"\">\n            </div>\n            <div *ngIf=\"performance.isSeatStatus('danger')\" class=\"d-flex justify-content-center align-items-center\">\n                <div class=\"mr-2\">\n                    {{ 'common.performance.status.danger' | translate }}</div>\n                <img src=\"/assets/images/icon/status_danger.svg\" alt=\"\">\n            </div>\n            <div *ngIf=\"performance.isSeatStatus()\" class=\"d-flex justify-content-center align-items-center\">\n                <div class=\"mr-2\">\n                    {{ 'common.performance.status.success' | translate }}</div>\n                <img src=\"/assets/images/icon/status_undefined.svg\" alt=\"\">\n            </div>\n        </div>\n\n\n        <div class=\"status\" *ngIf=\"performance.isSales({ status: 'end' })\">\n            {{ 'common.performance.status.endSale' | translate }}</div>\n        <div class=\"status\" *ngIf=\"performance.isSales({ status: 'start' })\">\n            {{ 'common.performance.status.outsideSalesPeriod' | translate }}</div>\n        <div *ngIf=\"performance.isSales() && performance.isInfinitetock()\" class=\"status\">\n            <div class=\"d-flex justify-content-center align-items-center\">\n                <div class=\"text-success mr-2\">\n                    {{ 'common.performance.status.success' | translate }}</div>\n                <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n            </div>\n            <!-- <p class=\"text-small\">{{ 'common.performance.infiniteStock' | translate }}</p> -->\n        </div>\n    </div>\n</div>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\n\n@Component({\n    selector: 'app-purchase-performances',\n    templateUrl: './performances.component.html',\n    styleUrls: ['./performances.component.scss']\n})\nexport class PurchasePerformancesComponent implements OnInit {\n\n    @Input() public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup;\n    @Output() public select = new EventEmitter<factory.chevre.event.screeningEvent.IEvent>();\n    public moment = moment;\n    public environment = getEnvironment();\n\n    constructor() { }\n\n    public ngOnInit() {\n    }\n\n}\n","<div>\n    <div *ngIf=\"environment.PURCHASE_SCHEDULE_SORT === 'screeningEventSeries'\" class=\"p-3 bg-gray\">\n        <div class=\"mb-2\">\n            <p class=\"font-weight-bold text-large\">{{ screeningEventsGroup.screeningEvent.name | changeLanguage }}</p>\n            <p class=\"text-small\"\n                *ngIf=\"screeningEventsGroup.screeningEvent.superEvent.headline && (screeningEventsGroup.screeningEvent.superEvent.headline | changeLanguage)\">\n                {{ screeningEventsGroup.screeningEvent.superEvent.headline | changeLanguage }}</p>\n            <p class=\"text-small\"\n                *ngIf=\"screeningEventsGroup.screeningEvent.superEvent.description && (screeningEventsGroup.screeningEvent.superEvent.description | changeLanguage)\">{{\n                screeningEventsGroup.screeningEvent.superEvent.description | changeLanguage }}</p>\n        </div>\n        <div class=\"d-flex align-items-center flex-wrap\">\n            <div *ngIf=\"screeningEventsGroup.screeningEvent.workPerformed?.contentRating\"\n                class=\"content-rating text-small bg-dark-gray text-white py-1 px-2 mr-2\">{{\n                    screeningEventsGroup.screeningEvent.workPerformed?.contentRating }}</div>\n            <div *ngIf=\"screeningEventsGroup.screeningEvent.superEvent.dubLanguage\"\n                class=\"dub-language text-small bg-dark-gray text-white py-1 px-2 mr-2\">{{ 'common.dubbing' | translate }}</div>\n            <div *ngIf=\"screeningEventsGroup.screeningEvent.superEvent.subtitleLanguage\"\n                class=\"subtitle-language text-small bg-dark-gray text-white py-1 px-2 mr-2\">{{ 'common.subtitles' | translate }}</div>\n            <div *ngFor=\"let videoFormat of screeningEventsGroup.screeningEvent.superEvent.videoFormat\"\n                class=\"video-format text-small bg-dark-gray text-white py-1 px-2 mr-2\">{{ videoFormat.name }}</div>\n            <div *ngIf=\"screeningEventsGroup.screeningEvent.workPerformed?.duration && moment.duration(screeningEventsGroup.screeningEvent.workPerformed?.duration).asMinutes() > 0\"\n                class=\"text-small ml-auto\">\n                <span\n                    class=\"mr-1\">{{ 'common.duration' | translate }}</span>{{ moment.duration(screeningEventsGroup.screeningEvent.workPerformed?.duration).asMinutes() }}{{ 'common.date.minute' | translate }}\n            </div>\n        </div>\n    </div>\n    <div *ngIf=\"environment.PURCHASE_SCHEDULE_SORT === 'screen'\" class=\"p-3 bg-gray\">\n        <p class=\"font-weight-bold text-large\">{{ screeningEventsGroup.screeningEvent.location.name | changeLanguage }}</p>\n    </div>\n    <ul class=\"py-2 d-flex flex-wrap\">\n        <li *ngFor=\"let performance of screeningEventsGroup.data\" class=\"px-md-2 my-2\">\n            <app-purchase-performance [performance]=\"performance\" (select)=\"select.emit($event)\" class=\"mb-3\">\n            </app-purchase-performance>\n        </li>\n    </ul>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport * as moment from 'moment';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-info',\n    templateUrl: './purchase-info.component.html',\n    styleUrls: ['./purchase-info.component.scss']\n})\nexport class PurchaseInfoComponent implements OnInit {\n    @Input() public purchase: reducers.IPurchaseState;\n    public moment: typeof moment = moment;\n\n    constructor() { }\n\n    public ngOnInit() {\n    }\n\n}\n","<div>\n    <app-item-event [screeningEvent]=\"purchase.screeningEvent\"></app-item-event>\n    <div *ngIf=\"purchase.reservations.length > 0\" class=\"bg-white p-3\">\n        <app-item-list [reservations]=\"purchase.reservations\"></app-item-list>\n    </div>\n</div>\n","import { Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { UtilService } from '../../../../../services';\n\n@Component({\n    selector: 'app-purchase-terms',\n    templateUrl: './purchase-terms.component.html',\n    styleUrls: ['./purchase-terms.component.scss']\n})\nexport class PurchaseTermsComponent implements OnInit, OnChanges {\n    @Input() public language: string;\n    @Input() public screeningEvent?: factory.chevre.event.screeningEvent.IEvent;\n    public environment = getEnvironment();\n    public terms: string;\n\n    constructor(\n    private utilService: UtilService\n    ) { }\n\n    public ngOnInit() {\n    }\n\n    public async ngOnChanges() {\n        try {\n            const path = `/ejs/purchase/terms/${this.language}.ejs`;\n            const url = (await Functions.Util.isFile(`${Functions.Util.getProject().storageUrl}${path}`))\n                ? `${Functions.Util.getProject().storageUrl}${path}`\n                : `/default${path}`;\n            const view = await this.utilService.getText(url);\n            this.terms = (<any>window).ejs.render(view, {\n                screeningEvent: this.screeningEvent\n            });\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n}\n","<div class=\"border bg-white p-3  text-small scroll-vertical border\" [innerHTML]=\"terms\"></div>","import { Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { UtilService } from '../../../../../services';\n\n@Component({\n    selector: 'app-purchase-warning',\n    templateUrl: './purchase-warning.component.html',\n    styleUrls: ['./purchase-warning.component.scss']\n})\nexport class PurchaseWarningComponent implements OnInit, OnChanges {\n    @Input() public language: string;\n    @Input() public screeningEvent?: factory.chevre.event.screeningEvent.IEvent;\n    public environment = getEnvironment();\n    public warning: string;\n\n    constructor(\n    private utilService: UtilService\n    ) { }\n\n    public ngOnInit() {\n    }\n\n    public async ngOnChanges() {\n        try {\n            const path = `/ejs/purchase/warning/${this.language}.ejs`;\n            const url = (await Functions.Util.isFile(`${Functions.Util.getProject().storageUrl}${path}`))\n                ? `${Functions.Util.getProject().storageUrl}${path}`\n                : `/default${path}`;\n            const view = await this.utilService.getText(url);\n            this.warning = (<any>window).ejs.render(view, {\n                screeningEvent: this.screeningEvent\n            });\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n}\n","<div class=\"border bg-white p-3 text-small scroll-vertical border\" [innerHTML]=\"warning\"></div>","import {\n    AfterContentChecked,\n    AfterViewInit,\n    Component,\n    ElementRef,\n    EventEmitter,\n    Input,\n    OnDestroy,\n    OnInit,\n    Output,\n    ViewChild\n} from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { UtilService } from '../../../../../services';\n\n@Component({\n    selector: 'app-screen',\n    templateUrl: './screen.component.html',\n    styleUrls: ['./screen.component.scss']\n})\nexport class ScreenComponent implements OnInit, AfterViewInit, AfterContentChecked, OnDestroy {\n    public static ZOOM_SCALE = 1;\n    @Input() public openSeatingAllowed = false;\n    @Input() public theaterCode: string;\n    @Input() public screenCode: string;\n    @Input() public screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n    @Input() public reservations: Models.Purchase.Reservation.IReservation[];\n    @Input() public authorizeSeatReservation?:\n        factory.action.authorize.offer.seatReservation.IAction<factory.service.webAPI.Identifier.Chevre>;\n    @Output() public select = new EventEmitter<{\n        seat: Models.Purchase.Reservation.IReservationSeat;\n        status: Models.Purchase.Screen.SeatStatus;\n    }>();\n    public seats: Models.Purchase.Screen.IRow[];\n    public lineLabels: Models.Purchase.Screen.ILabel[];\n    public columnLabels: Models.Purchase.Screen.ILabel[];\n    public screenType: string;\n    public zoomState: boolean;\n    public scale: number;\n    public height: number;\n    public origin: string;\n    public screenData: Models.Purchase.Screen.IScreen;\n    public environment = getEnvironment();\n    public onWindowScroll: (event: Event) => void;\n    @ViewChild('screen', { static: true }) public screen: ElementRef<HTMLDivElement>;\n    @ViewChild('zoomBtn', { static: true }) public zoomBtn: ElementRef<HTMLDivElement>;\n\n    constructor(\n        private utilService: UtilService,\n        private elementRef: ElementRef\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        try {\n            this.zoomState = false;\n            this.scale = 1;\n            this.height = 0;\n            this.origin = '0 0';\n            this.screenData = await this.getScreenData();\n            this.createScreen();\n            this.scaleDown();\n            this.setScrollEvent();\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    /**\n     * \n     */\n    public ngAfterViewInit() {\n        const time = 300;\n        const timer = setInterval(() => {\n            if (this.screenData !== undefined) {\n                clearInterval(timer);\n                const screenElement = document.querySelector('.screen-style');\n                if (screenElement !== null && this.screenData.style !== undefined) {\n                    screenElement.innerHTML = this.screenData.style;\n                }\n            }\n        }, time);\n    }\n\n    /**\n     * \n     */\n    public async ngAfterContentChecked() {\n        if (this.screenData === undefined) {\n            return;\n        }\n        this.changeStatus();\n    }\n\n    /**\n     * \n     */\n    public ngOnDestroy() {\n        const element = <HTMLDivElement>document.getElementById('contents');\n        element.removeEventListener('scroll', this.onWindowScroll);\n    }\n\n    /**\n     * \n     */\n    public setScrollEvent() {\n        this.onWindowScroll = ((event: Event) => {\n            const target = <HTMLDivElement>event.target;\n            const rect = this.screen.nativeElement.getBoundingClientRect();\n            const offsetTop = rect.top - target.getBoundingClientRect().top;\n            const screenHeight = this.screen.nativeElement.clientHeight;\n            const btnHeight = this.zoomBtn.nativeElement.clientHeight;\n            const space = 10;\n            const top = (offsetTop > 0 || (screenHeight + offsetTop - btnHeight - space) < 0)\n                ? space : (offsetTop - space) * -1;\n            this.zoomBtn.nativeElement.style.top = `${top}px`;\n        }).bind(this);\n        const element = <HTMLDivElement>document.getElementById('contents');\n        element.addEventListener('scroll', this.onWindowScroll);\n    }\n\n    /**\n     * \n     */\n    public isZoomAllowed(): boolean {\n        const minWidth = 1346;\n        const mobileWidth = 1024;\n        return (window.innerWidth < mobileWidth || this.screenData.size.w > minWidth);\n    }\n\n    /**\n     * \n     */\n    public async getScreenData() {\n        const now = moment().toISOString();\n        const settingPath = 'json/theater/setting.json';\n        const setting = (await Functions.Util.isFile(`${Functions.Util.getProject().storageUrl}/${settingPath}`))\n            ? await this.utilService.getJson<Models.Purchase.Screen.IScreen>(`${Functions.Util.getProject().storageUrl}/${settingPath}`)\n            : await this.utilService.getJson<Models.Purchase.Screen.IScreen>(`/default/${settingPath}`);\n        const screenPath = `json/theater/${this.theaterCode}/${this.screenCode}.json?date=${now}`;\n        const screen = (await Functions.Util.isFile(`${Functions.Util.getProject().storageUrl}/${screenPath}`))\n            ? await this.utilService.getJson<Models.Purchase.Screen.IScreen>(`${Functions.Util.getProject().storageUrl}/${screenPath}`)\n            : this.generateScreenMap(setting);\n        const objects = screen.objects.map((o) => {\n            return { ...o, image: o.image.replace('/storage', Functions.Util.getProject().storageUrl) };\n        });\n        screen.objects = objects;\n        return { ...setting, ...screen };\n    }\n\n    /**\n     * \n     */\n    public generateScreenMap(setting: Models.Purchase.Screen.IScreen) {\n        if (this.screeningEventSeats.length === 0) {\n            return {\n                type: 0,\n                size: { w: 0, h: 0 },\n                objects: <Models.Purchase.Screen.IObject[]>[],\n                seatStart: { x: 0, y: 0 },\n                map: []\n            };\n        }\n        const array: { branchCode: string; line: string; column: string; }[][] = [];\n        this.screeningEventSeats.forEach((s) => {\n            const branchCode = s.branchCode;\n            const line = s.branchCode.split('-')[0];\n            const column = s.branchCode.split('-')[1];\n            const findResult = array.find(a => a.length > 0 && a[0].line === line);\n            if (findResult === undefined) {\n                array.push([{ branchCode, line, column }]);\n                return;\n            }\n            findResult.push({ branchCode, line, column });\n        });\n        const lineMaxArray = array.reduce((a, b) => a[a.length - 1].line > b[b.length - 1].line ? a : b);\n        const lineMax = lineMaxArray[lineMaxArray.length - 1].line;\n        const columnMaxArray = array.reduce((a, b) => a[a.length - 1].column > b[b.length - 1].column ? a : b);\n        const columnMax = Number(columnMaxArray[columnMaxArray.length - 1].column);\n        const map: number[][] = [];\n        const lineLabels = this.createLineLabel();\n        for (const lineLabel of lineLabels) {\n            if (lineLabel > lineMax) {\n                break;\n            }\n            const findResult = array.find(a => a[0].line === lineLabel);\n            const lineMap = [];\n            for (let i = 0; i < columnMax; i++) {\n                const column = String(i + 1);\n                const result = (findResult === undefined || findResult.find(f => f.column === column) === undefined) ? 0 : 1;\n                lineMap.push(result);\n            }\n            map.push(lineMap);\n        }\n        const space = 90;\n        const screenSpace = (this.environment.VIEW_TYPE === Models.Common.ViewType.Cinema)\n            ? space * 2 + 50 : space + 30;\n        const minWidth = 1346;\n        const size = {\n            w: map[0].length * setting.seatSize.w + (map[0].length - 1) * setting.seatMargin.w + space * 2,\n            h: map.length * setting.seatSize.h + (map.length - 1) * setting.seatMargin.h + space + screenSpace\n        };\n\n        return {\n            type: 0,\n            size: {\n                w: (size.w < minWidth) ? minWidth : size.w,\n                h: size.h\n            },\n            objects: <Models.Purchase.Screen.IObject[]>[],\n            seatStart: {\n                x: (size.w < minWidth) ? (minWidth - size.w) / 2 + space : space,\n                y: screenSpace\n            },\n            map,\n            style: (this.environment.VIEW_TYPE === Models.Common.ViewType.Cinema)\n                ? '<style>.screen-object { display: block !important }</style>'\n                : undefined\n        };\n    }\n\n    /**\n     * status\n     */\n    public changeStatus() {\n        const reservations = this.reservations;\n        this.seats.forEach((row) => {\n            row.data.forEach((seat) => {\n                if (seat.status === Models.Purchase.Screen.SeatStatus.Active) {\n                    seat.status = Models.Purchase.Screen.SeatStatus.Default;\n                }\n                const findReservationSeatResult = reservations.find((reservation) => {\n                    return (reservation.seat !== undefined\n                        && reservation.seat.seatNumber === seat.code\n                        && reservation.seat.seatSection === seat.section);\n                });\n                if (findReservationSeatResult !== undefined) {\n                    seat.status = Models.Purchase.Screen.SeatStatus.Active;\n                }\n            });\n        });\n    }\n\n    /**\n     * \n     * @method scaleUp\n     * @param {Event} event\n     * @returns {void}\n     */\n    public scaleUp(event: MouseEvent) {\n        if (this.zoomState) {\n            return;\n        }\n        if (!this.isZoomAllowed()) {\n            return;\n        }\n        this.zoomState = true;\n        const element: HTMLElement = this.elementRef.nativeElement;\n        const screen = <HTMLDivElement>element.querySelector('.screen');\n        const scroll = <HTMLDivElement>element.querySelector('.screen-scroll');\n        const rect = scroll.getBoundingClientRect();\n        const scrollTop = window.pageYOffset || (<HTMLElement>document.documentElement).scrollTop;\n        const scrollLeft = window.pageXOffset || (<HTMLElement>document.documentElement).scrollLeft;\n        const offset = {\n            top: rect.top + scrollTop,\n            left: rect.left + scrollLeft\n        };\n        const pos = {\n            x: event.pageX - offset.left,\n            y: event.pageY - offset.top\n        };\n        const scrollPos = {\n            x: pos.x / this.scale - screen.offsetWidth / 2,\n            y: pos.y / this.scale - screen.offsetHeight / 2,\n        };\n        this.scale = ScreenComponent.ZOOM_SCALE;\n        this.origin = '50% 50%';\n\n        setTimeout(() => {\n            scroll.scrollLeft = scrollPos.x;\n            scroll.scrollTop = scrollPos.y;\n        }, 0);\n    }\n\n    /**\n     * \n     * @method scaleDown\n     * @returns {void}\n     */\n    public scaleDown(): void {\n        const element: HTMLElement = this.elementRef.nativeElement;\n        const screen = <HTMLDivElement>element.querySelector('.screen');\n        this.zoomState = false;\n        const scale = screen.offsetWidth / this.screenData.size.w;\n        this.scale = (scale > ScreenComponent.ZOOM_SCALE) ? ScreenComponent.ZOOM_SCALE : scale;\n        this.height = this.screenData.size.h * this.scale;\n        this.origin = '0 0';\n    }\n\n    /**\n     * \n     * @method resize\n     */\n    public resize(): void {\n        this.scaleDown();\n    }\n\n    /**\n     * \n     */\n    public createLineLabel() {\n        const labels: string[] = [];\n        const startLabelNo = 65;\n        const endLabelNo = 91;\n        for (let i = startLabelNo; i < endLabelNo; i++) {\n            labels.push(String.fromCharCode(i));\n        }\n        return labels;\n    }\n\n    /**\n     * \n     */\n    public createScreen() {\n        // y\n        const labels = this.createLineLabel();\n        // \n        this.lineLabels = [];\n        // \n        this.columnLabels = [];\n        // \n        const seats: Models.Purchase.Screen.IRow[] = [];\n\n        const pos = { x: 0, y: 0 };\n        let labelCount = 0;\n        for (let y = 0; y < this.screenData.map.length; y++) {\n            if (y === 0) {\n                pos.y = 0;\n            }\n            // \n            if (y === 0) {\n                pos.y += this.screenData.seatStart.y;\n            } else if (this.screenData.map[y].length === 0) {\n                pos.y += this.screenData.aisle.middle.h - this.screenData.seatMargin.h;\n            } else {\n                labelCount++;\n                pos.y += this.screenData.seatSize.h + this.screenData.seatMargin.h;\n            }\n            if (this.screenData.map[y].length > 0) {\n                seats.push({\n                    className: `seat-${labels[labelCount]}`,\n                    code: labels[labelCount],\n                    x: 0,\n                    y: pos.y,\n                    data: []\n                });\n                for (let x = 0; x < this.screenData.map[y].length; x++) {\n                    if (x === 0) {\n                        pos.x = this.screenData.seatStart.x;\n                    }\n                    // HTML\n                    if (x === 0 && this.screenData.lineLabel) {\n                        this.lineLabels.push({\n                            id: labelCount,\n                            w: this.screenData.seatSize.w,\n                            h: this.screenData.seatSize.h,\n                            y: pos.y,\n                            x: pos.x - this.screenData.seatLabelPos,\n                            label: labels[labelCount]\n                        });\n                    }\n                    if (this.screenData.map[y][x] === 8) {\n                        pos.x += this.screenData.aisle.middle.w;\n                    } else if (this.screenData.map[y][x] === 9) {\n                        pos.x += this.screenData.aisle.middle.w;\n                    } else if (this.screenData.map[y][x] === 10) {\n                        pos.x += (this.screenData.seatSize.w / 2) + this.screenData.seatMargin.w;\n                    } else if (this.screenData.map[y][x] === 11) {\n                        pos.x += (this.screenData.seatSize.w / 2) + this.screenData.seatMargin.w;\n                    }\n                    // HTML\n                    if (y === 0 && this.screenData.columnLabel) {\n                        const label = (this.screenData.seatNumberAlign === 'left')\n                            ? String(x + 1)\n                            : String(this.screenData.map[0].length - x);\n                        this.columnLabels.push({\n                            id: x,\n                            w: this.screenData.seatSize.w,\n                            h: this.screenData.seatSize.h,\n                            y: pos.y - this.screenData.seatNumberPos,\n                            x: pos.x,\n                            label: label\n                        });\n                    }\n                    if (this.screenData.map[y][x] === 1\n                        || this.screenData.map[y][x] === 4\n                        || this.screenData.map[y][x] === 5\n                        || this.screenData.map[y][x] === 8\n                        || this.screenData.map[y][x] === 10) {\n                        // HTML\n                        const code = (() => {\n                            return (this.screenData.seatNumberAlign === 'left')\n                                ? `${labels[labelCount]}-${String(x + 1)}`\n                                : `${labels[labelCount]}-${String(this.screenData.map[y].length - x)}`;\n                        })();\n                        const className = [`seat-${code}`];\n                        let section = '';\n                        const row = '';\n                        let status = Models.Purchase.Screen.SeatStatus.Disabled;\n                        let acceptedOffer;\n                        // \n                        const findSeat =\n                            this.screeningEventSeats.find(s => s.branchCode === code);\n                        if (findSeat !== undefined\n                            && findSeat.offers !== undefined) {\n                            if (findSeat.containedInPlace !== undefined\n                                && findSeat.containedInPlace.branchCode !== undefined) {\n                                section = findSeat.containedInPlace.branchCode;\n                            }\n                            if (findSeat.offers[0].availability === factory.chevre.itemAvailability.InStock) {\n                                status = Models.Purchase.Screen.SeatStatus.Default;\n                            }\n                            acceptedOffer = {\n                                ticketedSeat: <Models.Purchase.Reservation.IReservationSeat>{\n                                    typeOf: findSeat.typeOf,\n                                    seatingType: findSeat.seatingType,\n                                    seatNumber: findSeat.branchCode,\n                                    seatRow: row,\n                                    seatSection: section,\n                                    offers: findSeat.offers\n                                }\n                            };\n                        }\n                        if (findSeat === undefined) {\n                            className.push('space');\n                        }\n                        if (this.authorizeSeatReservation !== undefined\n                            && this.authorizeSeatReservation.result !== undefined\n                            && this.authorizeSeatReservation.result.responseBody.object.reservations !== undefined) {\n                            // chevre\n                            const findResult = this.authorizeSeatReservation.result.responseBody.object.reservations.find((r) => {\n                                const ticketedSeat = r.reservedTicket.ticketedSeat;\n                                return (ticketedSeat !== undefined\n                                    && ticketedSeat.seatNumber === code\n                                    && ticketedSeat.seatSection === section\n                                    && ticketedSeat.seatRow === row);\n                            });\n                            if (findResult !== undefined) {\n                                status = Models.Purchase.Screen.SeatStatus.Default;\n                            }\n                        }\n                        if (this.screenData.hc !== undefined\n                            && this.screenData.hc.indexOf(code) !== -1) {\n                            className.push('hc');\n                        }\n                        if (this.screenData.spare !== undefined\n                            && this.screenData.spare.indexOf(code) !== -1) {\n                            className.push('spare');\n                        }\n                        const seat = {\n                            className: className.join(' '),\n                            w: this.screenData.seatSize.w,\n                            h: this.screenData.seatSize.h,\n                            y: 0,\n                            x: pos.x,\n                            code,\n                            section,\n                            status,\n                            ticketedSeat: (acceptedOffer !== undefined) ? acceptedOffer.ticketedSeat : undefined,\n                            label: `${code.split('-')[0]}<br>${code.split('-')[1]}`,\n                        };\n                        seats[labelCount].data.push(seat);\n                    }\n                    // \n                    if (this.screenData.map[y][x] === 2) {\n                        pos.x += this.screenData.aisle.middle.w + this.screenData.seatMargin.w;\n                    } else if (this.screenData.map[y][x] === 3) {\n                        pos.x += this.screenData.aisle.small.w + this.screenData.seatMargin.w;\n                    } else if (this.screenData.map[y][x] === 4) {\n                        pos.x += this.screenData.aisle.middle.w + this.screenData.seatSize.w + this.screenData.seatMargin.w;\n                    } else if (this.screenData.map[y][x] === 5) {\n                        pos.x += this.screenData.aisle.small.w + this.screenData.seatSize.w + this.screenData.seatMargin.w;\n                    } else if (this.screenData.map[y][x] === 6) {\n                        pos.x += this.screenData.aisle.middle.w + this.screenData.seatSize.w + this.screenData.seatMargin.w;\n                    } else if (this.screenData.map[y][x] === 7) {\n                        pos.x += this.screenData.aisle.small.w + this.screenData.seatSize.w + this.screenData.seatMargin.w;\n                    } else {\n                        pos.x += this.screenData.seatSize.w + this.screenData.seatMargin.w;\n                    }\n                }\n            }\n        }\n        // \n        const screenType = (this.screenData.type === 1)\n            ? 'screen-imax' : (this.screenData.type === 2)\n                ? 'screen-4dx' : '';\n\n        this.seats = seats;\n        this.screenType = screenType;\n    }\n\n    public selectSeat(seat: Models.Purchase.Screen.ISeat) {\n        if (this.isZoomAllowed() && !this.zoomState) {\n            return;\n        }\n        if (seat.ticketedSeat === undefined\n            || seat.status === Models.Purchase.Screen.SeatStatus.Disabled) {\n            return;\n        }\n        if (this.screenData.hc !== undefined\n            && this.screenData.hc.indexOf(seat.code) !== -1) {\n            return;\n        }\n        if (this.screenData.spare !== undefined\n            && this.screenData.spare.indexOf(seat.code) !== -1) {\n            return;\n        }\n        this.select.emit({\n            seat: seat.ticketedSeat,\n            status: seat.status\n        });\n    }\n}\n","<div class=\"position-relative bg-white\">\n    <div *ngIf=\"openSeatingAllowed\" class=\"open-seating-allowed\"></div>\n    <div #screen class=\"screen\" [class.zoom]=\"zoomState\" (window:resize)=\"resize()\">\n        <div #zoomBtn [class.active]=\"zoomState\" class=\"zoom-btn text-center\" (click)=\"scaleDown()\">\n            <i class=\"fas fa-search-minus\"></i>\n        </div>\n        <div *ngIf=\"screenData\" class=\"screen-scroll\" [ngStyle]=\"{ \n            'height.px': height,\n            'transform-origin': origin,\n            'transform': 'scale(' + scale + ')'\n        }\">\n            <div class=\"screen-inner {{ screenType }}\"\n                [ngStyle]=\"{ 'width.px': screenData.size.w, 'height.px': screenData.size.h }\" (click)=\"scaleUp($event)\">\n                <div class=\"d-none screen-object\">SCREEN</div>\n                <div *ngFor=\"let object of screenData.objects\" class=\"object\" [ngStyle]=\"{\n                    'width.px': object.w, \n                    'height.px': object.h, \n                    'top.px': object.y, \n                    'left.px': object.x, \n                    'background-image': 'url(' + object.image + ')',\n                    'background-size': object.w + 'px ' +object.h + 'px'\n                }\"></div>\n\n                <div *ngFor=\"let columnLabel of columnLabels\"\n                    class=\"object label-object column-object column-object-{{ columnLabel.id }}\" [ngStyle]=\"{\n                    'width.px': columnLabel.w,\n                    'height.px': columnLabel.h, \n                    'top.px': columnLabel.y, \n                    'left.px': columnLabel.x\n                }\">{{\n                    columnLabel.label }}</div>\n\n                <div *ngFor=\"let lineLabel of lineLabels\"\n                    class=\"object label-object line-object line-object-{{ lineLabel.id }}\" [ngStyle]=\"{\n                    'width.px': lineLabel.w,\n                    'height.px': lineLabel.h, \n                    'top.px': lineLabel.y, \n                    'left.px': lineLabel.x\n                }\">{{\n                    lineLabel.label }}</div>\n\n                <div *ngFor=\"let row of seats\" class=\"object {{ row.className }}\" [ngStyle]=\"{\n                        'top.px': row.y, \n                        'left.px': row.x\n                    }\">\n                    <div *ngFor=\"let seat of row.data\" class=\"seat {{ seat.className }} {{ seat.status }}\" [ngStyle]=\"{\n                        'top.px': seat.y, \n                        'left.px': seat.x,\n                        'width.px': seat.w,\n                        'height.px': seat.h\n                    }\" (click)=\"selectSeat(seat)\">\n                        <div class=\"seat-code\">{{ seat.code.replace('-', '') }}</div>\n                        <div class=\"seat-label\" [innerHtml]=\"seat.label\"></div>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n        <div *ngIf=\"screenData\" class=\"screen-style\"></div>\n    </div>\n</div>\n\n<div *ngIf=\"screenData?.html\" class=\"screen-html\" [innerHtml]=\"screenData.html\"></div>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'app-seat-info',\n    templateUrl: './seat-info.component.html',\n    styleUrls: ['./seat-info.component.scss']\n})\nexport class SeatInfoComponent implements OnInit {\n\n    constructor() { }\n\n    public ngOnInit() {\n    }\n\n}\n","<div class=\"bg-white px-3\">\n    <div class=\"container\">\n        <div class=\"row align-items-center\">\n            <div class=\"d-flex align-items-center col-6 col-md-3\">\n                <div class=\"seat\"></div>\n                <div>{{ 'purchase.seat.normal' | translate }}</div>\n            </div>\n            <div class=\"d-flex align-items-center col-6 col-md-3\">\n                <div class=\"seat active\"></div>\n                <div>{{ 'purchase.seat.active' | translate }}</div>\n            </div>\n            <div class=\"d-flex align-items-center col-6 col-md-3\">\n                <div class=\"seat disabled\"></div>\n                <div>{{ 'purchase.seat.disabled' | translate }}</div>\n            </div>\n            <div class=\"d-flex align-items-center col-6 col-md-3\">\n                <div class=\"seat space disabled\"></div>\n                <div>{{ 'purchase.seat.space' | translate }}</div>\n            </div>\n        </div>\n    </div>\n</div>","import { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { getEnvironment } from '../../../../../../environments/environment';\n\n@Component({\n    selector: 'app-transaction-remaining-time',\n    templateUrl: './transaction-remaining-time.component.html',\n    styleUrls: ['./transaction-remaining-time.component.scss']\n})\nexport class TransactionRemainingTimeComponent implements OnInit, OnDestroy {\n    @Input() public transaction: factory.transaction.placeOrder.ITransaction;\n    public isExpired: boolean;\n    public diff: { hours: string; minutes: string; seconds: string; };\n    public timer: any;\n    public width: number;\n    public environment = getEnvironment();\n\n    constructor(\n        private router: Router\n    ) { }\n\n    public ngOnInit() {\n        this.update();\n    }\n\n    public ngOnDestroy() {\n        clearTimeout(this.timer);\n    }\n\n    private update() {\n        this.updateProcess();\n        const time = 1000;\n        this.timer = setTimeout(() => { this.update(); }, time);\n    }\n\n    private updateProcess() {\n        const now = moment();\n        const expires = moment(this.transaction.expires);\n        this.isExpired = expires.diff(now) < 0;\n        this.diff = {\n            hours: `00${expires.diff(now, 'hours')}`.slice(-2),\n            minutes: `00${expires.diff(now, 'minutes') % 60}`.slice(-2),\n            seconds: `00${expires.diff(now, 'seconds') % 60 % 60}`.slice(-2)\n        };\n        this.width = Math.floor(expires.diff(now, 'seconds') / (Number(this.environment.PURCHASE_TRANSACTION_TIME) * 60) * 100);\n        if (this.isExpired) {\n            this.router.navigate(['/expired']);\n        }\n    }\n\n}\n","<div class=\"contents-width mx-auto px-3 py-1 position-relative bg-white\" *ngIf=\"!isExpired && environment.PURCHASE_TRANSACTION_TIME_DISPLAY\">\n    <div class=\"cover w-100 h-100 bg-primary\"></div>\n    <div class=\"expired bg-primary\" [style.width.%]=\"width\"></div>\n    <p class=\"text-small text-white position-relative\">{{ 'common.timeLimit' | translate }} {{ this.diff.hours }}:{{ this.diff.minutes }}:{{ this.diff.seconds }}</p>\n</div>","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { PurchaseTransactionGuardService, ViewTypeGuardService } from '../../canActivates';\nimport { BaseComponent } from '../shared/components/pages/base/base.component';\nimport { PurchaseCinemaOverlapComponent } from './components/pages/cinema/purchase-cinema-overlap/purchase-cinema-overlap';\nimport { PurchaseCinemaScheduleComponent } from './components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component';\nimport { PurchaseCinemaSeatComponent } from './components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component';\nimport { PurchaseCinemaTicketComponent } from './components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component';\nimport { PurchaseEventDateComponent } from './components/pages/event/purchase-event-date/purchase-event-date.component';\nimport { PurchaseEventScheduleComponent } from './components/pages/event/purchase-event-schedule/purchase-event-schedule.component';\nimport { PurchaseEventSeatTicketComponent } from './components/pages/event/purchase-event-seat-ticket/purchase-event-seat-ticket.component';\nimport { PurchaseEventSeatComponent } from './components/pages/event/purchase-event-seat/purchase-event-seat.component';\nimport { PurchaseBaseComponent } from './components/pages/purchase-base/purchase-base.component';\nimport { PurchaseCompleteComponent } from './components/pages/purchase-complete/purchase-complete.component';\nimport { PurchaseConfirmComponent } from './components/pages/purchase-confirm/purchase-confirm.component';\nimport { PurchaseInputComponent } from './components/pages/purchase-input/purchase-input.component';\nimport { PurchaseRootComponent } from './components/pages/purchase-root/purchase-root.component';\nimport { PurchaseTransactionComponent } from './components/pages/purchase-transaction/purchase-transaction.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PurchaseBaseComponent,\n    children: [\n      {\n        path: 'cinema',\n        canActivate: [ViewTypeGuardService],\n        children: [\n          { path: 'overlap', component: PurchaseCinemaOverlapComponent },\n          { path: 'seat', component: PurchaseCinemaSeatComponent },\n          { path: 'ticket', component: PurchaseCinemaTicketComponent },\n        ]\n      },\n      {\n        path: 'event',\n        canActivate: [ViewTypeGuardService],\n        children: [\n          { path: 'schedule', component: PurchaseEventScheduleComponent },\n          {\n            path: 'seat',\n            canActivate: [ViewTypeGuardService],\n            children: [\n              { path: '', component: PurchaseEventSeatComponent },\n              { path: 'ticket', component: PurchaseEventSeatTicketComponent }\n            ]\n          },\n        ]\n      },\n      { path: 'input', canActivate: [PurchaseTransactionGuardService], component: PurchaseInputComponent },\n      { path: 'confirm', canActivate: [PurchaseTransactionGuardService], component: PurchaseConfirmComponent },\n      { path: 'complete', component: PurchaseCompleteComponent }\n    ]\n  },\n  {\n    path: '',\n    component: BaseComponent,\n    children: [\n      { path: 'root', component: PurchaseRootComponent },\n      { path: 'transaction', component: PurchaseTransactionComponent },\n      {\n        path: 'cinema',\n        canActivate: [ViewTypeGuardService],\n        children: [\n          { path: 'schedule', component: PurchaseCinemaScheduleComponent }\n        ]\n      },\n      {\n        path: 'event',\n        canActivate: [ViewTypeGuardService],\n        children: [\n          { path: 'date', component: PurchaseEventDateComponent }\n        ]\n      }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PurchaseRoutingModule { }\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { PurchaseCinemaOverlapComponent } from './components/pages/cinema/purchase-cinema-overlap/purchase-cinema-overlap';\nimport { PurchaseCinemaScheduleComponent } from './components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component';\nimport { PurchaseCinemaSeatComponent } from './components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component';\nimport { PurchaseCinemaTicketComponent } from './components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component';\nimport { PurchaseEventDateComponent } from './components/pages/event/purchase-event-date/purchase-event-date.component';\nimport { PurchaseEventScheduleComponent } from './components/pages/event/purchase-event-schedule/purchase-event-schedule.component';\nimport { PurchaseEventSeatTicketComponent } from './components/pages/event/purchase-event-seat-ticket/purchase-event-seat-ticket.component';\nimport { PurchaseEventSeatComponent } from './components/pages/event/purchase-event-seat/purchase-event-seat.component';\nimport { PurchaseBaseComponent } from './components/pages/purchase-base/purchase-base.component';\nimport { PurchaseCompleteComponent } from './components/pages/purchase-complete/purchase-complete.component';\nimport { PurchaseConfirmComponent } from './components/pages/purchase-confirm/purchase-confirm.component';\nimport { PurchaseInputComponent } from './components/pages/purchase-input/purchase-input.component';\nimport { PurchaseRootComponent } from './components/pages/purchase-root/purchase-root.component';\nimport { PurchaseSeatComponent } from './components/pages/purchase-seat/purchase-seat.component';\nimport { PurchaseTicketComponent } from './components/pages/purchase-ticket/purchase-ticket.component';\nimport { PurchaseTransactionComponent } from './components/pages/purchase-transaction/purchase-transaction.component';\nimport { PurchaseEventPerformancesConfirmComponent } from './components/parts/event/performances-confirm/performances-confirm.component';\nimport { MovieTicketsComponent } from './components/parts/movie-tickets/movie-tickets.component';\nimport { PurchasePerformanceComponent } from './components/parts/performance/performance.component';\nimport { PurchasePerformancesComponent } from './components/parts/performances/performances.component';\nimport { PurchaseInfoComponent } from './components/parts/purchase-info/purchase-info.component';\nimport { PurchaseTermsComponent } from './components/parts/purchase-terms/purchase-terms.component';\nimport { PurchaseWarningComponent } from './components/parts/purchase-warning/purchase-warning.component';\nimport { ScreenComponent } from './components/parts/screen/screen.component';\nimport { SeatInfoComponent } from './components/parts/seat-info/seat-info.component';\nimport { TransactionRemainingTimeComponent } from './components/parts/transaction-remaining-time/transaction-remaining-time.component';\nimport { PurchaseRoutingModule } from './purchase-routing.module';\n\n\n\n@NgModule({\n  declarations: [\n    PurchaseBaseComponent,\n    PurchaseInputComponent,\n    PurchaseConfirmComponent,\n    PurchaseCompleteComponent,\n    PurchaseInfoComponent,\n    PurchaseCinemaScheduleComponent,\n    PurchaseCinemaSeatComponent,\n    PurchaseCinemaTicketComponent,\n    PurchaseCinemaOverlapComponent,\n    PurchaseEventScheduleComponent,\n    PurchaseEventPerformancesConfirmComponent,\n    PurchaseRootComponent,\n    PurchasePerformanceComponent,\n    PurchasePerformancesComponent,\n    PurchaseEventDateComponent,\n    PurchaseTransactionComponent,\n    PurchaseTermsComponent,\n    PurchaseWarningComponent,\n    ScreenComponent,\n    TransactionRemainingTimeComponent,\n    PurchaseEventSeatComponent,\n    PurchaseEventSeatTicketComponent,\n    PurchaseTicketComponent,\n    PurchaseSeatComponent,\n    SeatInfoComponent,\n    MovieTicketsComponent,\n  ],\n  entryComponents: [],\n  imports: [\n    CommonModule,\n    PurchaseRoutingModule,\n    SharedModule,\n  ],\n  exports: []\n})\nexport class PurchaseModule { }\n"],"sourceRoot":"webpack:///"}